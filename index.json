[{"categories":["DevOps"],"content":"You can learn how to build hugo blog with loveit theme. With github action’s help you can auto deploy to github page ","date":"2022-04-01","objectID":"/how-to-install-hugo-with-loveit-theme/:0:0","tags":["github pag","git_action","loveit"],"title":"How to Install Hugo With Loveit Theme","uri":"/how-to-install-hugo-with-loveit-theme/"},{"categories":["DevOps"],"content":"Install Hugo ","date":"2022-04-01","objectID":"/how-to-install-hugo-with-loveit-theme/:1:0","tags":["github pag","git_action","loveit"],"title":"How to Install Hugo With Loveit Theme","uri":"/how-to-install-hugo-with-loveit-theme/"},{"categories":["DevOps"],"content":"Install theme and plugin git init git remote add origin git@github.com:echowings/blogs.git git submodule add https://github.com/dillonzq/LoveIt.git themes/LoveIt git submodule add https://github.com/kaushalmodi/hugo-search-fuse-js.git themes/hugo-search-fuse-js git submodule add --force -b master git@github.com:echowings/echowings.github.io.git public {{\u003c mermaid \u003e}} GRAPH LR; A--\u003eB ","date":"2022-04-01","objectID":"/how-to-install-hugo-with-loveit-theme/:2:0","tags":["github pag","git_action","loveit"],"title":"How to Install Hugo With Loveit Theme","uri":"/how-to-install-hugo-with-loveit-theme/"},{"categories":["container"],"content":"How to deploy vlmcsd with docker-compose FROMalpine:latest as builderWORKDIR/rootRUN sed -i 's/dl-cdn.alpinelinux.org/mirrors.ustc.edu.cn/g' /etc/apk/repositoriesRUN apk add --no-cache git make build-base \u0026\u0026 \\ \u0026\u0026 rm -rf /var/lib/apt/lists/* \u0026\u0026 rm -rf /var/cache/apk/* \u0026\u0026 \\ git clone --branch master --single-branch https://github.com/Wind4/vlmcsd.git \u0026\u0026 \\ cd vlmcsd \u0026\u0026 \\ makeFROMalpine:latestCOPY --from=builder /root/vlmcsd/bin/vlmcsd /vlmcsdRUN apk add --no-cache tzdataEXPOSE1688/tcpCMD [\"/vlmcsd\", \"-D\", \"-d\", \"-t\", \"3\", \"-e\", \"-v\"] ","date":"2021-08-22","objectID":"/how-to-deploy-vlmcsd-with-docker-compose/:0:0","tags":["kms","vlmcsd","docker","dockerfile","docker-compose"],"title":"How to Deploy Vlmcsd With Docker-Compose","uri":"/how-to-deploy-vlmcsd-with-docker-compose/"},{"categories":["shell"],"content":"#How to batch rename filesname ls *.mp4| awk -F\" 【中文 www.zhongwen.zw 】\" '{print \"mv \\\"\"$0\"\\\" \\\"\"$1$2\"\\\"\"}' | bash: ","date":"2021-08-01","objectID":"/how-to-batch-rename-filesname/:0:0","tags":["shell","linux","chinese"],"title":"How to Batch Rename Filesname","uri":"/how-to-batch-rename-filesname/"},{"categories":["pve"],"content":"How to delete ghost monitor in ceph cluster Today , after I let a new server join pve cluster. ceph mon is stopped. I want to start or delete it , I always got a failed notification. After search and try to fix it. At last I fixed it.Here is what I had do ","date":"2021-07-01","objectID":"/how-to-delete-ghost-monitor-in-ceph-cluster/:0:0","tags":["hci","pve","ceph"],"title":"How to Delete Ghost Monitor in Ceph Cluster","uri":"/how-to-delete-ghost-monitor-in-ceph-cluster/"},{"categories":["pve"],"content":"Issue description root@xa-autotest-hci04:~# pveceph createmon monitor 'xa-autotest-hci04' already exists root@xa-autotest-hci04:~# pveceph mon destroy xa-autotest-hci04 no such monitor id 'xa-autotest-hci04' ","date":"2021-07-01","objectID":"/how-to-delete-ghost-monitor-in-ceph-cluster/:1:0","tags":["hci","pve","ceph"],"title":"How to Delete Ghost Monitor in Ceph Cluster","uri":"/how-to-delete-ghost-monitor-in-ceph-cluster/"},{"categories":["pve"],"content":"How to fixed it #stop ceph-mon@xa-autotest-hci04 service systemctl stop ceph-mon@xa-autotest-hci04 #Disable ceph-mon@xa-autotest-hci04 service systemctl disable ceph-mon@xa-autotest-hci04 pveceph purge rm -rf /var/lib/ceph/mon/ceph-xa-autotest-hci04 pveceph createmon #Created symlink /etc/systemd/system/ceph-mon.target.wants/ceph-mon@xa-autotest-hci04.service -\u003e /lib/systemd/system/ceph-mon@.service. ","date":"2021-07-01","objectID":"/how-to-delete-ghost-monitor-in-ceph-cluster/:2:0","tags":["hci","pve","ceph"],"title":"How to Delete Ghost Monitor in Ceph Cluster","uri":"/how-to-delete-ghost-monitor-in-ceph-cluster/"},{"categories":["pve"],"content":"##How to let a new server join the exist HCI cluster ","date":"2021-07-01","objectID":"/how-to-let-a-new-server-join-hci-system/:0:0","tags":["pve","hci","ceph","bcache"],"title":"How to Let a New Server Join Hci System","uri":"/how-to-let-a-new-server-join-hci-system/"},{"categories":["pve"],"content":"1. Insall the pve on the server –skip— ","date":"2021-07-01","objectID":"/how-to-let-a-new-server-join-hci-system/:0:1","tags":["pve","hci","ceph","bcache"],"title":"How to Let a New Server Join Hci System","uri":"/how-to-let-a-new-server-join-hci-system/"},{"categories":["pve"],"content":"2. Let the new server join the pve cluster #ssh login the server pvecm add 10.32.4.37 ","date":"2021-07-01","objectID":"/how-to-let-a-new-server-join-hci-system/:0:2","tags":["pve","hci","ceph","bcache"],"title":"How to Let a New Server Join Hci System","uri":"/how-to-let-a-new-server-join-hci-system/"},{"categories":["pve"],"content":"3. configure NTP server cat \u003e\u003e /etc/systemd/timesyncd.conf \u003c\u003c EOF NTP=192.168.0.2 192.168.0.3 EOF # Restart systemd-timesyncd service to apply settings systemctl restart systemd-timesyncd ","date":"2021-07-01","objectID":"/how-to-let-a-new-server-join-hci-system/:0:3","tags":["pve","hci","ceph","bcache"],"title":"How to Let a New Server Join Hci System","uri":"/how-to-let-a-new-server-join-hci-system/"},{"categories":["pve"],"content":"4. Install ceph pveceph install ","date":"2021-07-01","objectID":"/how-to-let-a-new-server-join-hci-system/:0:4","tags":["pve","hci","ceph","bcache"],"title":"How to Let a New Server Join Hci System","uri":"/how-to-let-a-new-server-join-hci-system/"},{"categories":["pve"],"content":"5. Partition nvme disk partitin 1-6 for block.wal(ceph) partition 7-12 for block.db(ceph) partition 13-18 for bcache parted -s /dev/nvme1n1 mktable gpt parted -s /dev/nvme1n1 mkpart primary 1M 10G parted -s /dev/nvme1n1 mkpart primary 10G 20G parted -s /dev/nvme1n1 mkpart primary 20G 30G parted -s /dev/nvme1n1 mkpart primary 30G 40G parted -s /dev/nvme1n1 mkpart primary 40G 50G parted -s /dev/nvme1n1 mkpart primary 50G 60G parted -s /dev/nvme1n1 mkpart primary 60G 110G parted -s /dev/nvme1n1 mkpart primary 110G 160G parted -s /dev/nvme1n1 mkpart primary 160G 210G parted -s /dev/nvme1n1 mkpart primary 210G 260G parted -s /dev/nvme1n1 mkpart primary 260G 310G parted -s /dev/nvme1n1 mkpart primary 310G 360G parted -s /dev/nvme1n1 mkpart primary 360G 433G parted -s /dev/nvme1n1 mkpart primary 433G 506G parted -s /dev/nvme1n1 mkpart primary 506G 579G parted -s /dev/nvme1n1 mkpart primary 579G 652G parted -s /dev/nvme1n1 mkpart primary 652G 725G parted -s /dev/nvme1n1 mkpart primary 725G 800G parted -s /dev/nvme2n1 mktable gpt parted -s /dev/nvme2n1 mkpart primary 1M 10G parted -s /dev/nvme2n1 mkpart primary 10G 20G parted -s /dev/nvme2n1 mkpart primary 20G 30G parted -s /dev/nvme2n1 mkpart primary 30G 40G parted -s /dev/nvme2n1 mkpart primary 40G 50G parted -s /dev/nvme2n1 mkpart primary 50G 60G parted -s /dev/nvme2n1 mkpart primary 60G 110G parted -s /dev/nvme2n1 mkpart primary 110G 160G parted -s /dev/nvme2n1 mkpart primary 160G 210G parted -s /dev/nvme2n1 mkpart primary 210G 260G parted -s /dev/nvme2n1 mkpart primary 260G 310G parted -s /dev/nvme2n1 mkpart primary 310G 360G parted -s /dev/nvme2n1 mkpart primary 360G 433G parted -s /dev/nvme2n1 mkpart primary 433G 506G parted -s /dev/nvme2n1 mkpart primary 506G 579G parted -s /dev/nvme2n1 mkpart primary 579G 652G parted -s /dev/nvme2n1 mkpart primary 652G 725G parted -s /dev/nvme2n1 mkpart primary 725G 800G ","date":"2021-07-01","objectID":"/how-to-let-a-new-server-join-hci-system/:0:5","tags":["pve","hci","ceph","bcache"],"title":"How to Let a New Server Join Hci System","uri":"/how-to-let-a-new-server-join-hci-system/"},{"categories":["pve"],"content":"6. list disk by-id # list sas disk by id ls -al | grep wwn lrwxrwxrwx 1 root root 9 Jul 1 05:49 wwn-0x5000c500943614ab -\u003e ../../sdl lrwxrwxrwx 1 root root 9 Jul 1 05:49 wwn-0x5000cca0801eb5c8 -\u003e ../../sdc lrwxrwxrwx 1 root root 9 Jul 1 05:49 wwn-0x5000cca080248ff8 -\u003e ../../sdh lrwxrwxrwx 1 root root 9 Jul 1 05:49 wwn-0x5000cca08024aca8 -\u003e ../../sdk lrwxrwxrwx 1 root root 9 Jul 1 05:49 wwn-0x5000cca08024f0d0 -\u003e ../../sdi lrwxrwxrwx 1 root root 9 Jul 1 05:49 wwn-0x5000cca080253734 -\u003e ../../sdj lrwxrwxrwx 1 root root 9 Jul 1 05:49 wwn-0x5000cca0802601cc -\u003e ../../sdf lrwxrwxrwx 1 root root 9 Jul 1 05:49 wwn-0x5000cca0802735ec -\u003e ../../sda lrwxrwxrwx 1 root root 9 Jul 1 05:49 wwn-0x5000cca0802747c8 -\u003e ../../sdd lrwxrwxrwx 1 root root 9 Jul 1 05:49 wwn-0x5000cca0802afad0 -\u003e ../../sdb lrwxrwxrwx 1 root root 9 Jul 1 05:49 wwn-0x5000cca0802ba6ac -\u003e ../../sdg lrwxrwxrwx 1 root root 9 Jul 1 05:49 wwn-0x5000cca080326bd0 -\u003e ../../sde #list nvme disk by uuid ls -al | grep nvme-MT lrwxrwxrwx 1 root root 13 Jul 1 05:49 nvme-MT0800KEXUU_CVFT73520058800MGN -\u003e ../../nvme1n1 lrwxrwxrwx 1 root root 15 Jul 1 06:07 nvme-MT0800KEXUU_CVFT73520058800MGN-part1 -\u003e ../../nvme1n1p1 lrwxrwxrwx 1 root root 16 Jul 1 06:08 nvme-MT0800KEXUU_CVFT73520058800MGN-part10 -\u003e ../../nvme1n1p10 lrwxrwxrwx 1 root root 16 Jul 1 06:08 nvme-MT0800KEXUU_CVFT73520058800MGN-part11 -\u003e ../../nvme1n1p11 lrwxrwxrwx 1 root root 16 Jul 1 06:08 nvme-MT0800KEXUU_CVFT73520058800MGN-part12 -\u003e ../../nvme1n1p12 lrwxrwxrwx 1 root root 16 Jul 1 05:49 nvme-MT0800KEXUU_CVFT73520058800MGN-part13 -\u003e ../../nvme1n1p13 lrwxrwxrwx 1 root root 16 Jul 1 05:49 nvme-MT0800KEXUU_CVFT73520058800MGN-part14 -\u003e ../../nvme1n1p14 lrwxrwxrwx 1 root root 16 Jul 1 05:49 nvme-MT0800KEXUU_CVFT73520058800MGN-part15 -\u003e ../../nvme1n1p15 lrwxrwxrwx 1 root root 16 Jul 1 05:49 nvme-MT0800KEXUU_CVFT73520058800MGN-part16 -\u003e ../../nvme1n1p16 lrwxrwxrwx 1 root root 16 Jul 1 05:49 nvme-MT0800KEXUU_CVFT73520058800MGN-part17 -\u003e ../../nvme1n1p17 lrwxrwxrwx 1 root root 16 Jul 1 05:49 nvme-MT0800KEXUU_CVFT73520058800MGN-part18 -\u003e ../../nvme1n1p18 lrwxrwxrwx 1 root root 15 Jul 1 06:07 nvme-MT0800KEXUU_CVFT73520058800MGN-part2 -\u003e ../../nvme1n1p2 lrwxrwxrwx 1 root root 15 Jul 1 06:08 nvme-MT0800KEXUU_CVFT73520058800MGN-part3 -\u003e ../../nvme1n1p3 lrwxrwxrwx 1 root root 15 Jul 1 06:08 nvme-MT0800KEXUU_CVFT73520058800MGN-part4 -\u003e ../../nvme1n1p4 lrwxrwxrwx 1 root root 15 Jul 1 06:08 nvme-MT0800KEXUU_CVFT73520058800MGN-part5 -\u003e ../../nvme1n1p5 lrwxrwxrwx 1 root root 15 Jul 1 06:08 nvme-MT0800KEXUU_CVFT73520058800MGN-part6 -\u003e ../../nvme1n1p6 lrwxrwxrwx 1 root root 15 Jul 1 06:07 nvme-MT0800KEXUU_CVFT73520058800MGN-part7 -\u003e ../../nvme1n1p7 lrwxrwxrwx 1 root root 15 Jul 1 06:07 nvme-MT0800KEXUU_CVFT73520058800MGN-part8 -\u003e ../../nvme1n1p8 lrwxrwxrwx 1 root root 15 Jul 1 06:08 nvme-MT0800KEXUU_CVFT73520058800MGN-part9 -\u003e ../../nvme1n1p9 lrwxrwxrwx 1 root root 13 Jul 1 05:49 nvme-MT0800KEXUU_CVFT7352005S800MGN -\u003e ../../nvme2n1 lrwxrwxrwx 1 root root 15 Jul 1 06:08 nvme-MT0800KEXUU_CVFT7352005S800MGN-part1 -\u003e ../../nvme2n1p1 lrwxrwxrwx 1 root root 16 Jul 1 06:09 nvme-MT0800KEXUU_CVFT7352005S800MGN-part10 -\u003e ../../nvme2n1p10 lrwxrwxrwx 1 root root 16 Jul 1 06:09 nvme-MT0800KEXUU_CVFT7352005S800MGN-part11 -\u003e ../../nvme2n1p11 lrwxrwxrwx 1 root root 16 Jul 1 06:10 nvme-MT0800KEXUU_CVFT7352005S800MGN-part12 -\u003e ../../nvme2n1p12 lrwxrwxrwx 1 root root 16 Jul 1 05:49 nvme-MT0800KEXUU_CVFT7352005S800MGN-part13 -\u003e ../../nvme2n1p13 lrwxrwxrwx 1 root root 16 Jul 1 05:49 nvme-MT0800KEXUU_CVFT7352005S800MGN-part14 -\u003e ../../nvme2n1p14 lrwxrwxrwx 1 root root 16 Jul 1 05:49 nvme-MT0800KEXUU_CVFT7352005S800MGN-part15 -\u003e ../../nvme2n1p15 lrwxrwxrwx 1 root root 16 Jul 1 05:49 nvme-MT0800KEXUU_CVFT7352005S800MGN-part16 -\u003e ../../nvme2n1p16 lrwxrwxrwx 1 root root 16 Jul 1 05:49 nvme-MT0800KEXUU_CVFT7352005S800MGN-part17 -\u003e ../../nvme2n1p17 lrwxrwxrwx 1 root root 16 Jul 1 05:49 nvme-MT0800KEXUU_CVFT7352005S800MGN-part18 -\u003e ../../nvme2n1p18 lrwxrwxrwx 1 root root 15 Jul","date":"2021-07-01","objectID":"/how-to-let-a-new-server-join-hci-system/:0:6","tags":["pve","hci","ceph","bcache"],"title":"How to Let a New Server Join Hci System","uri":"/how-to-let-a-new-server-join-hci-system/"},{"categories":["pve"],"content":"7. Make Bcache disk make-bcache -C /dev/disk/by-id/nvme-MT0800KEXUU_CVFT73520058800MGN-part13 -B /dev/disk/by-id/wwn-0x5000cca0802735ec --writeback make-bcache -C /dev/disk/by-id/nvme-MT0800KEXUU_CVFT73520058800MGN-part14 -B /dev/disk/by-id/wwn-0x5000cca0802afad0 --writeback make-bcache -C /dev/disk/by-id/nvme-MT0800KEXUU_CVFT73520058800MGN-part15 -B /dev/disk/by-id/wwn-0x5000cca0801eb5c8 --writeback make-bcache -C /dev/disk/by-id/nvme-MT0800KEXUU_CVFT73520058800MGN-part16 -B /dev/disk/by-id/wwn-0x5000cca0802747c8 --writeback make-bcache -C /dev/disk/by-id/nvme-MT0800KEXUU_CVFT73520058800MGN-part17 -B /dev/disk/by-id/wwn-0x5000cca080326bd0 --writeback make-bcache -C /dev/disk/by-id/nvme-MT0800KEXUU_CVFT73520058800MGN-part18 -B /dev/disk/by-id/wwn-0x5000cca0802601cc --writeback make-bcache -C /dev/disk/by-id/nvme-MT0800KEXUU_CVFT7352005S800MGN-part13 -B /dev/disk/by-id/wwn-0x5000cca0802ba6ac --writeback make-bcache -C /dev/disk/by-id/nvme-MT0800KEXUU_CVFT7352005S800MGN-part14 -B /dev/disk/by-id/wwn-0x5000cca080248ff8 --writeback make-bcache -C /dev/disk/by-id/nvme-MT0800KEXUU_CVFT7352005S800MGN-part15 -B /dev/disk/by-id/wwn-0x5000cca08024f0d0 --writeback make-bcache -C /dev/disk/by-id/nvme-MT0800KEXUU_CVFT7352005S800MGN-part16 -B /dev/disk/by-id/wwn-0x5000cca080253734 --writeback make-bcache -C /dev/disk/by-id/nvme-MT0800KEXUU_CVFT7352005S800MGN-part17 -B /dev/disk/by-id/wwn-0x5000cca08024aca8 --writeback make-bcache -C /dev/disk/by-id/nvme-MT0800KEXUU_CVFT7352005S800MGN-part18 -B /dev/disk/by-id/wwn-0x5000c500943614ab --writeback ","date":"2021-07-01","objectID":"/how-to-let-a-new-server-join-hci-system/:0:7","tags":["pve","hci","ceph","bcache"],"title":"How to Let a New Server Join Hci System","uri":"/how-to-let-a-new-server-join-hci-system/"},{"categories":["pve"],"content":"8. Reboot to make bcache works reboot now ","date":"2021-07-01","objectID":"/how-to-let-a-new-server-join-hci-system/:0:8","tags":["pve","hci","ceph","bcache"],"title":"How to Let a New Server Join Hci System","uri":"/how-to-let-a-new-server-join-hci-system/"},{"categories":["pve"],"content":"9. create OSD ceph-volume lvm create --bluestore --data /dev/bcache0 --block.wal /dev/nvme1n1p1 --block.db /dev/nvme1n1p7 ceph-volume lvm create --bluestore --data /dev/bcache1 --block.wal /dev/nvme1n1p2 --block.db /dev/nvme1n1p8 ceph-volume lvm create --bluestore --data /dev/bcache2 --block.wal /dev/nvme1n1p3 --block.db /dev/nvme1n1p9 ceph-volume lvm create --bluestore --data /dev/bcache3 --block.wal /dev/nvme1n1p4 --block.db /dev/nvme1n1p10 ceph-volume lvm create --bluestore --data /dev/bcache4 --block.wal /dev/nvme1n1p5 --block.db /dev/nvme1n1p11 ceph-volume lvm create --bluestore --data /dev/bcache5 --block.wal /dev/nvme1n1p6 --block.db /dev/nvme1n1p12 ceph-volume lvm create --bluestore --data /dev/bcache6 --block.wal /dev/nvme2n1p1 --block.db /dev/nvme2n1p7 ceph-volume lvm create --bluestore --data /dev/bcache7 --block.wal /dev/nvme2n1p2 --block.db /dev/nvme2n1p8 ceph-volume lvm create --bluestore --data /dev/bcache8 --block.wal /dev/nvme2n1p3 --block.db /dev/nvme2n1p9 ceph-volume lvm create --bluestore --data /dev/bcache9 --block.wal /dev/nvme2n1p4 --block.db /dev/nvme2n1p10 ceph-volume lvm create --bluestore --data /dev/bcache10 --block.wal /dev/nvme2n1p5 --block.db /dev/nvme2n1p11 ceph-volume lvm create --bluestore --data /dev/bcache11 --block.wal /dev/nvme2n1p6 --block.db /dev/nvme2n1p12 ","date":"2021-07-01","objectID":"/how-to-let-a-new-server-join-hci-system/:0:9","tags":["pve","hci","ceph","bcache"],"title":"How to Let a New Server Join Hci System","uri":"/how-to-let-a-new-server-join-hci-system/"},{"categories":["network"],"content":"How to configure cisco catalyst switch ","date":"2021-05-11","objectID":"/how-to-clear-ssh-session-on-ios/:0:0","tags":["ios","cisco","catalyst","network"],"title":"How to configure cisco catalyst switch","uri":"/how-to-clear-ssh-session-on-ios/"},{"categories":["network"],"content":"Clean session #Show current login users show users # terminal a user clear line vty 0 ","date":"2021-05-11","objectID":"/how-to-clear-ssh-session-on-ios/:1:0","tags":["ios","cisco","catalyst","network"],"title":"How to configure cisco catalyst switch","uri":"/how-to-clear-ssh-session-on-ios/"},{"categories":["network"],"content":"Set Session timeout exec timeout command is sused to specify the timeout for exec sessions[telnet/ssh] whereas session timeout command specifies the idle timeout period for all the sessions. config t line vty 0 15 exec-timeout 10 session-timeout 10 #Check configure sh run | be line vty ","date":"2021-05-11","objectID":"/how-to-clear-ssh-session-on-ios/:2:0","tags":["ios","cisco","catalyst","network"],"title":"How to configure cisco catalyst switch","uri":"/how-to-clear-ssh-session-on-ios/"},{"categories":["network"],"content":"How to fix %Error opening tftp://255.255.255.255/network-confg (Timed out) no service config ","date":"2021-05-11","objectID":"/how-to-clear-ssh-session-on-ios/:3:0","tags":["ios","cisco","catalyst","network"],"title":"How to configure cisco catalyst switch","uri":"/how-to-clear-ssh-session-on-ios/"},{"categories":["network"],"content":"Set ip address and default gateway ip default-gateway 192.168.0.1 interface vlan 1 ip address 192.168.0.2 255.255.255.0 ","date":"2021-05-11","objectID":"/how-to-clear-ssh-session-on-ios/:4:0","tags":["ios","cisco","catalyst","network"],"title":"How to configure cisco catalyst switch","uri":"/how-to-clear-ssh-session-on-ios/"},{"categories":["network"],"content":"Set hostname and domain-name config t hostname myswitch ip domain-name mydomain.com ","date":"2021-05-11","objectID":"/how-to-clear-ssh-session-on-ios/:5:0","tags":["ios","cisco","catalyst","network"],"title":"How to configure cisco catalyst switch","uri":"/how-to-clear-ssh-session-on-ios/"},{"categories":["network"],"content":"Enable ssh login ","date":"2021-05-11","objectID":"/how-to-clear-ssh-session-on-ios/:6:0","tags":["ios","cisco","catalyst","network"],"title":"How to configure cisco catalyst switch","uri":"/how-to-clear-ssh-session-on-ios/"},{"categories":["network"],"content":"Generate the RSA keys myswitch(config)# crypto key generate rsa The name for the keys will be: myswitch.thegeekstuff.com Choose the size of the key modulus in the range of 360 to 2048 for your General Purpose Keys. Choosing a key modulus greater than 512 may take a few minutes. How many bits in the modulus [512]: 1024 % Generating 1024 bit RSA keys, keys will be non-exportable...[OK] ","date":"2021-05-11","objectID":"/how-to-clear-ssh-session-on-ios/:6:1","tags":["ios","cisco","catalyst","network"],"title":"How to configure cisco catalyst switch","uri":"/how-to-clear-ssh-session-on-ios/"},{"categories":["network"],"content":"Setup the line vty configurations line vty 0 4 session-timeout 10 transport input ssh login local password 7 exit ","date":"2021-05-11","objectID":"/how-to-clear-ssh-session-on-ios/:6:2","tags":["ios","cisco","catalyst","network"],"title":"How to configure cisco catalyst switch","uri":"/how-to-clear-ssh-session-on-ios/"},{"categories":["network"],"content":"Set the console line line console 0 logging synchronus login local ","date":"2021-05-11","objectID":"/how-to-clear-ssh-session-on-ios/:6:3","tags":["ios","cisco","catalyst","network"],"title":"How to configure cisco catalyst switch","uri":"/how-to-clear-ssh-session-on-ios/"},{"categories":["network"],"content":"Create the username password config t username $USERNAME password $MYPASSWORD enable secret $MYENABLEPASSWORD ","date":"2021-05-11","objectID":"/how-to-clear-ssh-session-on-ios/:6:4","tags":["ios","cisco","catalyst","network"],"title":"How to configure cisco catalyst switch","uri":"/how-to-clear-ssh-session-on-ios/"},{"categories":["network"],"content":"enable service password-encryption service password-encryption ","date":"2021-05-11","objectID":"/how-to-clear-ssh-session-on-ios/:6:5","tags":["ios","cisco","catalyst","network"],"title":"How to configure cisco catalyst switch","uri":"/how-to-clear-ssh-session-on-ios/"},{"categories":["network"],"content":"Verify SSH access show ip ssh ","date":"2021-05-11","objectID":"/how-to-clear-ssh-session-on-ios/:6:6","tags":["ios","cisco","catalyst","network"],"title":"How to configure cisco catalyst switch","uri":"/how-to-clear-ssh-session-on-ios/"},{"categories":["network"],"content":"Configure ","date":"2021-05-11","objectID":"/how-to-clear-ssh-session-on-ios/:7:0","tags":["ios","cisco","catalyst","network"],"title":"How to configure cisco catalyst switch","uri":"/how-to-clear-ssh-session-on-ios/"},{"categories":["network"],"content":"port-channel interface Port-channel1 description testing switchport trunk allowed vlan 4-12 switchport trunk encapsulation dot1q switchport mode trunk # network port settings interface GigabitEthernet1/0/27 description lacp-wifi-network switchport trunk encapsulation dot1q switchport mode trunk channel-protocol lacp channel-group 3 mode active ! interface GigabitEthernet1/0/28 description lacp-wifi-network switchport trunk encapsulation dot1q switchport mode trunk channel-protocol lacp channel-group 3 mode active ","date":"2021-05-11","objectID":"/how-to-clear-ssh-session-on-ios/:7:1","tags":["ios","cisco","catalyst","network"],"title":"How to configure cisco catalyst switch","uri":"/how-to-clear-ssh-session-on-ios/"},{"categories":["network"],"content":"Access mode interface GigabitEthernet1/0/29 switchport access vlan 60 switchport mode access ","date":"2021-05-11","objectID":"/how-to-clear-ssh-session-on-ios/:7:2","tags":["ios","cisco","catalyst","network"],"title":"How to configure cisco catalyst switch","uri":"/how-to-clear-ssh-session-on-ios/"},{"categories":["network"],"content":"SNMP snmp-server community public RO ","date":"2021-05-11","objectID":"/how-to-clear-ssh-session-on-ios/:7:3","tags":["ios","cisco","catalyst","network"],"title":"How to configure cisco catalyst switch","uri":"/how-to-clear-ssh-session-on-ios/"},{"categories":["network"],"content":"NTP ntp source vlan 20 ntp server 10.32.0.2 source vlan 20 ","date":"2021-05-11","objectID":"/how-to-clear-ssh-session-on-ios/:7:4","tags":["ios","cisco","catalyst","network"],"title":"How to configure cisco catalyst switch","uri":"/how-to-clear-ssh-session-on-ios/"},{"categories":["network"],"content":"PBR # Enable PBR on cisco 3750x sdm prefer routing #save configuration write #Reload switch to let it works. reload #check sdm status show sdm prefer # Define access list ip access-list extended wifi permit ip 10.32.200.0 0.0.0.255 any deny ip any any #define reout-map and set routing policy route-map wifi-2rd-gw permit 10 match ip address wifi set ip next-hop 192.168.99.2 #select a vlan to apply PBR interface Vlan30 ip policy route-map wifi-2rd-gw ","date":"2021-05-11","objectID":"/how-to-clear-ssh-session-on-ios/:7:5","tags":["ios","cisco","catalyst","network"],"title":"How to configure cisco catalyst switch","uri":"/how-to-clear-ssh-session-on-ios/"},{"categories":["network"],"content":"Reference: %Error opening tftp://255.255.255.255/network-confg (Timed out) to increase SSH session timeout How to Enable SSH on Cisco Switch, Router and ASA ","date":"2021-05-11","objectID":"/how-to-clear-ssh-session-on-ios/:8:0","tags":["ios","cisco","catalyst","network"],"title":"How to configure cisco catalyst switch","uri":"/how-to-clear-ssh-session-on-ios/"},{"categories":["devops"],"content":"How to Install K8S [TOC] ","date":"2021-04-08","objectID":"/how-to-install-k8s1.18-in-ha-mode/:0:0","tags":["k8s","devops","docker"],"title":"How to Install K8S","uri":"/how-to-install-k8s1.18-in-ha-mode/"},{"categories":["devops"],"content":"Prerequest 下载所需的yaml文件 下载地址:https://github.com/luckylucky421/kubernetes1.17.3/tree/master 2. 初始化k8s集群需要的镜像 下载链接: https://pan.baidu.com/s/1k1heJy8lLnDk2JEFyRyJdA 提取码: udkj ","date":"2021-04-08","objectID":"/how-to-install-k8s1.18-in-ha-mode/:1:0","tags":["k8s","devops","docker"],"title":"How to Install K8S","uri":"/how-to-install-k8s1.18-in-ha-mode/"},{"categories":["devops"],"content":"Prepare 5 centos Set timezone on centos timedatectl set-timezone Asia/Chongqing Set hostname hostnamectl set-hostname xak8smaster01 Modifiy yum sourcelist mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup curl -fo /etc/yum.repos.d/CentOS-Base.repo -L http://mirrors.aliyun.com/repo/Centos-7.repo yum makecache fast cat \u003c\u003cEOF \u003e /etc/yum.repos.d/kubernetes.repo [kubernetes] name=Kubernetes baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64 enabled=1 gpgcheck=0 EOF yum clean all yum makecache fast yum -y update yum -y install yum-utils device-mapper-persistent-data lvm2 yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo yum clean all yum makecache fast yum -y install wget net-tools nfs-utils lrzsz gcc gcc-c++ make cmake libxml2-devel openssl-devel curl curl-devel unzip sudo ntp libaio-devel wget vim ncurses-devel autoconf automake zlib-devel python-devel epel-release openssh-server socat ipvsadm conntrack ntpdate systemctl stop firewalld \u0026\u0026 systemctl disable firewalld yum install iptables-services -y service iptables stop \u0026\u0026 systemctl disable iptables ntpdate cn.pool.ntp.org #crontab -e #* */1 * * * /usr/sbin/ntpdate cn.pool.ntp.org crontab -l | { cat; echo \"* */1 * * * /usr/sbin/ntpdate cn.pool.ntp.org\"; } | crontab - service crond restart sed -i 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/sysconfig/selinux sed -i 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/selinux/config reboot -r swapoff -a sed -i 's/.*swap.*/#\u0026/' /etc/fstab cat \u003c\u003cEOF \u003e /etc/sysctl.d/k8s.conf net.bridge.bridge-nf-call-ip6tables = 1 net.bridge.bridge-nf-call-iptables = 1 EOF sysctl --system cat \u003c\u003c EOF \u003e\u003e /etc/hosts 10.32.0.91 xak8smaster01 10.32.0.92 xak8smaster02 10.32.0.93 xak8smaster03 10.32.0.94 xak8smaster04 10.32.0.95 xak8snode01 10.32.0.96 xak8snode02 EOF ssh-keygen -t rsa sed -i 's/#PermitRootLogin\\ yes/PermitRootLogin\\ yes/g' /etc/ssh/sshd_config sed -i 's/PasswordAuthentication\\ no/PasswordAuthentication\\ yes/g' /etc/ssh/sshd_config cat /etc/ssh/sshd_config | grep PermitRootLogin cat /etc/ssh/sshd_config | grep PasswordAuthentication systemctl daemon-reload systemctl restart sshd ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8smaster02 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8smaster03 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8smaster04 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8snode01 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8snode02 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8smaster01 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8smaster03 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8smaster04 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8snode01 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8snode02 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8smaster01 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8smaster02 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8smaster04 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8snode01 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8snode02 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8smaster01 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8smaster02 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8smaster03 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8snode01 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8snode02 cat \u003c\u003c EOF \u003e\u003e 1.sh ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8smaster01 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8smaster02 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8smaster03 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8smaster04 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8snode02 EOF sh 1.sh cat \u003c\u003c EOF \u003e\u003e 1.sh ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8smaster01 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8smaster02 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8smaster03 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8smaster04 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xak8snode01 EOF sh 1.sh yum list docker-ce --showduplicates |sort -r cat \u003e /etc/docker/daemon.json \u003c\u003cEOF { \"exec-opts\": [\"native.cgroupdriver=systemd\"], \"log-driver\": \"json-file\", \"log-opts\": { \"max-size\": \"100m\" }, \"storage-drive","date":"2021-04-08","objectID":"/how-to-install-k8s1.18-in-ha-mode/:2:0","tags":["k8s","devops","docker"],"title":"How to Install K8S","uri":"/how-to-install-k8s1.18-in-ha-mode/"},{"categories":["programming"],"content":"#Learning Golang notebook –001 ","date":"2021-04-07","objectID":"/learning-golang-01/:0:0","tags":["go","golang","programming","dev"],"title":"Learning Golang 01","uri":"/learning-golang-01/"},{"categories":["programming"],"content":"How to install golang ","date":"2021-04-07","objectID":"/learning-golang-01/:1:0","tags":["go","golang","programming","dev"],"title":"Learning Golang 01","uri":"/learning-golang-01/"},{"categories":["programming"],"content":"Set go workspace Go still expects there to be a single workspace for third-party Go tools installe via go install.By default,this workspace is located in $HOME/go. $HOME/go/src $HOME/go/bin $HOME Install golang with homebrew brew install go 2 set GOPATH on unix like os. cat \u003c\u003c EOF \u003e\u003e ~/.zshrc export GOPATH=$HOME/go export PATH=$PATH:%GOPATH/bin set GOPATH on window setx GOPATH $USERPROFILE%\\go setx path \"%PATH%;%USERPROFILE%\\bin\" ","date":"2021-04-07","objectID":"/learning-golang-01/:1:1","tags":["go","golang","programming","dev"],"title":"Learning Golang 01","uri":"/learning-golang-01/"},{"categories":["programming"],"content":"GO command go run go build ","date":"2021-04-07","objectID":"/learning-golang-01/:2:0","tags":["go","golang","programming","dev"],"title":"Learning Golang 01","uri":"/learning-golang-01/"},{"categories":["programming"],"content":"hello world # hello.go pachage main import \"fmt\" func main(){ fmt.Println(\"Hello, world!\") } #Just run go code,without build binary in currently directory path.but build it in temporary direcory. go run hello.go #Build binary without run go build hello.go # Build specific binary name go build -o hellworld hello.go ","date":"2021-04-07","objectID":"/learning-golang-01/:3:0","tags":["go","golang","programming","dev"],"title":"Learning Golang 01","uri":"/learning-golang-01/"},{"categories":["programming"],"content":"Install Third-Party Go Tools Install 3rd go tools go install github.com/rakyll/hey@latest Upgrade 3rd go tools by run the install command again go install github.com/rakyll/hey@latest # Install goimports go install golang.org/x/tools/cmd/goimports@latest #go: downloading golang.org/x/tools v0.1.0 #go: downloading golang.org/x/sys v0.0.0-20210119212857-b64e53b001e4 #go: downloading golang.org/x/mod v0.3.0 #go: downloading golang.org/x/xerrors v0.0.0-20200804184101-5ec99f83aff1 ","date":"2021-04-07","objectID":"/learning-golang-01/:4:0","tags":["go","golang","programming","dev"],"title":"Learning Golang 01","uri":"/learning-golang-01/"},{"categories":["programming"],"content":"goimport goimports -l -w . # The `-l` flag tells `goimports` to print the files with incorrect formatting to the console # The `-w` flag tells `goimports` to modify the files in-place. # The . specifies the files to be scanned: everything in the current directory and all of its sub-directories. ","date":"2021-04-07","objectID":"/learning-golang-01/:5:0","tags":["go","golang","programming","dev"],"title":"Learning Golang 01","uri":"/learning-golang-01/"},{"categories":["programming"],"content":"golint Install golint go install golang.org/x/lint/golint@latest Run it # Run golint over your entire project golint ./... ","date":"2021-04-07","objectID":"/learning-golang-01/:6:0","tags":["go","golang","programming","dev"],"title":"Learning Golang 01","uri":"/learning-golang-01/"},{"categories":["devops"],"content":"How to init Local project and push it to git server Create local project git init Create a repositories on git server https://mygitserver/my/myproject.git Add remote origin git remote add origin https://mygitserver/my/myproject.git Pull remote master branche and merge it with local master branche. git pull origin master:master Push local branch to remote git push -u origin master Add local project and push it on git server git add -A git commit -m \"Inistal at first\" git push --set-upstream origin master ","date":"2021-04-01","objectID":"/how-to-init-local-project-and-push-to-git-server/:0:0","tags":["devops","git"],"title":"How to Init Local Project and Push to Git Server","uri":"/how-to-init-local-project-and-push-to-git-server/"},{"categories":["devops"],"content":"How to Install Gitea with Docker-Compose cat \u003c\u003c EOF \u003e\u003e docker-compose.yaml version: \"3\" networks: gitea: external: false services: server: image: gitea/gitea:1.13.6 container_name: gitea environment: - USER_UID=1000 - USER_GID=1000 - DB_TYPE=mysql - DB_HOST=db:3306 - DB_NAME=gitea - DB_USER=gitea - DB_PASSWD=gitea restart: always networks: - gitea volumes: - ./gitea:/data - /etc/timezone:/etc/timezone:ro - /etc/localtime:/etc/localtime:ro ports: - \"3000:3000\" - \"222:22\" depends_on: - db db: image: mysql:5.7 restart: always environment: - MYSQL_ROOT_PASSWORD=gitea - MYSQL_USER=gitea - MYSQL_PASSWORD=gitea - MYSQL_DATABASE=gitea networks: - gitea volumes: - ./mysql:/var/lib/mysql EOF ","date":"2021-03-31","objectID":"/how-to-install-gitea-with-docker-compose/:0:0","tags":["docker","docker-compose","git","gitea","debian","debian 10"],"title":"How to Install Gitea With Docker-Compose","uri":"/how-to-install-gitea-with-docker-compose/"},{"categories":["devops"],"content":"Run it docker-compose pull docker-compose up -d ","date":"2021-03-31","objectID":"/how-to-install-gitea-with-docker-compose/:1:0","tags":["docker","docker-compose","git","gitea","debian","debian 10"],"title":"How to Install Gitea With Docker-Compose","uri":"/how-to-install-gitea-with-docker-compose/"},{"categories":["devops"],"content":"Setup http://xa-gitea:3000 ","date":"2021-03-31","objectID":"/how-to-install-gitea-with-docker-compose/:2:0","tags":["docker","docker-compose","git","gitea","debian","debian 10"],"title":"How to Install Gitea With Docker-Compose","uri":"/how-to-install-gitea-with-docker-compose/"},{"categories":["pve"],"content":"How to rename VMID on PVE VMID=121 \u0026\u0026 \\ NEW_VMID=1001 \u0026\u0026 \\ POOL_NAME=tank \u0026\u0026 \\ qm unlock $VMID \u0026\u0026 \\ qm stop $VMID \u0026\u0026 \\ sed -i \"s/$VMID/$NEW_VMID/g\" /etc/pve/qemu-server/$VMID.conf \u0026\u0026 \\ mv /etc/pve/qemu-server/$VMID.conf /etc/pve/qemu-server/$NEW_VMID.conf \u0026\u0026 \\ rbd --pool $POOL_NAME rename vm-$VMID-disk-0 vm-$NEW_VMID-disk-0 \u0026\u0026\\ qm start $NEW_VMID ","date":"2021-03-26","objectID":"/how-to-rename-vm-id-on-pve/:0:0","tags":["pve","vmid","shell","bash","linux"],"title":"How to Rename Vm Id on Pve","uri":"/how-to-rename-vm-id-on-pve/"},{"categories":["linux"],"content":"How to setup open cas on pve 6.x ","date":"2021-03-13","objectID":"/how-to-setup-opencase-on-pve6.x/:0:0","tags":["pve","opencase","ceph"],"title":"How to Setup Opencase on Pve6","uri":"/how-to-setup-opencase-on-pve6.x/"},{"categories":["linux"],"content":"Install prepare software apt update \u0026\u0026 apt -y dist-upgrade apt install -y make gcc build-essential apt install -y pve-kernel-$(uname -r) apt install -y pve-headers-$(uname -r) OPENCAS_VERSION=20.12.2.0444 OPENCAS_SOFTWARE=open-cas-linux-$OPENCAS_VERSION.release wget https://github.com/Open-CAS/open-cas-linux/releases/download/v20.12.2/$OPENCAS_SOFTWARE.tar.gz tar -zxvf $OPENCAS_SOFTWARE.tar.gz # compile with DKMS apt update \u0026\u0026 apt install -y dkms cp -r $OPENCAS_SOFTWARE /usr/src/ cat \u003c\u003c EOF \u003e\u003e/usr/src/$OPENCAS_SOFTWARE/dkms.conf PACKAGE_NAME=\"open-cas-linux\" #PACKAGE_VERSION=\"20.12.2.0444\" PACKAGE_VERSION=\"$OPENCAS_VERSION\" PRE_BUILD=\"configure\" AUTOINSTALL=\"yes\" CLEAN=\"make clean\" MAKE[0]=\"'make'\" BUILT_MODULE_NAME[0]=\"cas_disk\" BUILT_MODULE_LOCATION[0]=\"modules/cas_disk\" DEST_MODULE_LOCATION[0]=\"/extra\" BUILT_MODULE_NAME[1]=\"cas_cache\" BUILT_MODULE_LOCATION[1]=\"modules/cas_cache\" DEST_MODULE_LOCATION[1]=\"/extra\" EOF OPENCAS_VERSION=20.12.2.0444 OPENCAS_SOFTWARE=open-cas-linux-$OPENCAS_VERSION.release dkms add -m open-cas-linux -v $OPENCAS_VERSION.release dkms build -m open-cas-linux -v $OPENCAS_VERSION.release dkms install -m open-cas-linux -v $OPENCAS_VERSION.release ","date":"2021-03-13","objectID":"/how-to-setup-opencase-on-pve6.x/:1:0","tags":["pve","opencase","ceph"],"title":"How to Setup Opencase on Pve6","uri":"/how-to-setup-opencase-on-pve6.x/"},{"categories":["linux"],"content":"Manually install cd $OPENCAS_SOFTWARE ./configure make \u0026\u0026 make install apt update \u0026\u0026 apt -y dist-upgrade apt install -y make gcc build-essential apt install -y linux-kernel-$(uname -r) apt install -y linux-headers-$(uname -r) apt install -y libelf-dev wget https://github.com/Open-CAS/open-cas-linux/releases/download/v20.12.2/open-cas-linux-20.12.2.0444.release.tar.gz tar -zxvf open-cas-linux-20.12.2.0444.release.tar.gz cd open-cas-linux-20.12.2.0444.release/ ./configure make \u0026\u0026 make install ","date":"2021-03-13","objectID":"/how-to-setup-opencase-on-pve6.x/:2:0","tags":["pve","opencase","ceph"],"title":"How to Setup Opencase on Pve6","uri":"/how-to-setup-opencase-on-pve6.x/"},{"categories":["pve"],"content":"How to Install PBS on Debian 10 export LANGUAGE=en_US.UTF-8 export LANG=en_US.UTF-8 export LC_ALL=en_US.UTF-8 #locale-gen en_US.UTF-8 cat \u003e\u003e /etc/environment \u003c\u003cEOF LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8 EOF cat \u003c\u003c EOF \u003e /etc/apt/sources.list deb https://mirrors.ustc.edu.cn/debian/ buster main contrib non-free deb-src https://mirrors.ustc.edu.cn/debian/ buster main contrib non-free deb https://mirrors.ustc.edu.cn/debian/ buster-updates main contrib non-free deb-src https://mirrors.ustc.edu.cn/debian/ buster-updates main contrib non-free deb https://mirrors.ustc.edu.cn/debian-security/ buster/updates main contrib non-free deb-src https://mirrors.ustc.edu.cn/debian-security/ buster/updates main contrib non-free EOF apt update \u0026\u0026 apt dist-upgrade -y apt install -y net-tools dnsutils vim firmware-linux-nonfree CODENAME=`cat /etc/os-release |grep CODENAME |cut -f 2 -d \"=\"` echo \"deb https://mirrors.ustc.edu.cn/proxmox/debian/pbs $CODENAMEpbs-no-subscription\" \u003e /etc/apt/sources.list.d/pbs-no-subscription.list wget https://mirrors.ustc.edu.cn/proxmox/debian/proxmox-ve-release-6.x.gpg -O /etc/apt/trusted.gpg.d/proxmox-ve-release-6.x.gpg apt update \u0026\u0026 apt full-upgrade -y apt install -y proxmox-backup-server rm -rf /etc/apt/sources.list.d/pbs-enterprise.list rm -rf /etc/apt/sources.list.d/ceph.list apt update \u0026\u0026 apt -y dist-ugprade ","date":"2021-03-11","objectID":"/how-to-install-pbs-on-debian10/:0:0","tags":["pve","pbs","debian","debian10"],"title":"How to Install Pbs on Debian 10","uri":"/how-to-install-pbs-on-debian10/"},{"categories":["linux"],"content":"How to operate becache Recently I just try to add bcache with zfs and ceph. So I just wirte down it. ","date":"2021-03-09","objectID":"/bcache/:0:0","tags":["bcache","pve","hci","debian"],"title":"Bcache","uri":"/bcache/"},{"categories":["linux"],"content":"Install bcache-tools Since bcache implement in Linux kernel. So it will default enabled. We just need to install bcache-tools to operate bcache. apt install -y bcache-tools ","date":"2021-03-09","objectID":"/bcache/:1:0","tags":["bcache","pve","hci","debian"],"title":"Bcache","uri":"/bcache/"},{"categories":["linux"],"content":"Configure bcache # make a cache disk for bcache .It must be a ssd disk. make-bcache -C /dev/nvme1n1 # make a disk as backend disk.It must be a slow sata/sas disk. make-bcache -B /dev/sda #if you have a lot of disks like me.your can add backend disk as this. make-bcache -B /dev/sd{a..f} ###Check bcache status lsblk ","date":"2021-03-09","objectID":"/bcache/:2:0","tags":["bcache","pve","hci","debian"],"title":"Bcache","uri":"/bcache/"},{"categories":["linux"],"content":"Add bcache manually #show `cset.uuid root@xa-autotest-hci01:~# bcache-super-show /dev/sda sb.magic ok sb.first_sector 8 [match] sb.csum ED8FD98E20A2E91E [match] sb.version 1 [backing device] dev.label (empty) dev.uuid e7b350fe-3496-47e2-a276-5faa5637f8a5 dev.sectors_per_block 1 dev.sectors_per_bucket 1024 dev.data.first_sector 16 dev.data.cache_mode 1 [writeback] dev.data.cache_state 1 [clean] cset.uuid d3fcd781-a10a-453a-96dd-6eba13abfc5b ####Add cache disk echo \"d3fcd781-a10a-453a-96dd-6eba13abfc5b\" \u003e /sys/block/bcache0/bcache/attach if you have a lot of disk, you can add it with for loop. for i in range{0..5}; do `echo \"d3fcd781-a10a-453a-96dd-6eba13abfc5b\" \u003e /sys/block/bcache$(expr $i)/bcache/attach`; done Delete cache disk if you want to delete bcache disk echo \"d3fcd781-a10a-453a-96dd-6eba13abfc5b\" \u003e /sys/block/bcache0/bcache/detach # delete a lot disk for i in range{0..5}; do `echo \"d3fcd781-a10a-453a-96dd-6eba13abfc5b\" \u003e /sys/block/bcache$(expr $i)/bcache/detach`; done unrigister cache disk umount /dev/bcach0 echo 1 \u003e /sys/block/bcache0/bcache/stop If you onle have one nvme disk and you can add them all in one make-bcache -C /dev/nvme1n1 -B /dev/sd{a..f} –writeback ## Change bcache write policy ```bash make-bcache -B/dev/ ","date":"2021-03-09","objectID":"/bcache/:2:1","tags":["bcache","pve","hci","debian"],"title":"Bcache","uri":"/bcache/"},{"categories":["linux"],"content":"Manually resigter udev disk echo /dev/sdb \u003e /sys/fs/bcache/register ","date":"2021-03-09","objectID":"/bcache/:3:0","tags":["bcache","pve","hci","debian"],"title":"Bcache","uri":"/bcache/"},{"categories":["linux"],"content":"Change bcache write mode When you run command like make-bcache -C /dev/nvme1n1 -B /dev/sda it will be set write through mode. If you have UPS and you can change it to writeback mode. echo writeback \u003e /sys/block/bcache0/bcache/cache_mode ","date":"2021-03-09","objectID":"/bcache/:4:0","tags":["bcache","pve","hci","debian"],"title":"Bcache","uri":"/bcache/"},{"categories":["linux"],"content":"Check bcache status cat /sys/block/bcache0/bcache/state no cache: this means you have not attached a caching device to your backing bcache device; clean: this means everything is ok. The cache is clean; dirty: this means everything is setup fine and that you have enabled writeback and that the cache is dirty; inconsistent: you are in trouble because the backing device is not in sync with the caching device; bcache-status lsblk ","date":"2021-03-09","objectID":"/bcache/:5:0","tags":["bcache","pve","hci","debian"],"title":"Bcache","uri":"/bcache/"},{"categories":["linux"],"content":"bcache optimized #modify cache policy cat /sys/block/bcache0/bcache/cache_mode echo writeback \u003e /sys/block/bcache0/bcache/cache_mode #Disable ip track echo 0 \u003e /sys/fs/bcache/$CacheSetUUID/congested_read_threshold_us echo 0 \u003e /sys/fs/bcache/$CacheSetUUID/congested_write_threshold_us ","date":"2021-03-09","objectID":"/bcache/:6:0","tags":["bcache","pve","hci","debian"],"title":"Bcache","uri":"/bcache/"},{"categories":["linux"],"content":"disable bcache #check `CACHE_SET_UUID` ls /sys/fs/bcache #Unregister ssd cache disk echo 1 \u003e/sys/fs/bcache/06e33354-7c21-4c52-990d-1a653617ab20/unregister #disable backend disk echo 1 \u003e /sys/block/sdb/bcache/stop #write back cache to backend disk echo 0 \u003e /sys/block/bcache0/bcache/writeback_percent ##Reference A block layer cache (bcache) bcache狀態和配置檔案詳細介紹(翻譯自官網） bcache手册 Linux下SSD缓存加速之bcache试用 bcache / 如何使用bcache构建LVM,软RAID / 如何优化bcache ","date":"2021-03-09","objectID":"/bcache/:7:0","tags":["bcache","pve","hci","debian"],"title":"Bcache","uri":"/bcache/"},{"categories":["vlmcsd"],"content":"How to Install VLMCSD on debian ","date":"2021-03-02","objectID":"/how-to-install-vlmcsd-on-debian/:0:0","tags":["vlmcsd","kms","debian","vyos"],"title":"How to Install Vlmcsd on Debian","uri":"/how-to-install-vlmcsd-on-debian/"},{"categories":["vlmcsd"],"content":"VLMCSD vlmcsd-1113-2020-03-28-Hotbird64 ","date":"2021-03-02","objectID":"/how-to-install-vlmcsd-on-debian/:1:0","tags":["vlmcsd","kms","debian","vyos"],"title":"How to Install Vlmcsd on Debian","uri":"/how-to-install-vlmcsd-on-debian/"},{"categories":["vlmcsd"],"content":"Download and install VLMCSD_VERSION=svn113 curl -fsSLO https://github.com/Wind4/vlmcsd/releases/download/$VLMCSD_VERSION/binaries.tar.gz tar -zxvf binaries.tar.gz sudo cp -af ./binaries/Linux/intel/glibc/vlmcsd-x64-glibc /usr/local/bin/ chown root:root /usr/local/bin/vlmcsd-x64-glibc chmod +x /usr/local/bin/vlmcsd-64-glibc sudo bash -c 'cat \u003e /lib/systemd/system/vlmcsd.service' \u003c\u003c EOF [Unit] Description=vlmcsd service [Service] ExecStart=/usr/local/bin/vlmcsd-x64-glibc -l /var/log/vlmcsd-64-glibc.log \u003e /dev/null 2\u003e\u00261 Restart=on-failure RestartSec=42s [Install] WantedBy=multi-user.target EOF #Reload systemctl daemon sudo systemctl daemon-reload #Delete temp directory. sudo rm -rf ./binaries sudo rm -rf ./binaries.tar.gz #Enable service of dcompass auto startup when system reboot sudo systemctl enable vlmcsd #Restart service of vlmcsd sudo systemctl restart vlmcsd #Check dcompass status of freedns. sudo systemctl status vlmcsd ","date":"2021-03-02","objectID":"/how-to-install-vlmcsd-on-debian/:2:0","tags":["vlmcsd","kms","debian","vyos"],"title":"How to Install Vlmcsd on Debian","uri":"/how-to-install-vlmcsd-on-debian/"},{"categories":["vlmcsd"],"content":"bat file for client echo \"To active office\" cd \"c:\\Program Files\\Microsoft Office\\Office16\" cscript ospp.vbs /sethst:$HOTSNAMTORIP:$PORT cscript ospp.vbs /inpkey:NMMKJ-6RK4F-KMJVX-8D9MJ-6MWKP cscript ospp.vbs /act echo \"To active windows\" slmgr /skms $HOSTNAMEORIP:$PORT slmgr /ato @pause ","date":"2021-03-02","objectID":"/how-to-install-vlmcsd-on-debian/:3:0","tags":["vlmcsd","kms","debian","vyos"],"title":"How to Install Vlmcsd on Debian","uri":"/how-to-install-vlmcsd-on-debian/"},{"categories":["vlmcsd"],"content":"Reference 在debian中搭建kms服务器 ","date":"2021-03-02","objectID":"/how-to-install-vlmcsd-on-debian/:4:0","tags":["vlmcsd","kms","debian","vyos"],"title":"How to Install Vlmcsd on Debian","uri":"/how-to-install-vlmcsd-on-debian/"},{"categories":["virtualization"],"content":"How to Install Proxmox VE 6 on Debian 10 ","date":"2021-03-01","objectID":"/how-to-install-proxmox-ve-6-on-debian-10/:0:0","tags":["pve","debian","debian 10"],"title":"How to Install Proxmox VE 6 on Debian 10","uri":"/how-to-install-proxmox-ve-6-on-debian-10/"},{"categories":["virtualization"],"content":"Install debian 10 ","date":"2021-03-01","objectID":"/how-to-install-proxmox-ve-6-on-debian-10/:1:0","tags":["pve","debian","debian 10"],"title":"How to Install Proxmox VE 6 on Debian 10","uri":"/how-to-install-proxmox-ve-6-on-debian-10/"},{"categories":["virtualization"],"content":"Modifiy hostname and hosts file export LANGUAGE=en_US.UTF-8 export LANG=en_US.UTF-8 export LC_ALL=en_US.UTF-8 #locale-gen en_US.UTF-8 cat \u003e\u003e /etc/environment \u003c\u003cEOF LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8 EOF cat \u003c\u003c EOF \u003e /etc/apt/sources.list deb https://mirrors.ustc.edu.cn/debian/ buster main contrib non-free deb-src https://mirrors.ustc.edu.cn/debian/ buster main contrib non-free deb https://mirrors.ustc.edu.cn/debian/ buster-updates main contrib non-free deb-src https://mirrors.ustc.edu.cn/debian/ buster-updates main contrib non-free deb https://mirrors.ustc.edu.cn/debian-security/ buster/updates main contrib non-free deb-src https://mirrors.ustc.edu.cn/debian-security/ buster/updates main contrib non-free EOF apt update \u0026\u0026 apt dist-upgrade -y apt install -y net-tools dnsutils vim firmware-linux-nonfree #sed -i 's/127.0.1.1/10.32.4.37/g' /etc/hosts hostname --ip-address echo \"deb http://mirrors.ustc.edu.cn/proxmox/debian/pve buster pve-no-subscription\" \u003e /etc/apt/sources.list.d/pve-install-repo.list wget http://mirrors.ustc.edu.cn/proxmox/debian/proxmox-ve-release-6.x.gpg -O /etc/apt/trusted.gpg.d/proxmox-ve-release-6.x.gpg apt update \u0026\u0026 apt -y full-upgrade apt install -y proxmox-ve postfix open-iscsi apt -y remove os-prober #Disable supscription alert sed -Ezi.bak \"s/(Ext.Msg.show\\(\\{\\s+title: gettext\\('No valid sub)/void\\(\\{ \\/\\/\\1/g\" /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js \u0026\u0026 systemctl restart pveproxy.service #Delete pve enterprise subscription rm -rf /etc/apt/sources.list.d/pve-enterprise.list #Modify ceph apt list source echo \"deb https://mirrors.ustc.edu.cn/proxmox/debian/ceph-octopus buster main\" \u003e\u003e /etc/apt/sources.list.d/ceph-octopus.list apt update \u0026\u0026 apt full-upgrade -y apt install -y ifupdown2 acpid openvswitch-switch ","date":"2021-03-01","objectID":"/how-to-install-proxmox-ve-6-on-debian-10/:2:0","tags":["pve","debian","debian 10"],"title":"How to Install Proxmox VE 6 on Debian 10","uri":"/how-to-install-proxmox-ve-6-on-debian-10/"},{"categories":["virtualization"],"content":"Reference Install Proxmox VE on Debian Buster ","date":"2021-03-01","objectID":"/how-to-install-proxmox-ve-6-on-debian-10/:3:0","tags":["pve","debian","debian 10"],"title":"How to Install Proxmox VE 6 on Debian 10","uri":"/how-to-install-proxmox-ve-6-on-debian-10/"},{"categories":["linux"],"content":"Install and Configure snmp on debian 10 ","date":"2021-01-22","objectID":"/install-and-configure-snmp-on-debian-10/:0:0","tags":["debian","debian10","snmp"],"title":"Install and Configure Snmp on Debian 10","uri":"/install-and-configure-snmp-on-debian-10/"},{"categories":["linux"],"content":"INSTALL SNMP apt install -y snmpd snmp libsnmp-dev ","date":"2021-01-22","objectID":"/install-and-configure-snmp-on-debian-10/:1:0","tags":["debian","debian10","snmp"],"title":"Install and Configure Snmp on Debian 10","uri":"/install-and-configure-snmp-on-debian-10/"},{"categories":["linux"],"content":"CONFIGURE SNMP ON DEBIAN 10 backup original configure file. cp /etc/snmp/snmpd.conf /etc/snmp/snmpd.conf.orig Edit snmpd.conf agentAddress udp:127.0.0.1:161,udp:192.168.1.1:161 ","date":"2021-01-22","objectID":"/install-and-configure-snmp-on-debian-10/:2:0","tags":["debian","debian10","snmp"],"title":"Install and Configure Snmp on Debian 10","uri":"/install-and-configure-snmp-on-debian-10/"},{"categories":["networking"],"content":" #Switch to root mode sudo su #Define freedns version freedns_version=v2020.9.17 #Create dcompass temp folder sudo mkdir -p /tmp/freedns # Swich to folder just we created. cd /tmp/freedns #Download dcompass binary sudo curl -fsSLO \"https://github.com/tuna/freedns-go/releases/download/$freedns_version/freedns-go-linux-amd64\" sudo cp -af /tmp/freedns/freedns-go-linux-amd64 /usr/local/bin/freedns sudo chown root:root /usr/local/bin/freedns sudo chmod +x /usr/local/bin/freedns sudo bash -c 'cat \u003e /lib/systemd/system/freedns.service' \u003c\u003c EOF [Unit] Description=freedns service [Service] ExecStart=/usr/local/bin/freedns -f 114.114.114.114:53 -c 8.8.8.8:53 -l 127.0.0.3:53 Restart=on-failure RestartSec=42s [Install] WantedBy=multi-user.target EOF #Reload systemclt daemon sudo systemctl daemon-reload #Delete temp directory. sudo rm -rf /tmp/freedns #Enable service of dcompass auto startup when system reboot sudo systemctl enable freedns #Restart service of freedns sudo systemctl restart freedns #Check dcompass status of freedns. sudo systemctl status freedns ","date":"2021-01-11","objectID":"/how-to-install-freedns-go-on-vyos/:0:0","tags":["vyos","freedns","go"],"title":"How to Install Freedns Go on Vyos","uri":"/how-to-install-freedns-go-on-vyos/"},{"categories":["macos"],"content":"Extend disk with diskutils Delete partition “Free Space” to extend disk to current macos partition. ","date":"2021-01-04","objectID":"/how-to-extend-free-disk-space-for-macos/:1:0","tags":["macos","diskutil"],"title":"How to Extend Free Disk Space for Macos","uri":"/how-to-extend-free-disk-space-for-macos/"},{"categories":["macos"],"content":"Fixed Error “The new size must be different than the existing size” #repair (internal, disk0 - in your case) diskutil repairdisk disk0 #resize (synthesized, disk1 - in your case with HS) diskutil apfs resizeContainer disk1 0 ","date":"2021-01-04","objectID":"/how-to-extend-free-disk-space-for-macos/:2:0","tags":["macos","diskutil"],"title":"How to Extend Free Disk Space for Macos","uri":"/how-to-extend-free-disk-space-for-macos/"},{"categories":["macos"],"content":"Reference Cannot resize APFS partition - “The new size must be different than the existing size” ","date":"2021-01-04","objectID":"/how-to-extend-free-disk-space-for-macos/:3:0","tags":["macos","diskutil"],"title":"How to Extend Free Disk Space for Macos","uri":"/how-to-extend-free-disk-space-for-macos/"},{"categories":["windows"],"content":"How to uninstlal windows update which install failed ","date":"2020-12-29","objectID":"/how-to-uninstall-windows-update-which-install-failed/:0:0","tags":["windows","blue screen","repair boot"],"title":"How to Uninstall Windows Update Which Install Failed","uri":"/how-to-uninstall-windows-update-which-install-failed/"},{"categories":["windows"],"content":"Uninstall failed windows update Reboot your pc or laptop and select troubleshoot Select to open the command prompt and stay away from any other auto repair options. Loading the software rigistry. #Load the softeware registry hive as follows. reg load hklm/temp c:\\windows\\system32\\config\\software #Delete the sessionPending registry key, if it exists by running: reg delete \"HKLM\\temp\\Microsoft\\Windows\\CurrentVersion\\Component Based Servicing\\SessionPending\" /v Exclusive # Unload the software registry hive: reg unload HKLM\\temp ","date":"2020-12-29","objectID":"/how-to-uninstall-windows-update-which-install-failed/:1:0","tags":["windows","blue screen","repair boot"],"title":"How to Uninstall Windows Update Which Install Failed","uri":"/how-to-uninstall-windows-update-which-install-failed/"},{"categories":["windows"],"content":"Remove failed updates with DISM command List failed updated. The yellow one are the ones of interest and you can see the first one never even got an install time. #List updates installed that caused issue. dism /image:c:\\ /get-packages 2. Remove error udpates with DISM. dism /image:c:\\ /remove-package /packagename:myproblematicpackagetoremove /scratchdir:c:\\temp 3. After finished uninstall error updates,we can reboot your pc. ","date":"2020-12-29","objectID":"/how-to-uninstall-windows-update-which-install-failed/:2:0","tags":["windows","blue screen","repair boot"],"title":"How to Uninstall Windows Update Which Install Failed","uri":"/how-to-uninstall-windows-update-which-install-failed/"},{"categories":["windows"],"content":"Reference Quick Fix Publish : VM won’t boot after October 2017 Updates for Windows Server 2016 and Windows 10 (KB4041691) ","date":"2020-12-29","objectID":"/how-to-uninstall-windows-update-which-install-failed/:3:0","tags":["windows","blue screen","repair boot"],"title":"How to Uninstall Windows Update Which Install Failed","uri":"/how-to-uninstall-windows-update-which-install-failed/"},{"categories":["linux"],"content":"Dcompass github address Dcompass Address Dcompass Release bianry #Switch to root mode sudo su #Define dcompass version dcompass_version=build-20210803_1007 #Create dcompass temp folder sudo mkdir -p /tmp/dcompass # Swich to folder just we created. cd /tmp/dcompass #Download dcompass binary sudo curl -fsSLO \"https://github.com/LEXUGE/dcompass/releases/download/$dcompass_version/dcompass-x86_64-unknown-linux-musl-full\" #Create dcompass configure folder sudo mkdir -p /etc/dcompass #Create dcompass configure yaml file sudo bash -c 'cat \u003e /etc/dcompass/config.yaml' \u003c\u003cEOF --- verbosity: \"info\" #address: 0.0.0.0:2053 address: 127.0.1.2:53 table: start: if: qtype: - AAAA then: # A list of actions is allowed here - blackhole # The next tag to go - end else: - dispatch dispatch: if: any then: - query: domestic - check_secure check_secure: if: geoip: codes: - CN else: - query: aboard - end upstreams: 114DNS: udp: addr: 114.114.114.114:53 Ali: udp: addr: 223.6.6.6:53 domestic: hybrid: - 114DNS - Ali googledns1: udp: addr: 8.8.8.8:53 googledns2: udp: addr: 8.8.4.4:53 aboard: hybrid: - googledns1 - googledns2 EOF sudo cp -af /tmp/dcompass/dcompass-x86_64-unknown-linux-musl-full /usr/local/bin/dcompass sudo chown root:root /usr/local/bin/dcompass sudo chmod +x /usr/local/bin/dcompass sudo bash -c 'cat \u003e /lib/systemd/system/dcompass.service' \u003c\u003c EOF [Unit] Description=dcompass service [Service] ExecStart=/usr/local/bin/dcompass -c /etc/dcompass/config.yaml Restart=on-failure RestartSec=42s [Install] WantedBy=multi-user.target EOF #Reload systemclt daemon sudo systemctl daemon-reload #Delete temp directory. sudo rm -rf /tmp/dcompass #Enable service of dcompass auto startup when system reboot sudo systemctl enable dcompass #Restart service of dcompass sudo systemctl restart dcompass #Check dcompass status of dcompass. sudo systemctl status dcompass ","date":"2020-12-22","objectID":"/how-to-install-dcompass-on-vyos/:1:0","tags":["vyos","debian","dcompass"],"title":"How to Install Dcompass on Vyos","uri":"/how-to-install-dcompass-on-vyos/"},{"categories":["macos"],"content":"How to install squirrel as your chinese input method for your macos ","date":"2020-11-20","objectID":"/how-to-install-squirrel-on-macos/:0:0","tags":["macos","chinese","squirrel"],"title":"How to Install Squirrel on Macos","uri":"/how-to-install-squirrel-on-macos/"},{"categories":["macos"],"content":"1. Install squirrel brew cask install squirrel ","date":"2020-11-20","objectID":"/how-to-install-squirrel-on-macos/:1:0","tags":["macos","chinese","squirrel"],"title":"How to Install Squirrel on Macos","uri":"/how-to-install-squirrel-on-macos/"},{"categories":["macos"],"content":"2. Logout and login or Reboot your mac Reboot your mac ","date":"2020-11-20","objectID":"/how-to-install-squirrel-on-macos/:2:0","tags":["macos","chinese","squirrel"],"title":"How to Install Squirrel on Macos","uri":"/how-to-install-squirrel-on-macos/"},{"categories":["macos"],"content":"3. Copy squirrel configuration for you configuration file: https://github.com/wongdean/rime-settings# mkdir rime \u0026\u0026 cd rime git clone https://github.com/wongdean/rime-settings.git ","date":"2020-11-20","objectID":"/how-to-install-squirrel-on-macos/:3:0","tags":["macos","chinese","squirrel"],"title":"How to Install Squirrel on Macos","uri":"/how-to-install-squirrel-on-macos/"},{"categories":["macos"],"content":"4. configure squrriel Press control + space key to enable squirrel. Then click settings... Copy all contents in rime-settings expect fonts folder to configure folder. ","date":"2020-11-20","objectID":"/how-to-install-squirrel-on-macos/:4:0","tags":["macos","chinese","squirrel"],"title":"How to Install Squirrel on Macos","uri":"/how-to-install-squirrel-on-macos/"},{"categories":["linux"],"content":"How to Create Debian10 template With Cloudinit for PVE VMID=9002 VM_NAME=CentOS-7-x86_64-GenericCloud VM_DOWNLOAD_URL=http://mirrors.ustc.edu.cn/centos-cloud/centos/7/images/CentOS-7-x86_64-GenericCloud.qcow2.xz TEMPLATE_VM_NAME=$(echo $VM_NAME | sed 's/_/-/g') STORAGE_PATH=local DEFAULT_PVE_PATH=/var/lib/vz/images #Change directory to `local` cd /var/lib/vz/images #Download centos 7 cloud images on proxmox ve wget $VM_DOWNLOAD_URL #unzip the file #xz -z (to zip file) #xz -k( to keep original file and valur `-0` to `-9` to set zip rate, default zip rate is -6 #xz -d (to unzip file) # xz -k (to keep zipped file not deleted) xz -d -k $VM_NAME.qcow2.xz qm create $VMID --memory 4096 --net0 virtio,bridge=vmbr0 --name $TEMPLATE_VM_NAME qm importdisk $VM_ID $VM_NAME.qcow2 $STORAGE_PATH qm set $VM_ID --scsihw virtio-scsi-pci --scsi0 $STORAGE_PATH:$VM_ID/vm-$VM_ID-disk-0.raw qm set $VM_ID --scsihw virtio-scsi-pci --scsi0 $STORAGE_PATH:$VM_ID/vm-$VM_ID-disk-0.raw qm set $VM_ID --boot c --bootdisk scsi0 qm set $VM_ID --serial0 socket --vga serial0 qm set $VM_ID --agent 1 qemu-img convert -f raw $DEFAULT_PVE_PATH/$VM_ID/vm-$VM_ID-disk-0.raw -O qcow2 $DEFAULT_PVE_PATH/$VM_ID/vm-$VM_ID-disk-0.qcow2 sed -i 's/.raw/.qcow2/g' /etc/pve/qemu-server/$VM_ID.conf qm start $VM_ID qm terminal $VM_ID #Change yum source form offical to mirrors.ustc.edu.cn sudo sed -e 's|^mirrorlist=|#mirrorlist=|g' \\ -e 's|^#baseurl=http://mirror.centos.org/centos|baseurl=https://mirrors.ustc.edu.cn/centos|g' \\ -i.bak \\ /etc/yum.repos.d/CentOS-Base.repo yum makecache yum update yum upgrade ","date":"2020-09-20","objectID":"/how-to-create-debian10-with-cloudinit-for-pve/:0:0","tags":["debian","debian10","cloudinit","pve","linux"],"title":"How to Create Debian10 With Cloudinit for Pve","uri":"/how-to-create-debian10-with-cloudinit-for-pve/"},{"categories":["linux"],"content":"HOw to create CentOS 7 template for PVE VMID=9002 VM_NAME=CentOS-7-x86_64-GenericCloud VM_DOWNLOAD_URL=http://mirrors.ustc.edu.cn/centos-cloud/centos/7/images/CentOS-7-x86_64-GenericCloud.qcow2.xz TEMPLATE_VM_NAME=$(echo $VM_NAME | sed 's/_/-/g') STORAGE_PATH=local DEFAULT_PVE_PATH=/var/lib/vz/images #Change directory to `local` cd /var/lib/vz/images #Download centos 7 cloud images on proxmox ve wget $VM_DOWNLOAD_URL #unzip the file #xz -z (to zip file) #xz -k( to keep original file and valur `-0` to `-9` to set zip rate, default zip rate is -6 #xz -d (to unzip file) # xz -k (to keep zipped file not deleted) xz -d -k $VM_NAME.qcow2.xz qm create $VMID --memory 4096 --net0 virtio,bridge=vmbr0 --name $TEMPLATE_VM_NAME qm importdisk $VM_ID $VM_NAME.qcow2 $STORAGE_PATH qm set $VM_ID --scsihw virtio-scsi-pci --scsi0 $STORAGE_PATH:$VM_ID/vm-$VM_ID-disk-0.raw qm set $VM_ID --scsihw virtio-scsi-pci --scsi0 $STORAGE_PATH:$VM_ID/vm-$VM_ID-disk-0.raw qm set $VM_ID --boot c --bootdisk scsi0 qm set $VM_ID --serial0 socket --vga serial0 qm set $VM_ID --agent 1 qemu-img convert -f raw $DEFAULT_PVE_PATH/$VM_ID/vm-$VM_ID-disk-0.raw -O qcow2 $DEFAULT_PVE_PATH/$VM_ID/vm-$VM_ID-disk-0.qcow2 sed -i 's/.raw/.qcow2/g' /etc/pve/qemu-server/$VM_ID.conf qm start $VM_ID qm terminal $VM_ID #Change yum source form offical to mirrors.ustc.edu.cn sudo sed -e 's|^mirrorlist=|#mirrorlist=|g' \\ -e 's|^#baseurl=http://mirror.centos.org/centos|baseurl=https://mirrors.ustc.edu.cn/centos|g' \\ -i.bak \\ /etc/yum.repos.d/CentOS-Base.repo yum makecache yum update yum upgrade ","date":"2020-09-12","objectID":"/how-to-create-centos7-template-for-pve/:0:0","tags":["centos","pve","linux"],"title":"How to Create Centos7 Template for Pve","uri":"/how-to-create-centos7-template-for-pve/"},{"categories":["networking"],"content":"How to reset VyOS to default settings configure load /opt/vyatta/etc/config.boot.default commit save ","date":"2020-09-04","objectID":"/how-to-reset-vyos-to-default-settings/:0:0","tags":["vyos","networking"],"title":"How to Reset Vyos to Default Settings","uri":"/how-to-reset-vyos-to-default-settings/"},{"categories":["virtualization"],"content":"How to extend all available disk to local-data After install Proxmove VE, the local-data only have about 50GB disk availabe. But how to let all availabld disk space to the local-data? Here we go: # Remove local-data lvremove /dev/pve/data # Extend all available disk to /dev/pve/root lvresize -l +100%FREE /dev/pve/root #recreate pve-root resize2fs /dev/mapper/pve-root ","date":"2020-09-04","objectID":"/how-to-extend-all-available-disk-to-local-data/:0:0","tags":["pve","lvm"],"title":"How to Extend All Available Disk to Local Data","uri":"/how-to-extend-all-available-disk-to-local-data/"},{"categories":["virtualization"],"content":"Reference Proxmox – Remove LVM local-data ","date":"2020-09-04","objectID":"/how-to-extend-all-available-disk-to-local-data/:1:0","tags":["pve","lvm"],"title":"How to Extend All Available Disk to Local Data","uri":"/how-to-extend-all-available-disk-to-local-data/"},{"categories":["networking"],"content":"How to make Destination Base Routing with Vyos I have 2 network interfaces. one for user access inboard network,another for user to access network aboard. How to make it work with vyos? ","date":"2020-09-03","objectID":"/how-to-make-destination-policy-base-routing-with-vyos/:0:0","tags":["vyos","PBR","network_shunt"],"title":"How to make Destination Base Routing With Vyos","uri":"/how-to-make-destination-policy-base-routing-with-vyos/"},{"categories":["networking"],"content":"Make a network group #Define a netwrok-group set firewall group network-group china-ip-ranges #Define lan network group set firewall group network-group lan-net-group network '192.168.11.0/24' ","date":"2020-09-03","objectID":"/how-to-make-destination-policy-base-routing-with-vyos/:1:0","tags":["vyos","PBR","network_shunt"],"title":"How to make Destination Base Routing With Vyos","uri":"/how-to-make-destination-policy-base-routing-with-vyos/"},{"categories":["networking"],"content":"set policy set policy route network-shunt rule 20 destination group network-group 'china-ip-ranges' set policy route network-shunt rule 20 set table '20' set policy route network-shunt rule 20 source group network-group 'lan-net-group' set policy route network-shunt rule 30 set table '30' set policy route network-shunt rule 30 source group network-group 'lan-net-group' ","date":"2020-09-03","objectID":"/how-to-make-destination-policy-base-routing-with-vyos/:2:0","tags":["vyos","PBR","network_shunt"],"title":"How to make Destination Base Routing With Vyos","uri":"/how-to-make-destination-policy-base-routing-with-vyos/"},{"categories":["networking"],"content":"Download and set the network-group with ipset Download and make a list for network-group loading when booting. #create the update shell script cat \u003e /config/scripts/generate_china_ip_address.sh \u003c\u003cEOF #!/bin/sh wget -c http://ftp.apnic.net/stats/apnic/delegated-apnic-latest -O - | cat | awk -F '|' '/CN/\u0026\u0026/ipv4/ {print $4 \"/\" 32-log($5)/log(2)}' | cat \u003e /config/chinaiprange.txt EOF # make the script an run chmod +x /config/scripts/generate_china_ip_address.sh #Run the script /config/scripts/generate_china_ip_address.sh Create boot loading script cat \u003e\u003e /config/scripts/vyos-postconfig-bootup.script \u003c\u003c EOF for l in `cat /config/chinaiprange.txt`; do sudo ipset add china-ip-ranges $l;done EOF ","date":"2020-09-03","objectID":"/how-to-make-destination-policy-base-routing-with-vyos/:3:0","tags":["vyos","PBR","network_shunt"],"title":"How to make Destination Base Routing With Vyos","uri":"/how-to-make-destination-policy-base-routing-with-vyos/"},{"categories":["networking"],"content":"Set protocol set protocols static interface-route 0.0.0.0/0 next-hop-interface pppoe0 set protocols static interface-route 172.16.131.0/24 next-hop-interface wg01 set protocols static table 20 interface-route 0.0.0.0/0 next-hop-interface pppoe0 set protocols static table 30 route 0.0.0.0/0 next-hop 172.16.131.1 ","date":"2020-09-03","objectID":"/how-to-make-destination-policy-base-routing-with-vyos/:4:0","tags":["vyos","PBR","network_shunt"],"title":"How to make Destination Base Routing With Vyos","uri":"/how-to-make-destination-policy-base-routing-with-vyos/"},{"categories":["networking"],"content":"Apply PBR Policy on lan interface set interfaces bridge br0 policy route network-shunt ","date":"2020-09-03","objectID":"/how-to-make-destination-policy-base-routing-with-vyos/:5:0","tags":["vyos","PBR","network_shunt"],"title":"How to make Destination Base Routing With Vyos","uri":"/how-to-make-destination-policy-base-routing-with-vyos/"},{"categories":["networking"],"content":"How to config DDNS for vyos with dns.he.net ","date":"2020-08-05","objectID":"/how-to-config-ddns-for-vyos-with-dns.he.net/:0:0","tags":["vyos","ddns","he.net"],"title":"How to Config Ddns for Vyos With Dns.he.net","uri":"/how-to-config-ddns-for-vyos-with-dns.he.net/"},{"categories":["networking"],"content":"Register A Recored Register a domian host.mydomain.com on your https://dns.he.net Generate a key 64LGiLiuoiuoiuoi ","date":"2020-08-05","objectID":"/how-to-config-ddns-for-vyos-with-dns.he.net/:1:0","tags":["vyos","ddns","he.net"],"title":"How to Config Ddns for Vyos With Dns.he.net","uri":"/how-to-config-ddns-for-vyos-with-dns.he.net/"},{"categories":["networking"],"content":"Run command to setup the ddns service configure set service dns dynamic interface pppoe0 service dyndns host-name 'host.mydomain.com' set service dns dynamic interface pppoe0 service dyndns login 'host.mydomain.com' set service dns dynamic interface pppoe0 service dyndns password '64LGiLiuoiuoiuoi' set service dns dynamic interface pppoe0 service dyndns server 'dyn.dns.he.net' commit save ","date":"2020-08-05","objectID":"/how-to-config-ddns-for-vyos-with-dns.he.net/:2:0","tags":["vyos","ddns","he.net"],"title":"How to Config Ddns for Vyos With Dns.he.net","uri":"/how-to-config-ddns-for-vyos-with-dns.he.net/"},{"categories":["networking"],"content":"How to build L2tp over ipsec vpn with vyos Today, I will show you how to build a l2tp over ipsec vpn with adsl wan address. ","date":"2020-08-05","objectID":"/how-to-build-l2tp-over-ipsec-vpn-with-vyos/:0:0","tags":["vyos ","vpn","pppoe","adsl"],"title":"How to Build L2tp Over Ipsec VPN With Vyos","uri":"/how-to-build-l2tp-over-ipsec-vpn-with-vyos/"},{"categories":["networking"],"content":"Setup vpn on vyos ","date":"2020-08-05","objectID":"/how-to-build-l2tp-over-ipsec-vpn-with-vyos/:0:1","tags":["vyos ","vpn","pppoe","adsl"],"title":"How to Build L2tp Over Ipsec VPN With Vyos","uri":"/how-to-build-l2tp-over-ipsec-vpn-with-vyos/"},{"categories":["networking"],"content":"Generate a preshare key $ generate wireguard preshared-key uND0O6RYI1O833NL2+qwSrW4htMll1hJAUM2nPQaa8k= ","date":"2020-08-05","objectID":"/how-to-build-l2tp-over-ipsec-vpn-with-vyos/:0:2","tags":["vyos ","vpn","pppoe","adsl"],"title":"How to Build L2tp Over Ipsec VPN With Vyos","uri":"/how-to-build-l2tp-over-ipsec-vpn-with-vyos/"},{"categories":["networking"],"content":"With authentication local configuration VPN Key Value WAN interface pppoe0 l2tp vpn network 172.16.100.0/24 PRESHARE KEY uND0O6RYI1O833NL2+qwSrW4htMll1hJAUM2nPQaa8k= DNS server 01 192.168.0.1 DNS Server 02 1921.68.0.2 configure set vpn ipsec auto-update '30' set vpn ipsec ipsec-interfaces interface 'pppoe0' set vpn ipsec nat-networks allowed-network 0.0.0.0/0 set vpn ipsec nat-traversal 'enable' set vpn l2tp remote-access authentication mode 'local' set vpn l2tp remote-access authentication require 'mschap-v2' set vpn l2tp remote-access client-ip-pool start '172.16.100.1' set vpn l2tp remote-access client-ip-pool stop '172.16.100.254' set vpn l2tp remote-access dns-servers server-1 '192.168.0.1' set vpn l2tp remote-access ipsec-settings authentication mode 'pre-shared-secret' set vpn l2tp remote-access ipsec-settings authentication pre-shared-secret 'uND0O6RYI1O833NL2+qwSrW4htMll1hJAUM2nPQaa8k=' set vpn l2tp remote-access ipsec-settings ike-lifetime '3600' set vpn l2tp remote-access ipsec-settings lifetime '3600' set vpn l2tp remote-access outside-address '0.0.0.0' ","date":"2020-08-05","objectID":"/how-to-build-l2tp-over-ipsec-vpn-with-vyos/:0:3","tags":["vyos ","vpn","pppoe","adsl"],"title":"How to Build L2tp Over Ipsec VPN With Vyos","uri":"/how-to-build-l2tp-over-ipsec-vpn-with-vyos/"},{"categories":["networking"],"content":"Auth users to access vpn Generate password dd if=/dev/urandom bs=1 count=15 | base64 create user named zhangsan with password J+Yi8o5ICLjKtezv0+i9 configure set vpn l2tp remote-acces authentication local-users username zhangshan password J+Yi8o5ICLjKtezv0+i9 commit save ","date":"2020-08-05","objectID":"/how-to-build-l2tp-over-ipsec-vpn-with-vyos/:0:4","tags":["vyos ","vpn","pppoe","adsl"],"title":"How to Build L2tp Over Ipsec VPN With Vyos","uri":"/how-to-build-l2tp-over-ipsec-vpn-with-vyos/"},{"categories":["networking"],"content":"Start the service sudo systemctl enable xl2tpd sudo systemctl restart xl2tpd ","date":"2020-08-05","objectID":"/how-to-build-l2tp-over-ipsec-vpn-with-vyos/:0:5","tags":["vyos ","vpn","pppoe","adsl"],"title":"How to Build L2tp Over Ipsec VPN With Vyos","uri":"/how-to-build-l2tp-over-ipsec-vpn-with-vyos/"},{"categories":["networking"],"content":"vpn setup script for windows 10 @echo off\u0026PUSHD %~DP0 \u0026TITLE ikev2 VPN InstallUninstall programme mode con cols=160 lines=50 set TempFile_Name=%SystemRoot%\\System32\\BatTestUACin_SysRt%Random%.batemp ( echo \"BAT Test UAC in Temp\" \u003e%TempFile_Name% ) 1\u003enul 2\u003enul if exist %TempFile_Name% ( del %TempFile_Name% 1\u003enul 2\u003enul\u0026\u0026goto :install ) else ( echo;Please run the script as administrator,Press any key to quit... \u0026\u0026goto :end ) echo;VPN List: echo; Welcome! This programme will help your install MY-VPN, or uninstall it. :install cls echo;1:MY-VPN(L2tp/ipsec) echo;Please select Install or Uninstall VPN(ikev2)(Enter 'i' for install, 'u' for uninstall, 'q' for quit): echo;i:Install MY-VPN(L2TP/IPSEC VPN) echo;u:Uninstall MY-VPN(L2TP/IPSEC VPN) echo;q:Quit set/p choose1=Please enter your selection and press enter key to confirm: echo %choose1%|findstr /i \"[iuq]\"\u003enul\u0026\u0026goto :%choose1% goto :install :i cls echo;Install 1:MY-VPN(L2TP/IPSEC VPN) echo;=========================== echo;***Step 1:Delete VPN with the same name *** (powershell -Command \"\u0026 {Remove-VpnConnection -Name \"MY-VPN\" -Force -PassThru;}\") 1\u003enul 2\u003enul echo;Successfully! echo; echo;***Step 2: Install new VPN*** (powershell -Command \"\u0026 {Enable-PSRemoting -Force;}\") 1\u003enul 2\u003enul (powershell -Command \"\u0026 {Add-VpnConnection -Name \"MY-VPN\" -ServerAddress \"myvpn.mydomain.com\" -TunnelType \"L2tp\" -EncryptionLevel \"Required\" -AuthenticationMethod MSChapv2 -L2tpPsk \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\" -Force -RememberCredential -DnsSuffix \"MYDOMAIN.NET\" -PassThru;}\") 1\u003enul 2\u003enul echo;Done! echo; echo;***Step 3:Clean key in regedit*** (powershell -Command \"\u0026 {Remove-ItemProperty HKLM:\\System\\CurrentControlSet\\Services\\Rasman\\Parameters -name \"NegotiateDH2048_AES256\"; Remove-ItemProperty HKLM:\\System\\CurrentControlSet\\Services\\PolicyAgent -name \"AssumeUDPEncapsulationContextOnSendRule \";}\") 1\u003enul 2\u003enul echo;Done! echo; echo;***Step 4:Add key in Regedit*** (powershell -Command \"\u0026 {New-ItemProperty HKLM:\\System\\CurrentControlSet\\Services\\Rasman\\Parameters -name \"NegotiateDH2048_AES256\" -value 1 -propertyType dword; New-ItemProperty HKLM:\\System\\CurrentControlSet\\Services\\PolicyAgent -name \"AssumeUDPEncapsulationContextOnSendRule \" -value 2 -propertyType dword;}\") 1\u003enul 2\u003enul echo;Done! echo; echo;***Step 5:Set regedit*** powershell -Command \"\u0026 {Set-ItemProperty HKLM:\\System\\CurrentControlSet\\Services\\Rasman\\Parameters -name \"NegotiateDH2048_AES256\" -value 1; Set-ItemProperty HKLM:\\System\\CurrentControlSet\\Services\\PolicyAgent -name \"AssumeUDPEncapsulationContextOnSendRule \" -value 2;}\" echo;Done! echo; echo;***Step 6:Reboot your Windows*** echo;Press any key to reboot your windows, or press X to quit the script and manually reboot your windows. pause\u003enul goto :end :u cls echo;Uninstall MY-VPN(L2TP/IPSEC VPN) echo;=========================== (powershell -Command \"\u0026 {Remove-VpnConnection -Name \"MY-VPN\" -Force -PassThru;}\") 1\u003enul 2\u003enul echo;Done, Press any key to quit... goto :end :end pause\u003enul ","date":"2020-08-05","objectID":"/how-to-build-l2tp-over-ipsec-vpn-with-vyos/:1:0","tags":["vyos ","vpn","pppoe","adsl"],"title":"How to Build L2tp Over Ipsec VPN With Vyos","uri":"/how-to-build-l2tp-over-ipsec-vpn-with-vyos/"},{"categories":["linux"],"content":"How to deploy Jisti Server with docker-compose ","date":"2020-05-21","objectID":"/how-to-deploy-jitsi-server-with-docker-compose/:0:0","tags":["docker","docker-compose","jitsi"],"title":"How to Deploy Jitsi Server With Docker Compose","uri":"/how-to-deploy-jitsi-server-with-docker-compose/"},{"categories":["linux"],"content":"Install jisti Server git clone latest version git clone https://github.com/jitsi/docker-jitsi-meet \u0026\u0026 cd docker-jitsi-meet cp env.example .env Generate security password ./gen-passwords.sh #mkdir -p ~/.jitsi-meet-cfg/{web/letsencrypt,transcripts,prosody,jicofo,jvb} mkdir -p ~/.jitsi-meet-cfg/{web/letsencrypt,transcripts,prosody/config,prosody/prosody-plugins-custom,jicofo,jvb,jigasi,jibri} ","date":"2020-05-21","objectID":"/how-to-deploy-jitsi-server-with-docker-compose/:1:0","tags":["docker","docker-compose","jitsi"],"title":"How to Deploy Jitsi Server With Docker Compose","uri":"/how-to-deploy-jitsi-server-with-docker-compose/"},{"categories":["linux"],"content":"Modify .env copy env.example to .env. cp env.example .env Modify key and value as followed. CONFIG=~/.jitsi-meet-cfg # Exposed HTTP port HTTP_PORT=80 # Exposed HTTPS port HTTPS_PORT=443 # System time zone TZ=Asia/Shanghai # Public URL for the web service PUBLIC_URL=https://meet.mydomain.com # # Let's Encrypt configuration # # Enable Let's Encrypt certificate generation ENABLE_LETSENCRYPT=1 # Domain for which to generate the certificate LETSENCRYPT_DOMAIN=meet.mydomain.com # E-Mail for receiving important account notifications (mandatory) LETSENCRYPT_EMAIL=myname@mydomain.com # Enable authentication ENABLE_AUTH=1 # Enable guest access ENABLE_GUESTS=1 # Select authentication type: internal, jwt or ldap AUTH_TYPE=internal # Redirect HTTP traffic to HTTPS # Necessary for Let's Encrypt, relies on standard HTTPS port (443) ENABLE_HTTP_REDIRECT=1 ","date":"2020-05-21","objectID":"/how-to-deploy-jitsi-server-with-docker-compose/:2:0","tags":["docker","docker-compose","jitsi"],"title":"How to Deploy Jitsi Server With Docker Compose","uri":"/how-to-deploy-jitsi-server-with-docker-compose/"},{"categories":["linux"],"content":"Add Users for internal auth docker exec -it docker-jitsi-meet_prosody_1 bash # create a user `user1` prosodyctl --config /config/prosody.cfg.lua register user1 meet.jitsi ","date":"2020-05-21","objectID":"/how-to-deploy-jitsi-server-with-docker-compose/:3:0","tags":["docker","docker-compose","jitsi"],"title":"How to Deploy Jitsi Server With Docker Compose","uri":"/how-to-deploy-jitsi-server-with-docker-compose/"},{"categories":["linux"],"content":"Run it docker-compose up -d ","date":"2020-05-21","objectID":"/how-to-deploy-jitsi-server-with-docker-compose/:4:0","tags":["docker","docker-compose","jitsi"],"title":"How to Deploy Jitsi Server With Docker Compose","uri":"/how-to-deploy-jitsi-server-with-docker-compose/"},{"categories":["linux"],"content":"Backup #for configure folder ~/.jitsi-meet-cfg # for letencryption folder ~/.jitsi-meet-cfg/web/letsencrypt # for configure ./.env ","date":"2020-05-21","objectID":"/how-to-deploy-jitsi-server-with-docker-compose/:5:0","tags":["docker","docker-compose","jitsi"],"title":"How to Deploy Jitsi Server With Docker Compose","uri":"/how-to-deploy-jitsi-server-with-docker-compose/"},{"categories":["linux"],"content":"Firewall Setup apt install ufw ufw status ufw default deny ufw allow 22 ufw allow 443 ufw allow 80 ufw allow 10000/udp ufw allow 4443 ufw enable ufw status ","date":"2020-05-21","objectID":"/how-to-deploy-jitsi-server-with-docker-compose/:6:0","tags":["docker","docker-compose","jitsi"],"title":"How to Deploy Jitsi Server With Docker Compose","uri":"/how-to-deploy-jitsi-server-with-docker-compose/"},{"categories":["linux"],"content":"Reference Quick start 用docker安裝視訊會議 jitsi-meet ","date":"2020-05-21","objectID":"/how-to-deploy-jitsi-server-with-docker-compose/:7:0","tags":["docker","docker-compose","jitsi"],"title":"How to Deploy Jitsi Server With Docker Compose","uri":"/how-to-deploy-jitsi-server-with-docker-compose/"},{"categories":["linux"],"content":"How to convert godaddy certification files from .cert to .pem Recently days, I met an issue to renew ssl certification file for a website. The former developer setup certification file to .pem. It take a long time to make it work. Here we go. ","date":"2020-01-21","objectID":"/how-to-convert-cert-to-ssl/:0:0","tags":["nginx","ssl","openssl"],"title":"How to Convert Cert to Ssl","uri":"/how-to-convert-cert-to-ssl/"},{"categories":["linux"],"content":"Convert .crt to .pem # convert .key file to key.pem openssl rsa -in mywebsite.com.key -text \u003e key.pem # convert .cert to cert.pem cat mywebsite.com.crt \u003e cert.pem # add cert chain to the cert.pem cat mywebsite.com.ca-bundle \u003e\u003e cert.pem # clone pem cp cert.pem staging.pem # openssl dhparam -dsaparam -out /etc/nginx/ssl/dhparam.pem 4096 tar -cxvf tar -jcvf mywebsite.com-v3.tar.bz2 *.pem ","date":"2020-01-21","objectID":"/how-to-convert-cert-to-ssl/:1:0","tags":["nginx","ssl","openssl"],"title":"How to Convert Cert to Ssl","uri":"/how-to-convert-cert-to-ssl/"},{"categories":["linux"],"content":"Upload mywebsite.com-v3.tar.bz2 to server and renew ssl certification tar -jxvf mywebsite.com-v3.tar.bz2 mv all the pem file to /home/mywebsitepath # Testing nginx configuration docker exec -it nginx nginx -t # Restart nginx instance docker restart nginx ","date":"2020-01-21","objectID":"/how-to-convert-cert-to-ssl/:2:0","tags":["nginx","ssl","openssl"],"title":"How to Convert Cert to Ssl","uri":"/how-to-convert-cert-to-ssl/"},{"categories":["macos"],"content":"How to enable NTFS Read and Write in Macos Catalina 10.15 For a long time. It was much trouble to enable ntfs write mode in macos. Today I done it about enable ntfs wirte support with fuse and ntfs-3g. ","date":"2019-12-27","objectID":"/how-to-enable-ntfs-read-and-write-in-macos-catalina-10.15/:0:0","tags":["macos","ntfs","catalina"],"title":"How to Enable Ntfs Read and Write in Macos Catalina 10.15","uri":"/how-to-enable-ntfs-read-and-write-in-macos-catalina-10.15/"},{"categories":["macos"],"content":"Install FUSE for macos You can download latest FUSE for macOS from here: FUSE for macOS Then you can install it by yourself. ","date":"2019-12-27","objectID":"/how-to-enable-ntfs-read-and-write-in-macos-catalina-10.15/:1:0","tags":["macos","ntfs","catalina"],"title":"How to Enable Ntfs Read and Write in Macos Catalina 10.15","uri":"/how-to-enable-ntfs-read-and-write-in-macos-catalina-10.15/"},{"categories":["macos"],"content":"Install ntfs-3g brew install ntfs-3g ","date":"2019-12-27","objectID":"/how-to-enable-ntfs-read-and-write-in-macos-catalina-10.15/:2:0","tags":["macos","ntfs","catalina"],"title":"How to Enable Ntfs Read and Write in Macos Catalina 10.15","uri":"/how-to-enable-ntfs-read-and-write-in-macos-catalina-10.15/"},{"categories":["macos"],"content":"Replace ntfs-3g Since from OS X 10.11 version ,macos enabled system integrity protection we need to disable it to replace the ntfs_mount. So we gonna to disable System integrity Protection in Recovery mode ,then boot to normal mode to replace ntfs_mount, at last we need to boot to recovery mode again to enable system integrity protection. ","date":"2019-12-27","objectID":"/how-to-enable-ntfs-read-and-write-in-macos-catalina-10.15/:3:0","tags":["macos","ntfs","catalina"],"title":"How to Enable Ntfs Read and Write in Macos Catalina 10.15","uri":"/how-to-enable-ntfs-read-and-write-in-macos-catalina-10.15/"},{"categories":["macos"],"content":"1. Disable system integrity protection Shutdown your macos Press Command + R,the press power buttion to start macos and enter the recovery mode. After enter recovery mode, then we can open Terminal. Run command in Terminal csrutil disable. Reboot macos. ","date":"2019-12-27","objectID":"/how-to-enable-ntfs-read-and-write-in-macos-catalina-10.15/:3:1","tags":["macos","ntfs","catalina"],"title":"How to Enable Ntfs Read and Write in Macos Catalina 10.15","uri":"/how-to-enable-ntfs-read-and-write-in-macos-catalina-10.15/"},{"categories":["macos"],"content":"2. Replace mount_ntfs Open Terminal Enter commands as show below sudo mount -uw / sudo mv /sbin/mount_ntfs /sbin/mount_ntfs.original sudo ln -s /usr/local/sbin/mount_ntfs /sbin/mount_ntfs Then shutdown your. macos. ","date":"2019-12-27","objectID":"/how-to-enable-ntfs-read-and-write-in-macos-catalina-10.15/:3:2","tags":["macos","ntfs","catalina"],"title":"How to Enable Ntfs Read and Write in Macos Catalina 10.15","uri":"/how-to-enable-ntfs-read-and-write-in-macos-catalina-10.15/"},{"categories":["macos"],"content":"3. Enable system integrity protection Press Command + R,the press power buttion to start macos and enter the recovery mode. After enter recovery mode, then we can open Terminal. Run command in Terminal csrutil enble. Reboot macos. ","date":"2019-12-27","objectID":"/how-to-enable-ntfs-read-and-write-in-macos-catalina-10.15/:3:3","tags":["macos","ntfs","catalina"],"title":"How to Enable Ntfs Read and Write in Macos Catalina 10.15","uri":"/how-to-enable-ntfs-read-and-write-in-macos-catalina-10.15/"},{"categories":["macos"],"content":"4. Follow the system notification to enable fuse ntfs After we boot macos normally, we need follow the system notification to enable permission for fuse ntfs. ","date":"2019-12-27","objectID":"/how-to-enable-ntfs-read-and-write-in-macos-catalina-10.15/:3:4","tags":["macos","ntfs","catalina"],"title":"How to Enable Ntfs Read and Write in Macos Catalina 10.15","uri":"/how-to-enable-ntfs-read-and-write-in-macos-catalina-10.15/"},{"categories":["macos"],"content":"Pro and Cons Pro: We can write ntfs format disk for free. Cons: We need to do it again when we upgrade macos to a new major release. ","date":"2019-12-27","objectID":"/how-to-enable-ntfs-read-and-write-in-macos-catalina-10.15/:4:0","tags":["macos","ntfs","catalina"],"title":"How to Enable Ntfs Read and Write in Macos Catalina 10.15","uri":"/how-to-enable-ntfs-read-and-write-in-macos-catalina-10.15/"},{"categories":["macos"],"content":"Reference Enabling NTFS write in macOS 10.15 Catalina the Open source way About System Integrity Protection on your Mac ","date":"2019-12-27","objectID":"/how-to-enable-ntfs-read-and-write-in-macos-catalina-10.15/:5:0","tags":["macos","ntfs","catalina"],"title":"How to Enable Ntfs Read and Write in Macos Catalina 10.15","uri":"/how-to-enable-ntfs-read-and-write-in-macos-catalina-10.15/"},{"categories":["graylog"],"content":"How to Install Graylog with Docker-compose Hostname my-graylog ","date":"2019-12-24","objectID":"/how-to-install-graylog-with-docker-compose/:0:0","tags":["graylog","docker","docker-compose","linux"],"title":"How to Install Graylog With Docker Compose","uri":"/how-to-install-graylog-with-docker-compose/"},{"categories":["graylog"],"content":"Docker-compose.yaml version:'2'services:# MongoDB: https://hub.docker.com/_/mongo/mongodb:image:mongo:3volumes:- ./data/mongo_data:/data/db- /etc/localtime:/etc/localtime:ro# Elasticsearch: https://www.elastic.co/guide/en/elasticsearch/reference/6.x/docker.htmlelasticsearch:image:docker.elastic.co/elasticsearch/elasticsearch-oss:6.8.2volumes:- ./data/es_data:/usr/share/elasticsearch/data- /etc/localtime:/etc/localtime:roenvironment:- http.host=0.0.0.0- transport.host=localhost- network.host=0.0.0.0- \"ES_JAVA_OPTS=-Xms512m -Xmx512m\"ulimits:memlock:soft:-1hard:-1mem_limit:1g# Graylog: https://hub.docker.com/r/graylog/graylog/graylog:image:graylog/graylog:3.1volumes:- ./data/graylog_journal:/usr/share/graylog/data/journal- /etc/localtime:/etc/localtime:roenvironment:# CHANGE ME (must be at least 16 characters)!- GRAYLOG_PASSWORD_SECRET=somepasswordpepper# Password: admin- GRAYLOG_ROOT_PASSWORD_SHA2=8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918- GRAYLOG_HTTP_EXTERNAL_URI=http://my-graylog:9000/links:- mongodb:mongo- elasticsearchdepends_on:- mongodb- elasticsearchports:# Graylog web interface and REST API- 9000:9000# Syslog TCP- 1514:1514# Syslog UDP- 1514:1514/udp# GELF TCP- 12201:12201# GELF UDP- 12201:12201/udp# Volumes for persisting data, see https://docs.docker.com/engine/admin/volumes/volumes/ ","date":"2019-12-24","objectID":"/how-to-install-graylog-with-docker-compose/:1:0","tags":["graylog","docker","docker-compose","linux"],"title":"How to Install Graylog With Docker Compose","uri":"/how-to-install-graylog-with-docker-compose/"},{"categories":["graylog"],"content":"Start graylog docker-compose up -d ","date":"2019-12-24","objectID":"/how-to-install-graylog-with-docker-compose/:2:0","tags":["graylog","docker","docker-compose","linux"],"title":"How to Install Graylog With Docker Compose","uri":"/how-to-install-graylog-with-docker-compose/"},{"categories":["graylog"],"content":"Fixed permission of folder chown -R 1100:1100 data/graylog_journal/ chown -R 1000:1000 data/es_data/ docker-compose down docker-compose up -d ","date":"2019-12-24","objectID":"/how-to-install-graylog-with-docker-compose/:3:0","tags":["graylog","docker","docker-compose","linux"],"title":"How to Install Graylog With Docker Compose","uri":"/how-to-install-graylog-with-docker-compose/"},{"categories":["networking"],"content":"How to build ipse site-to-site VPN with vyos and pfsense ","date":"2019-12-19","objectID":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/:0:0","tags":["vyos","pfsense","ipsec","site-to-site"],"title":"How to Build Ipsec Site to Site Vpn With Vyos and Pfsense","uri":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/"},{"categories":["networking"],"content":"Vyos VS pfsense For build all kinds of network functions like nat,firewall, site-to-site vpn , dial in vpn with pfsense.It works well. But it has some Crons: Hard to upgrade version, it manybe crashed Didn’t support API. Heavy loading and low performance. After try to replace pfsense to build all functions with vyos. It has a lot of pros: Easy upgrade and rollback Support http and python api Support ansible deploy Command line operation,just like juniper and cisco. Today I will show you how to build ipsec site-to-site vpn with vyos and pfsense ","date":"2019-12-19","objectID":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/:1:0","tags":["vyos","pfsense","ipsec","site-to-site"],"title":"How to Build Ipsec Site to Site Vpn With Vyos and Pfsense","uri":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/"},{"categories":["networking"],"content":"Prerequest SITE A SITE B WAN ADDRESS 1.1.1.1 2.2.2.2 WAN Interface eth0 eth0 LAN ADDRESS 192.168.1.1/24 192.168.2.1/24 LAN NETWORK 192.168.1.0/24 192.168.2.0/24 LAN Interface eth1 eth1 OS Vyos pfsense Pre-Shared Key *#JCenaoewaoi0298J299*8\u0026^(%9))_\u0026\u0026 *#JCenaoewaoi0298J299*8\u0026^(%9))_\u0026\u0026 ","date":"2019-12-19","objectID":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/:2:0","tags":["vyos","pfsense","ipsec","site-to-site"],"title":"How to Build Ipsec Site to Site Vpn With Vyos and Pfsense","uri":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/"},{"categories":["networking"],"content":"Configure vyos Configure Site A configure set vpn ipsec ipsec-interfaces interface eth0 set vpn ipsec ike-group IKE-Default dead-peer-detection action 'hold' set vpn ipsec ike-group IKE-Default dead-peer-detection interval '30' set vpn ipsec ike-group IKE-Default dead-peer-detection timeout '120' set vpn ipsec ike-group IKE-Default ikev2-reauth 'no' set vpn ipsec ike-group IKE-Default key-exchange 'ikev2' set vpn ipsec ike-group IKE-Default lifetime '10800' set vpn ipsec ike-group IKE-Default mobike 'disable' set vpn ipsec ike-group IKE-Default proposal 1 dh-group '14' set vpn ipsec ike-group IKE-Default proposal 1 encryption 'aes256gcm128' set vpn ipsec ike-group IKE-Default proposal 1 hash 'sha256' set vpn ipsec esp-group ESP-Default compression 'disable' set vpn ipsec esp-group ESP-Default lifetime '3600' set vpn ipsec esp-group ESP-Default mode 'tunnel' set vpn ipsec esp-group ESP-Default pfs 'dh-group14' set vpn ipsec esp-group ESP-Default proposal 1 encryption 'aes256gcm128' set vpn ipsec esp-group ESP-Default proposal 1 hash 'sha256' set vpn ipsec site-to-site peer 2.2.2.2 authentication id '1.1.1.1' set vpn ipsec site-to-site peer 2.2.2.2 authentication mode 'pre-shared-secret' set vpn ipsec site-to-site peer 2.2.2.2 authentication pre-shared-secret '*#JCenaoewaoi0298J299*8\u0026^(%9))_\u0026\u0026' set vpn ipsec site-to-site peer 2.2.2.2 authentication remote-id '2.2.2.2' set vpn ipsec site-to-site peer 2.2.2.2 connection-type 'initiate' set vpn ipsec site-to-site peer 2.2.2.2 ike-group 'IKE-Default' set vpn ipsec site-to-site peer 2.2.2.2 ikev2-reauth 'inherit' set vpn ipsec site-to-site peer 2.2.2.2 local-address '1.1.1.1' set vpn ipsec site-to-site peer 2.2.2.2 tunnel 0 esp-group 'ESP-Default' set vpn ipsec site-to-site peer 2.2.2.2 tunnel 0 local prefix '192.168.1.0/24' set vpn ipsec site-to-site peer 2.2.2.2 tunnel 0 remote prefix '192.168.2.0/24' ","date":"2019-12-19","objectID":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/:3:0","tags":["vyos","pfsense","ipsec","site-to-site"],"title":"How to Build Ipsec Site to Site Vpn With Vyos and Pfsense","uri":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/"},{"categories":["networking"],"content":"Configure pfsense Configure Site B After login pfsense click VPN | IPsec; Then click ‘Add P1` button. configuraton as show below ","date":"2019-12-19","objectID":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/:4:0","tags":["vyos","pfsense","ipsec","site-to-site"],"title":"How to Build Ipsec Site to Site Vpn With Vyos and Pfsense","uri":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/"},{"categories":["networking"],"content":"Add P1 ","date":"2019-12-19","objectID":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/:4:1","tags":["vyos","pfsense","ipsec","site-to-site"],"title":"How to Build Ipsec Site to Site Vpn With Vyos and Pfsense","uri":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/"},{"categories":["networking"],"content":"General Information Key Value Disabled uncheck Key Exchange version IKEv2 Internet Protocol IPv4 Interfae WAN Remote Gateway 1.1.1.1 Description SITE-A-VPN ","date":"2019-12-19","objectID":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/:5:0","tags":["vyos","pfsense","ipsec","site-to-site"],"title":"How to Build Ipsec Site to Site Vpn With Vyos and Pfsense","uri":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/"},{"categories":["networking"],"content":"Phase 1 Proposal (Authentication) Key Value Authentication Method Mutual PSK My identifier My IP address Peer identifier Peer IP address Pre-Shared Key *#JCenaoewaoi0298J299*8\u0026^(%9))_\u0026\u0026 ","date":"2019-12-19","objectID":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/:6:0","tags":["vyos","pfsense","ipsec","site-to-site"],"title":"How to Build Ipsec Site to Site Vpn With Vyos and Pfsense","uri":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/"},{"categories":["networking"],"content":"Phase 1 Proposal(Encryption Algorithm) Key Algorithm Key length Hash DH Group Encryption Algorithm AES256-GCM 128 bits SHA256 14(2048bit) Key Value Lifetime(Seconds) 28800 ","date":"2019-12-19","objectID":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/:7:0","tags":["vyos","pfsense","ipsec","site-to-site"],"title":"How to Build Ipsec Site to Site Vpn With Vyos and Pfsense","uri":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/"},{"categories":["networking"],"content":"Advanced Options KEY VALUE Disable rekey uncheck Margintime(Seconds black Disable Reauth uncheck Responder Only Uncheck MOBIKE Disable Split connections uncheck Dead Peer Dection ‘Check on’ Enable DPD Delay 120 Max failures 30 ","date":"2019-12-19","objectID":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/:8:0","tags":["vyos","pfsense","ipsec","site-to-site"],"title":"How to Build Ipsec Site to Site Vpn With Vyos and Pfsense","uri":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/"},{"categories":["networking"],"content":"Add P2 ","date":"2019-12-19","objectID":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/:8:1","tags":["vyos","pfsense","ipsec","site-to-site"],"title":"How to Build Ipsec Site to Site Vpn With Vyos and Pfsense","uri":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/"},{"categories":["networking"],"content":"General Information Key Value Disable unchecked Mode Tunnel IPv4 Local network Network 192.168.2.0/24 NAT/BINAT translation None Remote Network Network 192.168.1.0/24 Description Site A ","date":"2019-12-19","objectID":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/:9:0","tags":["vyos","pfsense","ipsec","site-to-site"],"title":"How to Build Ipsec Site to Site Vpn With Vyos and Pfsense","uri":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/"},{"categories":["networking"],"content":"Phase 2 Proposal(SA/Key Exchange) Key Value Protocol ESP Encryption Algorithms AES256-GCM 128 bit Hash Algorithms SHA256 PFS key group 14(2048 bit) Lifttime 3600 ","date":"2019-12-19","objectID":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/:10:0","tags":["vyos","pfsense","ipsec","site-to-site"],"title":"How to Build Ipsec Site to Site Vpn With Vyos and Pfsense","uri":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/"},{"categories":["networking"],"content":"Advanced Configuration Key Value Automatically ping host 192.168.1.1 ","date":"2019-12-19","objectID":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/:11:0","tags":["vyos","pfsense","ipsec","site-to-site"],"title":"How to Build Ipsec Site to Site Vpn With Vyos and Pfsense","uri":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/"},{"categories":["networking"],"content":"Change firewall to allow ipsec vpn connection Protocol Source Port Destination Port Ipv4 UDP 1.1.1.1 * WAN address 500(ISAKMP) IPv4 UDP 1.1.1.1 * WAN address 4500(IPsec NAT-T) Ipv4 ESP 1.1.1.1 * WAN address * —The End— ","date":"2019-12-19","objectID":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/:11:1","tags":["vyos","pfsense","ipsec","site-to-site"],"title":"How to Build Ipsec Site to Site Vpn With Vyos and Pfsense","uri":"/how-to-build-ipsec-site-to-site-vpn-with-vyos-and-pfsense/"},{"categories":["devops"],"content":"How to install Jenkins with docker compose ","date":"2019-12-10","objectID":"/how-to-install-jenkins-with-docker-compose/:0:0","tags":["devops","jenkins","pipline","docker"],"title":"How to Install Jenkins With Docker Compose","uri":"/how-to-install-jenkins-with-docker-compose/"},{"categories":["devops"],"content":"Create Dockerfile With office jenkins docker images.change the jenkins mirrors and change alpine linux soure list to aliyun #DockerfileFROM jenkins/jenkins:alpineUSER rootENV JENKINS_MIRROR https://mirrors.tuna.tsinghua.edu.cnENV JENKINS_UC_DOWNLOAD=\"https://mirrors.tuna.tsinghua.edu.cn/jenkins/\"RUN sed -i 's/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g' /etc/apk/repositories \\\u0026\u0026apk update \\\u0026\u0026apk add docker nodejs nodejs-npm yarn ","date":"2019-12-10","objectID":"/how-to-install-jenkins-with-docker-compose/:1:0","tags":["devops","jenkins","pipline","docker"],"title":"How to Install Jenkins With Docker Compose","uri":"/how-to-install-jenkins-with-docker-compose/"},{"categories":["devops"],"content":"Create docker-compose.yaml # docker-compose.yamlversion:\"2.4\"services:jenkins:build:./#image: jenkins/jenkins:alpinecontainer_name:jenkinsports:- \"80:8080\"- \"50000:50000\"environment:#- JAVA_OPTS=-Xmx1500m -Duser.timezone=GMT+8- JAVA_OPTS=-Duser.timezone=GMT+8- JENKINS_UC_DOWNLOAD=https://mirrors.tuna.tsinghua.edu.cn/jenkins/volumes:- ./data/jenkins:/var/jenkins_home- /var/run/docker.sock:/var/run/docker.sock- /root/.ssh/:/root/.ssh- /etc/localtime:/etc/localtime:ro# cpus: 3.5# mem_limit: 1800muser:rootrestart:always ","date":"2019-12-10","objectID":"/how-to-install-jenkins-with-docker-compose/:2:0","tags":["devops","jenkins","pipline","docker"],"title":"How to Install Jenkins With Docker Compose","uri":"/how-to-install-jenkins-with-docker-compose/"},{"categories":["devops"],"content":"Install Jenkins with Check initial Admin Password by run command as show below cat data/jenkins/secrets/initialAdminPassword ","date":"2019-12-10","objectID":"/how-to-install-jenkins-with-docker-compose/:3:0","tags":["devops","jenkins","pipline","docker"],"title":"How to Install Jenkins With Docker Compose","uri":"/how-to-install-jenkins-with-docker-compose/"},{"categories":["devops"],"content":"Reference Jenkins for Docker 跳过插件安装及插件加速镜像设置 ","date":"2019-12-10","objectID":"/how-to-install-jenkins-with-docker-compose/:4:0","tags":["devops","jenkins","pipline","docker"],"title":"How to Install Jenkins With Docker Compose","uri":"/how-to-install-jenkins-with-docker-compose/"},{"categories":["devops"],"content":"How to Install gitlab with docer-compose version:\"3.5\"services:gitlab:image:gitlab/gitlab-ce:latestcontainer_name:gitlabrestart:alwayshostname:'xa-gitlab'environment:GITLAB_OMNIBUS_CONFIG:|external_url 'http://xa-gitlab' gitlab_rails['backup_keep_time'] = 604800 gitlab_rails['time_zone'] = 'Asia/Shanghai' gitlab_rails['gitlab_shell_ssh_port'] = 1022 #gitlab_rails['ldap_enabled'] = true #gitlab_rails['ldap_servers'] = YAML.load \u003c\u003c-EOS #main: # label: 'LDAP' # host: '192.168.1.1' # port: 389 # uid: 'uid' # bind_dn: 'CN=admin,DC=lotbrick,DC=com' # password: 'admin' # user_filter: 'objectclass=person' # base: 'ou=People,dc=xxxxx,dc=com' # active_directory: false # method: 'plain' # attributes: # username: [\"cn\"] # email: ['email'] # name: 'displayName' # first_name: 'givenName' # last_name: 'sn' #EOSports:- '80:80'- '443:443'- '1022:22'volumes:- ./gitlab/config:/etc/gitlab- ./gitlab/logs:/var/log/gitlab- ./gitlab/data:/var/opt/gitlab# - \"/etc/localtime:/etc/localtime:ro\" ","date":"2019-11-27","objectID":"/how-to-install-gitlab-with-docker-compose/:0:0","tags":["devops","gitlab","docker"],"title":"How to Install Gitlab With Docker-Compose","uri":"/how-to-install-gitlab-with-docker-compose/"},{"categories":["devops"],"content":"Reference Docker+GitLab+LDAP部署过程 https://github.com/JyBigBoss/docker-compose/blob/master/gitlab/docker-compose.yaml ","date":"2019-11-27","objectID":"/how-to-install-gitlab-with-docker-compose/:1:0","tags":["devops","gitlab","docker"],"title":"How to Install Gitlab With Docker-Compose","uri":"/how-to-install-gitlab-with-docker-compose/"},{"categories":["linux"],"content":"How to Change Settings After Clone Debian 10 With Cloudinit Enable on Proxmox VE ","date":"2019-11-27","objectID":"/how-to-change-settings-after-clone-debian-10-with-cloudinit-enable-on-proxmox-ve/:0:0","tags":["pve","debian","docker"],"title":"How to Change Settings After Clone Debian 10 With Cloudinit Enable on Proxmox Ve","uri":"/how-to-change-settings-after-clone-debian-10-with-cloudinit-enable-on-proxmox-ve/"},{"categories":["linux"],"content":"Issue I found an issue about create a linux vm as a template with cloudinit enabled. Seem like after cloned the virtual machine, the cloud-init cd rom didn’t be created automatically. We need to delete it,then change setings again to apply the apt source. ","date":"2019-11-27","objectID":"/how-to-change-settings-after-clone-debian-10-with-cloudinit-enable-on-proxmox-ve/:1:0","tags":["pve","debian","docker"],"title":"How to Change Settings After Clone Debian 10 With Cloudinit Enable on Proxmox Ve","uri":"/how-to-change-settings-after-clone-debian-10-with-cloudinit-enable-on-proxmox-ve/"},{"categories":["linux"],"content":"solution #!/usr/bin/env sh mv /etc/apt/sources.list /etc/apt/sources.list.backup wget https://mirrors.ustc.edu.cn/repogen/conf/debian-http-4-buster -O /etc/apt/sources.list apt update \u0026\u0026 apt -y dist-upgrade apt install -y openssh-server git vim cloud-init apt-transport-https sed -i 's/http/https/g' /etc/apt/sources.list apt update \u0026\u0026 apt -y dist-upgrade mv /etc/apt/sources.list /etc/apt/sources.list.backup wget https://mirrors.ustc.edu.cn/repogen/conf/debian-http-4-buster -O /etc/apt/sources.list apt update \u0026\u0026 apt -y dist-upgrade apt install -y openssh-server git vim cloud-init apt-transport-https sed -i 's/http/https/g' /etc/apt/sources.list apt update \u0026\u0026 apt -y dist-upgrade sudo add-apt-repository \\ \"deb [arch=amd64] https://download.docker.com/linux/debian \\ $(lsb_release -cs)\\ stable\" sed -i 's/download.docker.com/mirrors.ustc.edu.cn\\/docker-ce/g' /etc/apt/sources.list cat \u003c\u003c EOF \u003e /etc/default/docker DOCKER_OPTS=\"--registry-mirror=https://docker.mirrors.ustc.edu.cn/\" EOF systemctl restart docker sudo sed -i 's/PasswordAuthentication\\ no/PasswordAuthentication\\ yes/g' /etc/ssh/sshd_config sudo systemctl daemon-reload sudo systemctl restart sshd sudo sed -i 's/#PermitRootLogin\\ prohibit-password/PermitRootLogin\\ yes/g' /etc/ssh/sshd_config sudo systemctl daemon-reload sudo systemctl restart sshd ","date":"2019-11-27","objectID":"/how-to-change-settings-after-clone-debian-10-with-cloudinit-enable-on-proxmox-ve/:2:0","tags":["pve","debian","docker"],"title":"How to Change Settings After Clone Debian 10 With Cloudinit Enable on Proxmox Ve","uri":"/how-to-change-settings-after-clone-debian-10-with-cloudinit-enable-on-proxmox-ve/"},{"categories":["networking"],"content":"How to install Elasticflow Today, i found a good software that is Elasticflow. It is so perfect for us to monitor status of our networking. So I tried to install it will docker-compose way. You know what, after servial hours, fixed a lot bugs it works. ","date":"2019-11-19","objectID":"/how-to-install-elasticflow/:0:0","tags":["elasticflow","docker","docker-compose","netflow","networking"],"title":"How to Install Elasticflow","uri":"/how-to-install-elasticflow/"},{"categories":["networking"],"content":"Download and modified docker-compose.yml for elasticflow # Download `docker-compose.yml` for elasticflow wget https://raw.githubusercontent.com/robcowart/elastiflow/master/docker-compose.yml # version 3.5.2 is now existed. So we need change it to `3.5.1` sed -i 's/robcowart/elastiflow-logstash-oss:3.5.2/robcowart/elastiflow-logstash-oss:3.5.1/g' -i docker-comopse.yml #Change volumes from `/var/lib/elastiflow_es to current folder` sed -i 's/\\/var\\/lib\\/elastiflow_es/.\\/elastiflow_es/g' docker-compose.yml # Create data folder and change folder permission. mkdir elastiflow_es chown -R 1000:1000 ./elastiflow_es ","date":"2019-11-19","objectID":"/how-to-install-elasticflow/:1:0","tags":["elasticflow","docker","docker-compose","netflow","networking"],"title":"How to Install Elasticflow","uri":"/how-to-install-elasticflow/"},{"categories":["networking"],"content":"Up and run docker-compose up -d Then we can access elasticflow via browser http://\u003celastciflow_host_ip\u003e:5601 ","date":"2019-11-19","objectID":"/how-to-install-elasticflow/:2:0","tags":["elasticflow","docker","docker-compose","netflow","networking"],"title":"How to Install Elasticflow","uri":"/how-to-install-elasticflow/"},{"categories":["networking"],"content":"Swell ElastiFlow™ Problem with elasticsearch-oss #428 Running ElastiFlow™ on Docker ","date":"2019-11-19","objectID":"/how-to-install-elasticflow/:3:0","tags":["elasticflow","docker","docker-compose","netflow","networking"],"title":"How to Install Elasticflow","uri":"/how-to-install-elasticflow/"},{"categories":["linux"],"content":"How to Deploy Cloud Images on PVE To deploy cloud images on pve has a lot of benifit, for example, auto expand disk capicity, auto update and auto deploy virtual machine. ","date":"2019-11-14","objectID":"/how-to-deploy-cloud-images-on-pve/:0:0","tags":["pve","cloud-init","linux","debian"],"title":"How to Deploy Cloud Images on Pve","uri":"/how-to-deploy-cloud-images-on-pve/"},{"categories":["linux"],"content":"How to deploy debian 10 colud image on pve I perfer to debian as my first choice between all of the linux distributes. since it has light footprinting and more stable. ","date":"2019-11-14","objectID":"/how-to-deploy-cloud-images-on-pve/:1:0","tags":["pve","cloud-init","linux","debian"],"title":"How to Deploy Cloud Images on Pve","uri":"/how-to-deploy-cloud-images-on-pve/"},{"categories":["virtualization"],"content":"Some tips for management proxmxo VE ","date":"2019-10-22","objectID":"/some_tips_for_management_promxmoxve/:0:0","tags":["pve"],"title":"Some_tips_for_management_promxmoxve","uri":"/some_tips_for_management_promxmoxve/"},{"categories":["virtualization"],"content":"Force shutdown a vm #List all vm in pve qm list # qm unlock the specific vm qm unlock \u003cvmid\u003e # qm stop the specific vm qm stop \u003cvmid\u003e # qm shutdown the specific vm qm shutdown \u003cvmid\u003e # Check vm status qm list | grep \u003cvmid\u003e ","date":"2019-10-22","objectID":"/some_tips_for_management_promxmoxve/:1:0","tags":["pve"],"title":"Some_tips_for_management_promxmoxve","uri":"/some_tips_for_management_promxmoxve/"},{"categories":["linux"],"content":"{% raw %} How to install and configure FreeRADIUS with Active Directory allow specific group of users to authenticate in Debian 10 serval years ago,I built freeradius server in centos 6 work with active directory. It works perfect with wifi authortication and ikev2 vpn authortication. But recently days, I found a bug that the radius server can not limit user access to a group in AD. So I’m trying to build a new freeradius server in debian 10. After a week work.At last I figure it out. ","date":"2019-10-13","objectID":"/freeradius-on-debian-10/:0:0","tags":["freeradius","debian","linux","ldap"],"title":"How to Install and Configure Freeradius With Active Directory Allow Allow Specific Group of Users to Authenticate in Debian 10","uri":"/freeradius-on-debian-10/"},{"categories":["linux"],"content":"Install Software and configuration First thing first, We need install a debian 10 server on your virtualization platform. currently, I installed a debian server on proxmox ve platform. ","date":"2019-10-13","objectID":"/freeradius-on-debian-10/:1:0","tags":["freeradius","debian","linux","ldap"],"title":"How to Install and Configure Freeradius With Active Directory Allow Allow Specific Group of Users to Authenticate in Debian 10","uri":"/freeradius-on-debian-10/"},{"categories":["linux"],"content":"Basic Information Name Value Domain Name TESTING.LOCAL NTDomain Name TESTING RADIUS HOSTNAME MYRADIUS DOMAIN CONTROLLER MYDC02.TESTING.LOCAL DOMAIN CONTROLLER MYDC03.TESTING.LOCAL DOMAIN GROUP VPN_GROUP ","date":"2019-10-13","objectID":"/freeradius-on-debian-10/:1:1","tags":["freeradius","debian","linux","ldap"],"title":"How to Install and Configure Freeradius With Active Directory Allow Allow Specific Group of Users to Authenticate in Debian 10","uri":"/freeradius-on-debian-10/"},{"categories":["linux"],"content":"Change Debian settings Change hostname hostnamectl set-hostname myradius Sync NTP time with domain controller Install chrony apt purge ntp apt install -y chrony vi /etc/chrony/chrony.conf #comment out `pool xxx iburst server \u003cip_of_dc01\u003e iburst server \u003cip_of_dc02\u003e iburst restart chrony service and force update times systemctl restart chrony chronyc sources ","date":"2019-10-13","objectID":"/freeradius-on-debian-10/:1:2","tags":["freeradius","debian","linux","ldap"],"title":"How to Install and Configure Freeradius With Active Directory Allow Allow Specific Group of Users to Authenticate in Debian 10","uri":"/freeradius-on-debian-10/"},{"categories":["linux"],"content":"Install samba and winbind and let Debian Host joined domain Install samba,winbind,krb5-user apt update \u0026\u0026 apt -y dist-ugprade apt install -y samba winbind krb5-user apt -y install winbind libpam-winbind libnss-winbind krb5-config samba-dsdb-modules samba-vfs-modules config samba config file vi /etc/samba/smb.conf In [global] section, change settings form [global] ## Browsing/Identification ### # Change this to the workgroup/NT-domain name your Samba server will part of workgroup = WORKGROUP to [global] ## Browsing/Identification ### # Change this to the workgroup/NT-domain name your Samba server will part of workgroup = TESTING realm = TESTING.LOCAL security = ads idmap config * : backend =tdb idmap config * : range = 3000-7999 idmap config testing : backend = rid idmap config testing : range = 10000-999999 winbind use default domain = true winbind offline logon = false Modify /etc/nsswitch.conf vi /etc/nsswitch.conf Change settings: passwd: files systemd group: files systemd to passwd: files systemd winbind group: files systemd winbind Modify /etc/krb5.conf [libdefaults] default_realm=TESTING.LOCAL ... [realms] TESTING.LOCAL = { kdc = MYDC02.TESTING.LOCAL kdc = MYDC03.TESTING.LOCAL admin_server = TESTING.LOCAL default_domain = TESTING.LOCAL } ... [domain_realm] .testing.local = TESTING.LOCAL testing.local = TESTING.LOCAL Restart OS reboot Join domain #net join -U mypoweruser net ads join -U Administrator Enter Administrator's password: Using short domain name -- TESTING Joined 'SMB' to dns domain '' No DNS domain configured for smb. Unable to perform DNS Update. DNS update failed: NT_STATUS_INVALID_PARAMETER Restart samba and winbind service systemctl restart smbd winbind Testing samba AD authentication: Using winbind: systemctl restart winbind wbinfo -a \u003cuser\u003e%\u003cpassword\u003e You will get the following message if everything is correct: plaintext password authentication succeeded challenge/response password authentication succeeded Using ntlm_auth: ntlm_auth --request-nt-key --domain=TESTING --username=\u003cuser\u003e --password=\u003cpassword\u003e Then you will got success message: NT_STATUS_OK: Success (0x0) ","date":"2019-10-13","objectID":"/freeradius-on-debian-10/:1:3","tags":["freeradius","debian","linux","ldap"],"title":"How to Install and Configure Freeradius With Active Directory Allow Allow Specific Group of Users to Authenticate in Debian 10","uri":"/freeradius-on-debian-10/"},{"categories":["linux"],"content":"Install freeradius Install freeradius apt install -y freeradius Grant permission for freerad user on winbind’s socket: sudo usermod -a -G winbindd_priv freerad sudo chgrp winbindd_priv /var/lib/samba/winbindd_privileged/ Change MACHAP to use ntlm_auth: vi /etc/freeradius/3.0/mods-available/ntlm_auth change program = \"/usr/bin/ntlm_auth --request-nt-key --domain=TESTING --username=%{mschap:User-Name} --password=%{User-Password}\" #if you want to limted to a specific domain group please modified as this: program = \"/usr/bin/ntlm_auth --request-nt-key --domain=$DOMAINNAME--require-membership-of='$DOMAINNAME\\$DOMAIN_GROUP' --username=%{mschap:User-Name} --password=%{User-Password}\" Change module mschap vi /etc/freeradius/3.0/mods-available/mschap change {% raw %} mschap { ntlm_auth = \"/usr/bin/ntlm_auth --request-nt-key --domain=TESTING --username=%{%{Stripped-User-Name}:-%{%{User-Name}:-None}} --challenge=%{%{mschap:Challenge}:-00} --nt-response=%{%{mschap:NT-Response}:-00}\" {% ednraw %} Change eap config. vi /etc/freeradius/3.0/mods-available/eap Change settings of default_eap_type. eap { default_eap_type = md5 to eap { default_eap_type = mschapv2 Then restart freeradius service systemctl restart freeradius Change /etc/freeradius/3.0/sites-enabled/default and /etc/freeradius/3.0/sites-enabled/inner-tunnel authenticate { ntlm_auth Configure RADIUS client vi /etc/freeradius/3.0/clients.conf client 0.0.0.0/0 { secret = myauthpassword shortname = \"nas access\" } restart service of freeradius systemctl restart freeradius Test FreeRADIUS and MSCHAP: radtest -t mschap \u003cuser\u003e \u003cpassword\u003e localhost 0 testing123 The results will be like: Sent Access-Request Id 9 from 0.0.0.0:59244 to 127.0.0.1:1812 length 134 User-Name = \"user\" MS-CHAP-Password = \"password\" NAS-IP-Address = 172.100.99.100 NAS-Port = 0 Message-Authenticator = 0x00 Cleartext-Password = \"password\" MS-CHAP-Challenge = 0x163bc4c900360a08 MS-CHAP-Response = 0x0001000000000000000000000000000000000000000000000000382764ceb05312077d21d71bf53ce917ef2e72a4ff83ca96 Received Access-Accept Id 9 from 127.0.0.1:1812 to 0.0.0.0:0 length 84 MS-CHAP-MPPE-Keys = 0x000000000000000065c53b0540ab884edc6779a1f370c0cb MS-MPPE-Encryption-Policy = Encryption-Allowed MS-MPPE-Encryption-Types = RC4-40or128-bit-Allowed ","date":"2019-10-13","objectID":"/freeradius-on-debian-10/:1:4","tags":["freeradius","debian","linux","ldap"],"title":"How to Install and Configure Freeradius With Active Directory Allow Allow Specific Group of Users to Authenticate in Debian 10","uri":"/freeradius-on-debian-10/"},{"categories":["linux"],"content":"Configure freeradius-ldap Auth with AD To limited to auth a AD group, we need to config freeradius auth with ldap. Install freeradius-ldap apt install -y freeradius-ldap Edit config edit /etc/freeradius/3.0/mods-available/ldap vi /etc/freeradius/3.0/mods-available/ldap ldap { ... server = 'dc01.mydomain.local' server = 'dc02.mydomain.local' port = 389 identity = 'aduser@mydomain.local' password = \u003cmypassword\u003e base_dn = 'dc=mydomain,dc=local' ... } ... update { control:Password-With-Header += 'userPassword' control:NT-Password := 'ntPassword' reply:Reply-Message := 'radiusReplyMessage' reply:Tunnel-Type := 'radiusTunnelType' reply:Tunnel-Medium-Type := 'radiusTunnelMediumType' reply:Tunnel-Private-Group-ID := 'radiusTunnelPrivategroupId' # Where only a list is specified as the RADIUS attribute, # the value of the LDAP attribute is parsed as a valuepair # in the same format as the 'valuepair_attribute' (above). control: += 'radiusControlAttribute' request: += 'radiusRequestAttribute' reply: += 'radiusReplyAttribute' } ... edir = no ... } ... user { ... base_dn = \"${..base_dn}\" ... filter = \"(sAMAccountName=%{%{Stripped-User-Name}:-%{User-Name}})\" ... create a link to mode-enable ln -s /etc/freeradius/3.0/mods-available/ldap /etc/freeradius/3.0/mods-enabled/ edit /etc/freeradius/3.0/sites-available/default vi /etc/freeradius/3.0/sites-available/default ... authorize { ... ldap if ((ok || updated) \u0026\u0026 User-Password) { update { control:Auth-Type := ldap } } ... authenticate { ... Auth-Type LDAP { ldap } ... } ... } Restart freeradius service systemctl restart freeradius freeradius -fX testing ldap auth radtest \u003cdomain_accout\u003e \u003cpassword\u003e localhost 0 testing123 Change /etc/freeradius/3.0/users to allow specific group VPN_GROUP of users to authenticate vi /etc/freeradius/3.0/users DEFAULT Auth-Type = ntlm_auth, LDAP-Group == \"VPN_GROUP\" ... DEFAULT Group != \"VPN_GROUP\", Auth-Type := Reject Reply-Message = \"Your are not permit to access VPN Connectiong\" Change MACHAP to use ntlm_auth: vi /etc/freeradius/3.0/mods-available/ntlm_auth change #if you want to limted to a specific domain group please modified as this: program = \"/usr/bin/ntlm_auth --request-nt-key --domain=$DOMAINNAME--require-membership-of='$DOMAINNAME\\$DOMAIN_GROUP' --username=%{mschap:User-Name} --password=%{User-Password}\" ","date":"2019-10-13","objectID":"/freeradius-on-debian-10/:1:5","tags":["freeradius","debian","linux","ldap"],"title":"How to Install and Configure Freeradius With Active Directory Allow Allow Specific Group of Users to Authenticate in Debian 10","uri":"/freeradius-on-debian-10/"},{"categories":["linux"],"content":"Install mysql,daloradius to make management freeradius with web access Install mariadb database apt install -y mariadb-server ","date":"2019-10-13","objectID":"/freeradius-on-debian-10/:2:0","tags":["freeradius","debian","linux","ldap"],"title":"How to Install and Configure Freeradius With Active Directory Allow Allow Specific Group of Users to Authenticate in Debian 10","uri":"/freeradius-on-debian-10/"},{"categories":["linux"],"content":"Renew certficiation We purchased godaddy certification, so we will replace ssl certification backup default eap configure file cp /etc/freeradius/3.0/mods-enabled/eap /etc/freeradius/3.0/mods-enabled/eap.backup Place pem file to /etc/freeradius/3.0/certs/mycerts ls -al /etc/freeradius/3.0/certs/mycerts -rw-r–r– 1 root root 1728 Feb 21 11:11 mycerts-ca.pem -rw-r–r– 1 root root 1704 Feb 21 11:09 mycerts.key -rw-r–r– 1 root root 2248 Feb 21 11:13 mycerts.pem - Convert crt to pem ```bash openssl x509 -in mycert-ca.crt -out mycert-ca.pem -outform PEM Modified /etc/freeradius/3.0/mods-enabled/eap file. tls-config tls-common { #private_key_password = whatever private_key_file = /etc/freeradius/3.0/certs/vpn.grapecity.com.cn/mycerts.key … certificate_file = /etc/freeradius/3.0/certs/vpn.grapecity.com.cn/mycerts.pem … ca-file = /etc/freeradius/3.0/certs/vpn.grapecity.com.cn/mycerts-ca.pem - Restart freeradius service. ```bash systemctl restart freeradius {% endraw %} ","date":"2019-10-13","objectID":"/freeradius-on-debian-10/:3:0","tags":["freeradius","debian","linux","ldap"],"title":"How to Install and Configure Freeradius With Active Directory Allow Allow Specific Group of Users to Authenticate in Debian 10","uri":"/freeradius-on-debian-10/"},{"categories":["linux"],"content":"Reference WPA2 Enterprise with FreeRADIUS and AD integration on Ubuntu16.04 调试freeradius 3.0 与microsoft AD通过LDAP认证的笔记 Configure FreeRADIUS with Active Driectory allow specific group of users to authenticate Join in Windows Active Directory Domain with Samba Winbind. 802.1x PEAP mschapv2认证证书问题 How to convert .crt to .pem [duplicate] ","date":"2019-10-13","objectID":"/freeradius-on-debian-10/:4:0","tags":["freeradius","debian","linux","ldap"],"title":"How to Install and Configure Freeradius With Active Directory Allow Allow Specific Group of Users to Authenticate in Debian 10","uri":"/freeradius-on-debian-10/"},{"categories":["virtualization"],"content":"How to change default swap settings for Proxmox VE Check Default swap policy from value 60 to 0 cat /proc/sys/vm/swappiness #default value is 60 , it means when the memory remain 60, the swap will be enable Change swap policy # Temp to change default swap enable when memory remain 0. sysctl vm.swappiness=0 # Permanent to change swapp cat \u003c\u003c EOF \u003e\u003e /etc/sysctl.conf vm.swappiness=0 #apply settings sysctl -p # check cat /proc/sys/vm/swappiness Vacuum swap swapoff -a swapon -a ","date":"2019-08-09","objectID":"/how-to-change-default-swap-settings-for-proxmox-ve/:0:0","tags":["pve","linux"],"title":"How to Change Default Swap Settings for Proxmox Ve","uri":"/how-to-change-default-swap-settings-for-proxmox-ve/"},{"categories":["networking"],"content":"How to Setup Vyos as a Firewall ","date":"2019-08-08","objectID":"/how-to-setup-vyos-as-a-firewall/:0:0","tags":["vyos","firewall","network"],"title":"How to Setup Vyos as a Firewall","uri":"/how-to-setup-vyos-as-a-firewall/"},{"categories":["networking"],"content":"Setup interface Interface IP Address Description eth0 pppoe WAN eth1 192.168.68.1 / 24 DMZ eth2 10.0.0.1 / 24 LAN set interface ethernet eth0 pppoe 0 user-id '\u003cpppoe accout\u003e' set interface ethernet eth0 pppoe 0 password '\u003cpppoe password\u003e' set interface ethernet eth0 pppoe 0 name-server 'none' set interface ethernet eth0 description 'WAN' set interface ethernet eth1 address 192.168.68.1/24 set interface ethernet eth1 description DMZ set interface ethernet eth2 address 10.0.0.1/24 set interface ethernet eth2 description 'LAN' ","date":"2019-08-08","objectID":"/how-to-setup-vyos-as-a-firewall/:1:0","tags":["vyos","firewall","network"],"title":"How to Setup Vyos as a Firewall","uri":"/how-to-setup-vyos-as-a-firewall/"},{"categories":["networking"],"content":"DHCP Server set shared-network-name lan.local subnet 192.168.68.0/24 default-router 192.168.68.1 set shared-network-name lan.local subnet 192.168.68.0/24 dns-server 192.168.68.1 set shared-network-name lan.local subnet 192.168.68.0/24 domain-name lan.local set shared-network-name lan.local subnet 192.168.68.0/24 range 0 start 192.168.50 set shared-network-name lan.local subnet 192.168.68.0/24 range 0 stop 192.168.68.254' ","date":"2019-08-08","objectID":"/how-to-setup-vyos-as-a-firewall/:2:0","tags":["vyos","firewall","network"],"title":"How to Setup Vyos as a Firewall","uri":"/how-to-setup-vyos-as-a-firewall/"},{"categories":["networking"],"content":"DNS forwarding set cache-size '0' set listen-address 192.168.68.1 set name-server \u003cpublic dns server ip ,like 8.8.8.8\u003e ","date":"2019-08-08","objectID":"/how-to-setup-vyos-as-a-firewall/:3:0","tags":["vyos","firewall","network"],"title":"How to Setup Vyos as a Firewall","uri":"/how-to-setup-vyos-as-a-firewall/"},{"categories":["networking"],"content":"Set loging banner You are able to set post-login or pre-login messages with the following lines: set system login banner pre-login \"UNAUTHORIZED USE OF THIS SYSTEM IS PROHIBITED\\n\" set system login banner post-login \"Welcome to VyOS\" ","date":"2019-08-08","objectID":"/how-to-setup-vyos-as-a-firewall/:4:0","tags":["vyos","firewall","network"],"title":"How to Setup Vyos as a Firewall","uri":"/how-to-setup-vyos-as-a-firewall/"},{"categories":["networking"],"content":"NAT ","date":"2019-08-08","objectID":"/how-to-setup-vyos-as-a-firewall/:5:0","tags":["vyos","firewall","network"],"title":"How to Setup Vyos as a Firewall","uri":"/how-to-setup-vyos-as-a-firewall/"},{"categories":["networking"],"content":"SNAT set source rule 10 outbound-interface pppoe0 set source rule 10 source address 192.168.68.0/24 set source rule 10 translation address masquerade ","date":"2019-08-08","objectID":"/how-to-setup-vyos-as-a-firewall/:5:1","tags":["vyos","firewall","network"],"title":"How to Setup Vyos as a Firewall","uri":"/how-to-setup-vyos-as-a-firewall/"},{"categories":["networking"],"content":"DNAT set nat destination rule 10 destination address '10.0.0.5' set nat destination rule 10 destination port '3389' set nat destination rule 10 inbound-interface 'eth2' set nat destination rule 10 protocol 'tcp_udp' set nat destination rule 10 translation address '192.168.68.50' set nat destination rule 10 translation port '3389' ","date":"2019-08-08","objectID":"/how-to-setup-vyos-as-a-firewall/:5:2","tags":["vyos","firewall","network"],"title":"How to Setup Vyos as a Firewall","uri":"/how-to-setup-vyos-as-a-firewall/"},{"categories":["networking"],"content":"Default routing set static interface-route 0.0.0.0/0 next-hop-interface pppoe0 ","date":"2019-08-08","objectID":"/how-to-setup-vyos-as-a-firewall/:6:0","tags":["vyos","firewall","network"],"title":"How to Setup Vyos as a Firewall","uri":"/how-to-setup-vyos-as-a-firewall/"},{"categories":["networking"],"content":"Setting of firewall ","date":"2019-08-08","objectID":"/how-to-setup-vyos-as-a-firewall/:7:0","tags":["vyos","firewall","network"],"title":"How to Setup Vyos as a Firewall","uri":"/how-to-setup-vyos-as-a-firewall/"},{"categories":["networking"],"content":"Zone base firewall # Chang firewall to statue firewall set firewall state-policy established action 'accept' set firewall state-policy related action 'accept' set firewall state-policy invalid action 'drop' # Set Zone for interfaces set zone-policy zone dmz interface 'eth1' set zone-policy zone private interface 'eth2' set zone-policy zone local local-zone set zone-policy zone public interface 'pppoe0' # define firewall policy set firewall name dmz-local default-action 'drop' set firewall name dmz-local rule 10 action 'accept' set firewall name dmz-local rule 10 destination address '192.168.68.1' set firewall name dmz-local rule 10 destination port '53' set firewall name dmz-local rule 10 protocol 'udp' set firewall name dmz-local rule 11 action 'accept' set firewall name dmz-local rule 11 icmp type-name 'echo-request' set firewall name dmz-local rule 11 protocol 'icmp' set firewall name dmz-private default-action 'drop' set firewall name dmz-private rule 10 action 'accept' set firewall name dmz-private rule 10 destination address '192.168.68.1' set firewall name dmz-private rule 10 destination port '53' set firewall name dmz-private rule 10 protocol 'udp' set firewall name dmz-public default-action 'accept' set firewall name local-dmz default-action 'accept' set firewall name local-private default-action 'accept' set firewall name local-public default-action 'accept' set firewall name private-dmz default-action 'accept' set firewall name private-local default-action 'accept' # Allow ping set firewall name private-local rule 1 action 'accept' set firewall name private-local rule 1 icmp type-name 'echo-request' set firewall name private-local rule 1 protocol 'icmp' set firewall name private-public default-action 'accept' set firewall name public-dmz default-action 'drop' set firewall name public-local default-action 'drop' set firewall name public-private default-action 'drop' set zone-policy zone dmz default-action 'drop' set zone-policy zone private default-action 'drop' set zone-policy zone public default-action 'drop' set zone-policy zone dmz from local firewall name 'local-dmz' set zone-policy zone dmz from private firewall name 'private-dmz' set zone-policy zone dmz from public firewall name 'public-dmz' set zone-policy zone local from dmz firewall name 'dmz-local' set zone-policy zone local from private firewall name 'private-local' set zone-policy zone local from public firewall name 'public-local' set zone-policy zone private from dmz firewall name 'dmz-private' set zone-policy zone private from local firewall name 'local-private' set zone-policy zone private from public firewall name 'public-private' set zone-policy zone public from dmz firewall name 'dmz-public' set zone-policy zone public from local firewall name 'local-public' set zone-policy zone public from private firewall name 'private-public' set firewall all-ping 'enable' set firewall broadcast-ping 'disable' set firewall config-trap 'disable' set firewall receive-redirects 'disable' set firewall send-redirects 'enable' set firewall source-validation 'disable' set firewall syn-cookies 'enable' set firewall twa-hazards-protection 'disable' set firewall ip-src-route 'disable' set firewall ipv6-receive-redirects 'disable' set firewall ipv6-src-route 'disable' set firewall log-martians 'enable' commit save ","date":"2019-08-08","objectID":"/how-to-setup-vyos-as-a-firewall/:7:1","tags":["vyos","firewall","network"],"title":"How to Setup Vyos as a Firewall","uri":"/how-to-setup-vyos-as-a-firewall/"},{"categories":["Linux"],"content":"How to Deploy Bookstack with Docker Compose Bookstack is a good opensource solution for enterprie document management with light footprinting. It support auth like ldap,active directory,google,azure,aws,slack etc. and it can export document as pdf file. ","date":"2019-07-30","objectID":"/how-to-deploy-bookstack-with-docker-compose/:0:0","tags":["bookstack","document","docker"],"title":"How to Deploy Bookstack With Docker Compose","uri":"/how-to-deploy-bookstack-with-docker-compose/"},{"categories":["Linux"],"content":"Preparation Install docker and docker-compose on debian 10 Information for bookstack installation. Type Value Hostname mybookstack Domainame mydomain.local AD Auth User stevedong Domain Controller IP \u003cdomain contoller IP\u003e Time Zone Asia/Shanghai ","date":"2019-07-30","objectID":"/how-to-deploy-bookstack-with-docker-compose/:1:0","tags":["bookstack","document","docker"],"title":"How to Deploy Bookstack With Docker Compose","uri":"/how-to-deploy-bookstack-with-docker-compose/"},{"categories":["Linux"],"content":"How to fix export chinese pdf document with error Install chinese fonts on docker server host apt install fonts-wqy-microhei fonts-wqy-zenhei xfonts-wqy customized dockerfile with option: environments:# To let bookstack export pdf with chinese language supported.- WKHTMLTOPDF=/usr/bin/wkhtmltopdf# To let bookstack export pdf with chinese language supported.- LANG=C.UTF-8volumes:# To let bookstack export pdf with chinese language supported.- /usr/share/fonts/truetype:/usr/share/fonts/truetype ","date":"2019-07-30","objectID":"/how-to-deploy-bookstack-with-docker-compose/:1:1","tags":["bookstack","document","docker"],"title":"How to Deploy Bookstack With Docker Compose","uri":"/how-to-deploy-bookstack-with-docker-compose/"},{"categories":["Linux"],"content":"Enable Active Directory Auth - AUTH_METHOD=ldap # LDAP Settings - LDAP_SERVER=ldap://\u003cDomain_controller_IP\u003e:389 - LDAP_BASE_DN=dc=mydomain,dc=local - LDAP_DN=stevedong@mydomain.local - LDAP_PASS=\u003cpassword of AD USER\u003e #use double $$ since we are using docker - LDAP_USER_FILTER=(\u0026(sAMAccountName=$${user})) - LDAP_VERSION=3 - LDAP_EMAIL_ATTRIBUT=mail - LDAP_DISPLAY_NAME_ATTRIBUTE=cn ","date":"2019-07-30","objectID":"/how-to-deploy-bookstack-with-docker-compose/:1:2","tags":["bookstack","document","docker"],"title":"How to Deploy Bookstack With Docker Compose","uri":"/how-to-deploy-bookstack-with-docker-compose/"},{"categories":["Linux"],"content":" save follow content to Docker-compose.yml bookstack:image:linuxserver/bookstackcontainer_name:bookstackenvironment:- TZ=Asia/Shanghai- PUID=1000- PGID=1000- DB_HOST=bookstack_db- DB_USER=bookstack- DB_PASS=\u003cchangepassword\u003e- DB_DATABASE=bookstackapp- APP_ENV=production- APP_DEBUG=false#- APP_LANG=zh_CN- APP_URL=http://mybookstack.mydomain.local# General auth# Change to local auth with replace `ldap` with `standard`- AUTH_METHOD=ldap# LDAP Settings- LDAP_SERVER=ldap://\u003cDomain_controller_IP\u003e:389- LDAP_BASE_DN=dc=mydomain,dc=local#- LDAP_DN=cn=stevedong,dc=mydomain,dc=local- LDAP_DN=stevedong@mydomain.local- LDAP_PASS=\u003cpassword of AD USER\u003e#use double $$ since we are using docker- LDAP_USER_FILTER=(\u0026(sAMAccountName=$${user}))- LDAP_VERSION=3- LDAP_EMAIL_ATTRIBUT=mail#- LDAP_EMAIL_ATTRIBUT=false- LDAP_DISPLAY_NAME_ATTRIBUTE=cn#AD Group Sync- LDAP_USER_TO_GROUPS=true- LDAP_GROUP_ATTRIBUTE=\"memberof\"- LDAP_REMOVE_FROM_GROUPS=false- LDAP_AUTO_CONFIRM_EMAIL=true- LDAP_TLS_INSECURE=true# To let bookstack export pdf with chinese language supported.- WKHTMLTOPDF=/usr/bin/wkhtmltopdf# To let bookstack export pdf with chinese language supported.- LANG=C.UTF-8volumes:- ./bookstack_config:/config#mapped docker server fonts to docker- /usr/share/fonts/truetype:/usr/share/fonts/truetypeports:- 80:80restart:unless-stoppeddepends_on:- bookstack_dbbookstack_db:image:linuxserver/mariadbcontainer_name:bookstack_dbenvironment:- PUID=1000- PGID=1000- MYSQL_ROOT_PASSWORD=\u003cmysql password\u003e- TZ=Asia/Shanghai- MYSQL_DATABASE=bookstackapp- MYSQL_USER=bookstack- MYSQL_PASSWORD=\u003cmysql password\u003evolumes:- ./db_config:/configrestart:unless-stopped ","date":"2019-07-30","objectID":"/how-to-deploy-bookstack-with-docker-compose/:2:0","tags":["bookstack","document","docker"],"title":"How to Deploy Bookstack With Docker Compose","uri":"/how-to-deploy-bookstack-with-docker-compose/"},{"categories":["Linux"],"content":"Run Docker-compose change value to fit your environment Run bookstack with command docker-compose up -d Test till you can login bookstack with an active directory user account. ","date":"2019-07-30","objectID":"/how-to-deploy-bookstack-with-docker-compose/:2:1","tags":["bookstack","document","docker"],"title":"How to Deploy Bookstack With Docker Compose","uri":"/how-to-deploy-bookstack-with-docker-compose/"},{"categories":["Linux"],"content":"Change AD user role from viewer to Admin stop docker-compose docker-compose down Modify Docker-compose.yml to change - AUTH_METHOD=ldap to - AUTH_METHOD=standard Start docker-compsoe docker-compsoe up -d Login bookstack with username admin@admin.com and password password.Then change your AD user account role from guest to admin. Then stop docker with command docker-compsoe down Modify Docker-compose.yml to change -AUTH_METHOD=standard back to -AUTH_METHOD=ldap Start bookstack dockers with command docker-composed up -d. Then you can login bookstack with your AD account as an administrator. ","date":"2019-07-30","objectID":"/how-to-deploy-bookstack-with-docker-compose/:2:2","tags":["bookstack","document","docker"],"title":"How to Deploy Bookstack With Docker Compose","uri":"/how-to-deploy-bookstack-with-docker-compose/"},{"categories":["Linux"],"content":"Reference solidnerd/docker-bookstack linuxserver/docker-bookstack Install and Configure BookStack Using Docker and LDAP successage/bookstack ","date":"2019-07-30","objectID":"/how-to-deploy-bookstack-with-docker-compose/:3:0","tags":["bookstack","document","docker"],"title":"How to Deploy Bookstack With Docker Compose","uri":"/how-to-deploy-bookstack-with-docker-compose/"},{"categories":["linux"],"content":"How to configure debian 10 as a docker server After try to install docker in LXC with proxmox ve, there will be some issues to make docker stop working. At last, I gave up and brance pure linux as docker sever. ","date":"2019-07-26","objectID":"/how-to-configure-debian-10-as-a-docker-server/:0:0","tags":["docker","debian","linux","pve"],"title":"How to Configure Debian 10 as a Docker Server","uri":"/how-to-configure-debian-10-as-a-docker-server/"},{"categories":["linux"],"content":"Install debian 10 in promxox ve Configure deiban 10 vm with ‘qemu-agent’ checked. ","date":"2019-07-26","objectID":"/how-to-configure-debian-10-as-a-docker-server/:1:0","tags":["docker","debian","linux","pve"],"title":"How to Configure Debian 10 as a Docker Server","uri":"/how-to-configure-debian-10-as-a-docker-server/"},{"categories":["linux"],"content":"After install deiban 10 Change source list mv /etc/apt/sources.list /etc/apt/sources.list.backup wget https://mirrors.ustc.edu.cn/repogen/conf/debian-http-4-buster -O /etc/apt/sources.list apt update \u0026\u0026 apt -y dist-upgrade apt install -y openssh-server git vim cloud-init apt-transport-https sed -i 's/http/https/g' /etc/apt/sources.list apt update \u0026\u0026 apt -y dist-upgrade To fix perl error warning ","date":"2019-07-26","objectID":"/how-to-configure-debian-10-as-a-docker-server/:2:0","tags":["docker","debian","linux","pve"],"title":"How to Configure Debian 10 as a Docker Server","uri":"/how-to-configure-debian-10-as-a-docker-server/"},{"categories":["linux"],"content":"option 1: export LANGUAGE=en_US.UTF-8 export LANG=en_US.UTF-8 export LC_ALL=en_US.UTF-8 #locale-gen en_US.UTF-8 cat \u003e\u003e /etc/environment \u003c\u003cEOF LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8 EOF ","date":"2019-07-26","objectID":"/how-to-configure-debian-10-as-a-docker-server/:2:1","tags":["docker","debian","linux","pve"],"title":"How to Configure Debian 10 as a Docker Server","uri":"/how-to-configure-debian-10-as-a-docker-server/"},{"categories":["linux"],"content":"option 2: sudo echo \"LC_ALL=en_US.UTF-8\" \u003e\u003e /etc/environment sudo echo \"en_US.UTF-8 UTF-8\" \u003e\u003e /etc/locale.gen sudo echo \"LANG=en_US.UTF-8\" \u003e /etc/locale.conf sudo locale-gen en_US.UTF-8 ","date":"2019-07-26","objectID":"/how-to-configure-debian-10-as-a-docker-server/:2:2","tags":["docker","debian","linux","pve"],"title":"How to Configure Debian 10 as a Docker Server","uri":"/how-to-configure-debian-10-as-a-docker-server/"},{"categories":["linux"],"content":"vim setting How to Setup Vim ","date":"2019-07-26","objectID":"/how-to-configure-debian-10-as-a-docker-server/:3:0","tags":["docker","debian","linux","pve"],"title":"How to Configure Debian 10 as a Docker Server","uri":"/how-to-configure-debian-10-as-a-docker-server/"},{"categories":["linux"],"content":"cloud-init How to Setup Cloud Init in Proxmoxve ","date":"2019-07-26","objectID":"/how-to-configure-debian-10-as-a-docker-server/:4:0","tags":["docker","debian","linux","pve"],"title":"How to Configure Debian 10 as a Docker Server","uri":"/how-to-configure-debian-10-as-a-docker-server/"},{"categories":["linux"],"content":"Install docker on debian 10 ","date":"2019-07-26","objectID":"/how-to-configure-debian-10-as-a-docker-server/:5:0","tags":["docker","debian","linux","pve"],"title":"How to Configure Debian 10 as a Docker Server","uri":"/how-to-configure-debian-10-as-a-docker-server/"},{"categories":["linux"],"content":"Step 1: Install Dependency packages Start the installation by ensuring that all the packages used by docker as dependencies are installed. sudo apt-get -y install \\ apt-transport-https \\ ca-certificates \\ curl \\ gnupg2 \\ software-properties-common ","date":"2019-07-26","objectID":"/how-to-configure-debian-10-as-a-docker-server/:5:1","tags":["docker","debian","linux","pve"],"title":"How to Configure Debian 10 as a Docker Server","uri":"/how-to-configure-debian-10-as-a-docker-server/"},{"categories":["linux"],"content":"Step 2: Add docker’s offical GPG key: Import Docker GPG key used for signing Docker packages: curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add - apt-key fingerprint 0EBFCD88 ","date":"2019-07-26","objectID":"/how-to-configure-debian-10-as-a-docker-server/:5:2","tags":["docker","debian","linux","pve"],"title":"How to Configure Debian 10 as a Docker Server","uri":"/how-to-configure-debian-10-as-a-docker-server/"},{"categories":["linux"],"content":"Step 3: Add the docker repository to Debian 10 sudo add-apt-repository \\ \"deb [arch=amd64] https://download.docker.com/linux/debian \\ $(lsb_release -cs)\\ stable\" ","date":"2019-07-26","objectID":"/how-to-configure-debian-10-as-a-docker-server/:5:3","tags":["docker","debian","linux","pve"],"title":"How to Configure Debian 10 as a Docker Server","uri":"/how-to-configure-debian-10-as-a-docker-server/"},{"categories":["linux"],"content":"Step 4: Change docker repository to mirrors.ustc.edu.cn sed -i 's/download.docker.com/mirrors.ustc.edu.cn\\/docker-ce/g' /etc/apt/sources.list ","date":"2019-07-26","objectID":"/how-to-configure-debian-10-as-a-docker-server/:5:4","tags":["docker","debian","linux","pve"],"title":"How to Configure Debian 10 as a Docker Server","uri":"/how-to-configure-debian-10-as-a-docker-server/"},{"categories":["linux"],"content":"Step 5: Install docker and docker-compose on debian 10 apt update apt -y install docker-ce docker-compose ","date":"2019-07-26","objectID":"/how-to-configure-debian-10-as-a-docker-server/:5:5","tags":["docker","debian","linux","pve"],"title":"How to Configure Debian 10 as a Docker Server","uri":"/how-to-configure-debian-10-as-a-docker-server/"},{"categories":["linux"],"content":"Step 6: Chang docker hub mirrors to mirrors.ustc.edu.cn cat \u003c\u003c EOF \u003e /etc/default/docker DOCKER_OPTS=\"--registry-mirror=https://docker.mirrors.ustc.edu.cn/\" EOF systemctl restart docker ","date":"2019-07-26","objectID":"/how-to-configure-debian-10-as-a-docker-server/:5:6","tags":["docker","debian","linux","pve"],"title":"How to Configure Debian 10 as a Docker Server","uri":"/how-to-configure-debian-10-as-a-docker-server/"},{"categories":["linux"],"content":"Change Some settings ","date":"2019-07-26","objectID":"/how-to-configure-debian-10-as-a-docker-server/:6:0","tags":["docker","debian","linux","pve"],"title":"How to Configure Debian 10 as a Docker Server","uri":"/how-to-configure-debian-10-as-a-docker-server/"},{"categories":["linux"],"content":"Enable password authentication sudo sed -i 's/PasswordAuthentication\\ no/PasswordAuthentication\\ yes/g' /etc/ssh/sshd_config sudo systemctl daemon-reload sudo systemctl restart sshd ","date":"2019-07-26","objectID":"/how-to-configure-debian-10-as-a-docker-server/:6:1","tags":["docker","debian","linux","pve"],"title":"How to Configure Debian 10 as a Docker Server","uri":"/how-to-configure-debian-10-as-a-docker-server/"},{"categories":["linux"],"content":"Permit root can loing with password sudo sed -i 's/#PermitRootLogin\\ prohibit-password/PermitRootLogin\\ yes/g' /etc/ssh/sshd_config sudo systemctl daemon-reload sudo systemctl restart sshd ","date":"2019-07-26","objectID":"/how-to-configure-debian-10-as-a-docker-server/:6:2","tags":["docker","debian","linux","pve"],"title":"How to Configure Debian 10 as a Docker Server","uri":"/how-to-configure-debian-10-as-a-docker-server/"},{"categories":["linux"],"content":"Change machine-id rm /var/lib/dbus/machine-id truncate -s 0 /etc/machine-id ln -s /etc/machine-id /var/lib/dbus/machine-id —THE END— ","date":"2019-07-26","objectID":"/how-to-configure-debian-10-as-a-docker-server/:6:3","tags":["docker","debian","linux","pve"],"title":"How to Configure Debian 10 as a Docker Server","uri":"/how-to-configure-debian-10-as-a-docker-server/"},{"categories":["linux"],"content":"Swell Cannot set LC_CTYPE to default locale: No such file or directory ","date":"2019-07-26","objectID":"/how-to-configure-debian-10-as-a-docker-server/:7:0","tags":["docker","debian","linux","pve"],"title":"How to Configure Debian 10 as a Docker Server","uri":"/how-to-configure-debian-10-as-a-docker-server/"},{"categories":["virtualization"],"content":"How to Modify Template im Proxox VE Sometime I wonder how to convert template back to vm and modify it and convert it back to vm? Here is the solution ","date":"2019-07-18","objectID":"/how-to-modify-template-in-proxmox-ve/:0:0","tags":["pve"],"title":"How to Modify Template in Proxmox Ve","uri":"/how-to-modify-template-in-proxmox-ve/"},{"categories":["virtualization"],"content":"Convert Template to VM Delete template: 1 in vm config. sed -i 's/template:\\ 1//g' /etc/pve/qemu-server/{vm-id}.conf ","date":"2019-07-18","objectID":"/how-to-modify-template-in-proxmox-ve/:1:0","tags":["pve"],"title":"How to Modify Template in Proxmox Ve","uri":"/how-to-modify-template-in-proxmox-ve/"},{"categories":["virtualization"],"content":"Change access permission of VM disk cd /var/lib/vz/images/1{VM-ID}/ chattr -i * chmod 755 * ","date":"2019-07-18","objectID":"/how-to-modify-template-in-proxmox-ve/:2:0","tags":["pve"],"title":"How to Modify Template in Proxmox Ve","uri":"/how-to-modify-template-in-proxmox-ve/"},{"categories":["virtualization"],"content":"Then covert it back to template ","date":"2019-07-18","objectID":"/how-to-modify-template-in-proxmox-ve/:3:0","tags":["pve"],"title":"How to Modify Template in Proxmox Ve","uri":"/how-to-modify-template-in-proxmox-ve/"},{"categories":["virtualization"],"content":"Install Proxmox VE 6.x After installed Proxmox VE 6.x, What we gone do ? ","date":"2019-07-17","objectID":"/install-proxmox-ve-6.x/:0:0","tags":["pve"],"title":"Install Proxmox VE  6.x","uri":"/install-proxmox-ve-6.x/"},{"categories":["virtualization"],"content":"Download Proxmox VE 6.x iSO file in mirrors.ustc.edu.cn Download iso images from here: http://mirrors.ustc.edu.cn/proxmox/iso/ ","date":"2019-07-17","objectID":"/install-proxmox-ve-6.x/:1:0","tags":["pve"],"title":"Install Proxmox VE  6.x","uri":"/install-proxmox-ve-6.x/"},{"categories":["virtualization"],"content":"Fixe Perl error waring export LANGUAGE=en_US.UTF-8 export LANG=en_US.UTF-8 export LC_ALL=en_US.UTF-8 #locale-gen en_US.UTF-8 cat \u003e\u003e /etc/environment \u003c\u003cEOF LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8 EOF ","date":"2019-07-17","objectID":"/install-proxmox-ve-6.x/:2:0","tags":["pve"],"title":"Install Proxmox VE  6.x","uri":"/install-proxmox-ve-6.x/"},{"categories":["virtualization"],"content":"Disable subscription Warning Disable subscription warning via script below 6.3 sed -i.bak \"s/data.status !== 'Active'/false/g\" /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js \u0026\u0026 systemctl restart pveproxy.service Manually disable subscription warning cd /usr/share/javascript/proxmox-widget-toolkit cp proxmoxlib.js proxmoxlib.js.bak nano proxmoxlib.js # change the value as show below if (data.status !== 'Active') { #to if (false) { #restart pveproxy.service systemctl restart pveproxy.service above 6.3 sed -Ezi.bak \"s/(Ext.Msg.show\\(\\{\\s+title: gettext\\('No valid sub)/void\\(\\{ \\/\\/\\1/g\" /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js \u0026\u0026 systemctl restart pveproxy.service ","date":"2019-07-17","objectID":"/install-proxmox-ve-6.x/:3:0","tags":["pve"],"title":"Install Proxmox VE  6.x","uri":"/install-proxmox-ve-6.x/"},{"categories":["virtualization"],"content":"manual setup Manual Steps Here are alternative step by step instructions so you can understand what the above command is doing: Change to working directory cd /usr/share/javascript/proxmox-widget-toolkit Make a backup cp proxmoxlib.js proxmoxlib.js.bak Edit the file nano proxmoxlib.js Locate the following code (Use ctrl+w in nano and search for “No valid subscription”) Ext.Msg.show({ title: gettext('No valid subscription'), Replace “Ext.Msg.show” with “void” void({ //Ext.Msg.show({ title: gettext('No valid subscription'), Restart the Proxmox web service (also be sure to clear your browser cache, depending on the browser you may need to open a new tab or restart the browser) systemctl restart pveproxy.service Additional Notes You can quickly check if the change has been made: grep -n -B 1 'No valid sub' proxmoxlib.js You have three options to revert the changes: Manually edit proxmoxlib.js to to undo the changes you made Restore the backup file you created from the proxmox-widget-toolkit directory mv proxmoxlib.js.bak proxmoxlib.js Reinstall the proxmox-widget-toolkit package from the repository apt-get install --reinstall proxmox-widget-toolkit ","date":"2019-07-17","objectID":"/install-proxmox-ve-6.x/:3:1","tags":["pve"],"title":"Install Proxmox VE  6.x","uri":"/install-proxmox-ve-6.x/"},{"categories":["virtualization"],"content":"Chang apt sourcelist to mirrors.ustc.edu.cn #Backup sources.list mv /etc/apt/sources.list /etc/apt/sources.list.backup # Change debian 10 sourcelist to mirrors.ustc.edu.cn # https://mirrors.ustc.edu.cn/repogen/ cat \u003c\u003c EOF \u003e /etc/apt/sources.list deb https://mirrors.ustc.edu.cn/debian/ buster main contrib non-free deb-src https://mirrors.ustc.edu.cn/debian/ buster main contrib non-free deb https://mirrors.ustc.edu.cn/debian/ buster-updates main contrib non-free deb-src https://mirrors.ustc.edu.cn/debian/ buster-updates main contrib non-free deb https://mirrors.ustc.edu.cn/debian-security/ buster/updates main contrib non-free deb-src https://mirrors.ustc.edu.cn/debian-security/ buster/updates main contrib non-free EOF # Add pve-no-subscription with mirrors.ustc.edu.cn #change pve 5.x update source list cat \u003c\u003c EOF \u003e\u003e /etc/apt/sources.list deb https://mirrors.ustc.edu.cn/proxmox/debian/pve/ buster pve-no-subscription EOF ##change ceph source list to utsc mirrors cat \u003c\u003c EOF \u003e\u003e /etc/apt/sources.list deb https://mirrors.ustc.edu.cn/proxmox/debian/ceph-nautilus/ buster main EOF # Add Key wget https://mirrors.ustc.edu.cn/proxmox/debian/proxmox-ve-release-6.x.gpg -O /etc/apt/trusted.gpg.d/proxmox-ve-release-6.x.gpg # Delete `pve-enterprise.list` rm -rf /etc/apt/sources.list.d/pve-enterprise.list # Upgrade pve apt update \u0026\u0026 apt -y dist-upgrade pveupdate \u0026\u0026 pveupgrade -y # update grub settings update-grub ","date":"2019-07-17","objectID":"/install-proxmox-ve-6.x/:4:0","tags":["pve"],"title":"Install Proxmox VE  6.x","uri":"/install-proxmox-ve-6.x/"},{"categories":["virtualization"],"content":"Install openvswitch apt install -y openvswitch-switch ","date":"2019-07-17","objectID":"/install-proxmox-ve-6.x/:5:0","tags":["pve"],"title":"Install Proxmox VE  6.x","uri":"/install-proxmox-ve-6.x/"},{"categories":["linux"],"content":"How to upgrade RHEL6 with yum repo of centos Today I will show you how to setup rhel6 at proxmox VE. After installed REHL6.8,We didn’t have RHEL subscription,but how to get update and install software via yum ? The right answer is to change yum repo. ","date":"2019-07-15","objectID":"/change-rhel6.8-yum-repo-to-centos6/:0:0","tags":["rhel","linux","pve"],"title":"How to upgrade RHEL6 with yum repo of centos ","uri":"/change-rhel6.8-yum-repo-to-centos6/"},{"categories":["linux"],"content":"Fix perl error export LANGUAGE=en_US.UTF-8 export LANG=en_US.UTF-8 export LC_ALL=en_US.UTF-8 #locale-gen en_US.UTF-8 cat \u003e\u003e /etc/environment \u003c\u003cEOF LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8 EOF ","date":"2019-07-15","objectID":"/change-rhel6.8-yum-repo-to-centos6/:1:0","tags":["rhel","linux","pve"],"title":"How to upgrade RHEL6 with yum repo of centos ","uri":"/change-rhel6.8-yum-repo-to-centos6/"},{"categories":["linux"],"content":"Disable RHEL subsription subscription-manager config --rhsm.manage_repos=0 ","date":"2019-07-15","objectID":"/change-rhel6.8-yum-repo-to-centos6/:2:0","tags":["rhel","linux","pve"],"title":"How to upgrade RHEL6 with yum repo of centos ","uri":"/change-rhel6.8-yum-repo-to-centos6/"},{"categories":["linux"],"content":"Chang yum repo to Centos 6 delete rhel yum software rpm -qa | grep yum rpm -qa | grep yum | xargs rpm -e --nodeps Download centos yum software mkdir -p /tmp/yum cd /tmp/yum wget http://mirrors.163.com/centos/6/os/x86_64/Packages/python-iniparse-0.3.1-2.1.el6.noarch.rpm wget http://mirrors.163.com/centos/6/os/x86_64/Packages/yum-3.2.29-81.el6.centos.noarch.rpm wget http://mirrors.163.com/centos/6/os/x86_64/Packages/yum-metadata-parser-1.1.2-16.el6.x86_64.rpm wget http://mirrors.163.com/centos/6/os/x86_64/Packages/yum-plugin-fastestmirror-1.1.30-41.el6.noarch.rpm Install centos yum software rpm -ivh python-iniparse-0.3.1-2.1.el6.noarch.rpm rpm -ivh yum-metadata-parser-1.1.2-16.el6.x86_64.rpm rpm -ivh yum-3.2.29-81.el6.centos.noarch.rpm yum-plugin-fastestmirror-1.1.30-41.el6.noarch.rpm Delete other repos file rm -rf /etc/yum.repos.d/* Download yum.repos file of centos. wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.163.com/.help/CentOS6-Base-163.repo sed -i 's/$releasever/6/g' CentOS-Base.repo yum clean all yum makecache ","date":"2019-07-15","objectID":"/change-rhel6.8-yum-repo-to-centos6/:3:0","tags":["rhel","linux","pve"],"title":"How to upgrade RHEL6 with yum repo of centos ","uri":"/change-rhel6.8-yum-repo-to-centos6/"},{"categories":["linux"],"content":"Install cloud-ini and qemu-guest-agent yum update yum install cloud-init qemu-guest-agent Then enable qemu agent in option and add a cloud-init disk in vm settings on proxmox ve. ","date":"2019-07-15","objectID":"/change-rhel6.8-yum-repo-to-centos6/:4:0","tags":["rhel","linux","pve"],"title":"How to upgrade RHEL6 with yum repo of centos ","uri":"/change-rhel6.8-yum-repo-to-centos6/"},{"categories":["linux"],"content":"Change SSH config to allow user login with password sudo sed -i 's/PasswordAuthentication\\ no/PasswordAuthentication\\ yes/g' /etc/ssh/sshd_config sudo sed -i 's/#PermitRootLogin\\ prohibit-password/PermitRootLogin\\ yes/g' /etc/ssh/sshd_config sudo service ssh restart sudo service sshd restart ","date":"2019-07-15","objectID":"/change-rhel6.8-yum-repo-to-centos6/:5:0","tags":["rhel","linux","pve"],"title":"How to upgrade RHEL6 with yum repo of centos ","uri":"/change-rhel6.8-yum-repo-to-centos6/"},{"categories":["index"],"content":"How to setup cloud-init in prxmox ve Cloud-init can help us to deploy or change settings of linux virutal machine via api or manually by ourself. There are two ways to setup cloud-init: command line or change settings in GUI. ","date":"2019-07-12","objectID":"/how-to-setup-cloud-init-in-proxmoxve/:0:0","tags":["pve","cloud-init","linux"],"title":"How to Setup Cloud Init in Proxmoxve","uri":"/how-to-setup-cloud-init-in-proxmoxve/"},{"categories":["index"],"content":"Option 1: Download cloud-init image and setup with shell Please reference my blog Build Ubuntu 18.04 server with cloudinit support ","date":"2019-07-12","objectID":"/how-to-setup-cloud-init-in-proxmoxve/:1:0","tags":["pve","cloud-init","linux"],"title":"How to Setup Cloud Init in Proxmoxve","uri":"/how-to-setup-cloud-init-in-proxmoxve/"},{"categories":["index"],"content":"Option 2: Manually Setup cloud-init We can do this with 2 steps. 1st step is to install linux(centos,debian,ubunt etc). ","date":"2019-07-12","objectID":"/how-to-setup-cloud-init-in-proxmoxve/:2:0","tags":["pve","cloud-init","linux"],"title":"How to Setup Cloud Init in Proxmoxve","uri":"/how-to-setup-cloud-init-in-proxmoxve/"},{"categories":["index"],"content":"Install a linux I think this step is easy. ","date":"2019-07-12","objectID":"/how-to-setup-cloud-init-in-proxmoxve/:2:1","tags":["pve","cloud-init","linux"],"title":"How to Setup Cloud Init in Proxmoxve","uri":"/how-to-setup-cloud-init-in-proxmoxve/"},{"categories":["index"],"content":"Install and setup cloud-init After installed an linux. debian/ubuntu apt update \u0026\u0026 apt -y dist-upgrade apt install -y cloud-init RHEL/Centos yum upate yum install -y cloud-init ","date":"2019-07-12","objectID":"/how-to-setup-cloud-init-in-proxmoxve/:2:2","tags":["pve","cloud-init","linux"],"title":"How to Setup Cloud Init in Proxmoxve","uri":"/how-to-setup-cloud-init-in-proxmoxve/"},{"categories":["index"],"content":"Create a cloud-init boot disk shutdown the vm shutdown -h now select the vm in PVE web GUI. Then click Hardware. click Add button and select Cloudinit drive. Select Storage on the storage. Then Click Create to create cloudinit drive. Right click the VM and click start to boot the VM. ","date":"2019-07-12","objectID":"/how-to-setup-cloud-init-in-proxmoxve/:2:3","tags":["pve","cloud-init","linux"],"title":"How to Setup Cloud Init in Proxmoxve","uri":"/how-to-setup-cloud-init-in-proxmoxve/"},{"categories":["index"],"content":"Change some settings After setup cloud-init, Seem like it automatically reset your sourelist to default settings and we couldn’t login via ssh with password. ","date":"2019-07-12","objectID":"/how-to-setup-cloud-init-in-proxmoxve/:3:0","tags":["pve","cloud-init","linux"],"title":"How to Setup Cloud Init in Proxmoxve","uri":"/how-to-setup-cloud-init-in-proxmoxve/"},{"categories":["index"],"content":"Enable password authentication sudo sed -i 's/PasswordAuthentication\\ no/PasswordAuthentication\\ yes/g' /etc/ssh/sshd_config sudo systemctl daemon-reload sudo systemctl restart sshd ","date":"2019-07-12","objectID":"/how-to-setup-cloud-init-in-proxmoxve/:3:1","tags":["pve","cloud-init","linux"],"title":"How to Setup Cloud Init in Proxmoxve","uri":"/how-to-setup-cloud-init-in-proxmoxve/"},{"categories":["index"],"content":"Permit root can loing with password sudo sed -i 's/#PermitRootLogin\\ prohibit-password/PermitRootLogin\\ yes/g' /etc/ssh/sshd_config sudo systemctl daemon-reload sudo systemctl restart sshd ","date":"2019-07-12","objectID":"/how-to-setup-cloud-init-in-proxmoxve/:3:2","tags":["pve","cloud-init","linux"],"title":"How to Setup Cloud Init in Proxmoxve","uri":"/how-to-setup-cloud-init-in-proxmoxve/"},{"categories":["index"],"content":"Change machine-id rm /var/lib/dbus/machine-id truncate -s 0 /etc/machine-id ln -s /etc/machine-id /var/lib/dbus/machine-id ","date":"2019-07-12","objectID":"/how-to-setup-cloud-init-in-proxmoxve/:3:3","tags":["pve","cloud-init","linux"],"title":"How to Setup Cloud Init in Proxmoxve","uri":"/how-to-setup-cloud-init-in-proxmoxve/"},{"categories":["index"],"content":"change hostname with ubuntu 18.04 sed -i 's/preserve_hostname:\\ false/preserve_hostname:\\ true/g' /etc/cloud/cloud.cfg #check settings cat /etc/cloud/cloud.cfg |grep preserve_hostname # If it works and you will see: #preserve_hostname: true #Set hostname to myserver-forloadbalance2-node175 hostnamectl set-hostname myserver-forloadbalance2-node-175 # reboot host reboot now ","date":"2019-07-12","objectID":"/how-to-setup-cloud-init-in-proxmoxve/:3:4","tags":["pve","cloud-init","linux"],"title":"How to Setup Cloud Init in Proxmoxve","uri":"/how-to-setup-cloud-init-in-proxmoxve/"},{"categories":["index"],"content":"Permit modified sourelist sudo cat \u003c\u003c EOF \u003e\u003e /etc/cloud/cloud.cfg apt_preserve_sources_list: true EOF Then you can change sourelist without worried about the sourcelist will be overwriten by cloud-init ","date":"2019-07-12","objectID":"/how-to-setup-cloud-init-in-proxmoxve/:3:5","tags":["pve","cloud-init","linux"],"title":"How to Setup Cloud Init in Proxmoxve","uri":"/how-to-setup-cloud-init-in-proxmoxve/"},{"categories":["index"],"content":" Machines that fight over the same IP address ","date":"2019-07-12","objectID":"/how-to-setup-cloud-init-in-proxmoxve/:4:0","tags":["pve","cloud-init","linux"],"title":"How to Setup Cloud Init in Proxmoxve","uri":"/how-to-setup-cloud-init-in-proxmoxve/"},{"categories":["virtualization"],"content":"Build Ubuntu 18.04 with cloudinit support on proxmox VE To create a ubuntu images from iso file is not flexible for us to clone and deploy a new virtual machine. we can now setting networking, hostname or other configuration before boot the server with configuration. If we want to expand the capicity of the disk, we need a lot of command to reach the goal. With cloudinit images it is easy to do that. ","date":"2019-06-12","objectID":"/build-ubuntu18.04-with-cloudinit-support/:0:0","tags":["pve","linux"],"title":"Build Ubuntu 18.04 server with cloudinit support","uri":"/build-ubuntu18.04-with-cloudinit-support/"},{"categories":["virtualization"],"content":"Downlaod ubuntu 18.04 cloudinit images #download cloudinit images of ubuntu 18.04 for kvm #change directory to dicrectory of image storage. cd /var/lib/vz/images #Option 1: For China User,Download images from ustc mirror for china users wget http://mirrors.ustc.edu.cn/ubuntu-cloud-images/bionic/current/bionic-server-cloudimg-amd64.img # Option 2: For other country,Download images from offical website. wget https://cloud-images.ubuntu.com/bionic/current/bionic-server-cloudimg-amd64.img ","date":"2019-06-12","objectID":"/build-ubuntu18.04-with-cloudinit-support/:1:0","tags":["pve","linux"],"title":"Build Ubuntu 18.04 server with cloudinit support","uri":"/build-ubuntu18.04-with-cloudinit-support/"},{"categories":["virtualization"],"content":"Create cloudinit template # create a new VM with name template-ubuntu18.04server-cloudinit qm create 9000 --memory 4096 --net0 virtio,bridge=vmbr0 --name template-ubuntu18.04server-cloudinit # import the downloaded disk to local-lvm storage qm importdisk 9000 bionic-server-cloudimg-amd64.img local-lvm # Attach the new disk to the vm as scsi driver qm set 9000 --scsihw virtio-scsi-pci --scsi0 local-lvm:9000/vm-9000-disk-0.raw ","date":"2019-06-12","objectID":"/build-ubuntu18.04-with-cloudinit-support/:2:0","tags":["pve","linux"],"title":"Build Ubuntu 18.04 server with cloudinit support","uri":"/build-ubuntu18.04-with-cloudinit-support/"},{"categories":["virtualization"],"content":"Add Cloud-init CDROM drive The next step is to configure a CDROM drive which will be used to pass the Cloud-init data to the VM. qm set 9000 --ide2 local-lvm:cloudinit Make the virtual machine boot from cdrom to make cloud init running firstly. qm set 9000 --boot c --bootdisk scsi0 configure a serial console. qm set 9000 --serial0 socket --vga serial0 Convert the vm to template. We can not run the vm directly. By the way, to convert template to vm just edit vm configuration file to delete template: 1. vi /etc/pve/qemu-server/9000.conf # The delete `template: 1` ","date":"2019-06-12","objectID":"/build-ubuntu18.04-with-cloudinit-support/:3:0","tags":["pve","linux"],"title":"Build Ubuntu 18.04 server with cloudinit support","uri":"/build-ubuntu18.04-with-cloudinit-support/"},{"categories":["virtualization"],"content":"Deploy virtual machine Login PVE web gui and right click template with ID 9000. Change Mode: to Full Clone. Change Name: to ‘xa-wyn-autotest01`(This step also set hostname of the VM.) ","date":"2019-06-12","objectID":"/build-ubuntu18.04-with-cloudinit-support/:4:0","tags":["pve","linux"],"title":"Build Ubuntu 18.04 server with cloudinit support","uri":"/build-ubuntu18.04-with-cloudinit-support/"},{"categories":["virtualization"],"content":"Change VM settings. Select the deployed VM on the pve gui. Then Click Cloud-init. Change “User” to any username you wanted. Change “Password” for the user. SSH public key: you can upload your ssh publickey to the vm. “Options”|“Qemu-Agent” | check on “Qemua Agent” and “Run guest-trim after clone disk”. ","date":"2019-06-12","objectID":"/build-ubuntu18.04-with-cloudinit-support/:5:0","tags":["pve","linux"],"title":"Build Ubuntu 18.04 server with cloudinit support","uri":"/build-ubuntu18.04-with-cloudinit-support/"},{"categories":["virtualization"],"content":"Settings after booting. After booting and the cloudinit will running to setting the vm as you wanted. After that we need change something base on our location. ","date":"2019-06-12","objectID":"/build-ubuntu18.04-with-cloudinit-support/:6:0","tags":["pve","linux"],"title":"Build Ubuntu 18.04 server with cloudinit support","uri":"/build-ubuntu18.04-with-cloudinit-support/"},{"categories":["virtualization"],"content":"Install some software apt update \u0026\u0026 apt -y dist-upgrade apt install -y vim apt-transport-https qemu-guest-agent vim net-tools Then you can check “Summary” of the VM with “IPS’. We cant seed the ip address in pve web gui. ","date":"2019-06-12","objectID":"/build-ubuntu18.04-with-cloudinit-support/:6:1","tags":["pve","linux"],"title":"Build Ubuntu 18.04 server with cloudinit support","uri":"/build-ubuntu18.04-with-cloudinit-support/"},{"categories":["virtualization"],"content":"Chang sourcelist to mirrors.ustc.com Please select right sourcelist to match your linux version. mirrors.ustc.edu.cn repository file generator cat \u003c\u003c EOF \u003e /etc/apt/sources.list deb https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse ## Not recommended # deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse # deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse EOF apt update \u0026\u0026 apt -y dist-upgrade ","date":"2019-06-12","objectID":"/build-ubuntu18.04-with-cloudinit-support/:6:2","tags":["pve","linux"],"title":"Build Ubuntu 18.04 server with cloudinit support","uri":"/build-ubuntu18.04-with-cloudinit-support/"},{"categories":["virtualization"],"content":"Install docker apt-get -y install \\ apt-transport-https \\ ca-certificates \\ curl \\ gnupg-agent \\ software-properties-common \\ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - apt-key fingerprint 0EBFCD88 sudo add-apt-repository \\ \"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\ $(lsb_release -cs)\\ stable\" sed -i 's/download.docker.com/mirrors.ustc.edu.cn\\/docker-ce/g' /etc/apt/sources.list apt-get update apt-get install -y docker-ce docker-ce-cli containerd.io ","date":"2019-06-12","objectID":"/build-ubuntu18.04-with-cloudinit-support/:6:3","tags":["pve","linux"],"title":"Build Ubuntu 18.04 server with cloudinit support","uri":"/build-ubuntu18.04-with-cloudinit-support/"},{"categories":["virtualization"],"content":"Instlal Docker-compose sudo curl -L \"https://github.com/docker/compose/releases/download/1.24.0/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose sudo chmod +x /usr/local/bin/docker-compose sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose ","date":"2019-06-12","objectID":"/build-ubuntu18.04-with-cloudinit-support/:6:4","tags":["pve","linux"],"title":"Build Ubuntu 18.04 server with cloudinit support","uri":"/build-ubuntu18.04-with-cloudinit-support/"},{"categories":["virtualization"],"content":"Extend disk size of vm. Shutdown the vm then change disk size as you wish ,After that start the vm. Extend disk is easy. ","date":"2019-06-12","objectID":"/build-ubuntu18.04-with-cloudinit-support/:6:5","tags":["pve","linux"],"title":"Build Ubuntu 18.04 server with cloudinit support","uri":"/build-ubuntu18.04-with-cloudinit-support/"},{"categories":["virtualization"],"content":"Enable SSH password Authentication sudo sed -i 's/PasswordAuthentication\\ no/PasswordAuthentication\\ yes/g' /et/c/ssh/sshd_config sudo systemctl daemon-reload sudo systemctl restart sshd ","date":"2019-06-12","objectID":"/build-ubuntu18.04-with-cloudinit-support/:6:6","tags":["pve","linux"],"title":"Build Ubuntu 18.04 server with cloudinit support","uri":"/build-ubuntu18.04-with-cloudinit-support/"},{"categories":["virtualization"],"content":"Swell qm command Cloud-Init Support ","date":"2019-06-12","objectID":"/build-ubuntu18.04-with-cloudinit-support/:7:0","tags":["pve","linux"],"title":"Build Ubuntu 18.04 server with cloudinit support","uri":"/build-ubuntu18.04-with-cloudinit-support/"},{"categories":["monitoring"],"content":"How to deploy librenms with docker-compsoe Librenms is a very light and easy handle moniting software. It is suitable for us to monitoring server,network device, printers etc. via snmp. At now, docker is easy for software deployment. After deploy librenms in ubuntu vm, I have a try to deploy librenms with docker-compose. ","date":"2019-06-05","objectID":"/how-to-deploy-librenms-with-docker-compose/:0:0","tags":["librenms"],"title":"How to Deploy Librenms With Docker-compose","uri":"/how-to-deploy-librenms-with-docker-compose/"},{"categories":["monitoring"],"content":"Download config files mkdir librenms-docker-compose cd librenms-docker-compose #Download .env file wget https://raw.githubusercontent.com/librenms/docker/master/examples/compose/.env # Download docker-compose file wget https://raw.githubusercontent.com/librenms/docker/master/examples/compose/docker-compose.yml # Download librenms.env file wget https://raw.githubusercontent.com/librenms/docker/master/examples/compose/librenms.env touch acme.json chmod 600 acme.json ","date":"2019-06-05","objectID":"/how-to-deploy-librenms-with-docker-compose/:1:0","tags":["librenms"],"title":"How to Deploy Librenms With Docker-compose","uri":"/how-to-deploy-librenms-with-docker-compose/"},{"categories":["monitoring"],"content":"librenms server configuration As show below , I will deploy a librenms via docker in my lan network. the host name is mylibrenms,my local domain name is private.local. Type value Librenms host name mylibrenms Domain name private.local Name myname mail account myname@private.local snmp community public ","date":"2019-06-05","objectID":"/how-to-deploy-librenms-with-docker-compose/:2:0","tags":["librenms"],"title":"How to Deploy Librenms With Docker-compose","uri":"/how-to-deploy-librenms-with-docker-compose/"},{"categories":["monitoring"],"content":"Modify .env vi .env Change configure : MYSQL_DATABASE=mylibrenms MYSQL_USER=mylibrenms MYSQL_PASSWORD=mylibrenmspassword SMTP_SERVER=smtp.private.local SMTP_USERNAME=myname@private.local SMTP_PASSWORD=myPassword TZ=Asia/Chongqing PUID=1000 PGID=1000 ","date":"2019-06-05","objectID":"/how-to-deploy-librenms-with-docker-compose/:3:0","tags":["librenms"],"title":"How to Deploy Librenms With Docker-compose","uri":"/how-to-deploy-librenms-with-docker-compose/"},{"categories":["monitoring"],"content":"Modify docker-compose.yml vi docker-compose.yml ","date":"2019-06-05","objectID":"/how-to-deploy-librenms-with-docker-compose/:4:0","tags":["librenms"],"title":"How to Deploy Librenms With Docker-compose","uri":"/how-to-deploy-librenms-with-docker-compose/"},{"categories":["monitoring"],"content":"Change treafik config Change services: | treafik: | command: | - \"--docker.domain=\" to --docker.domain=private.local sed -i 's/\\\"--docker.domain=example.com\\\"/\\\"--docker.domain=private.local\\\"/g' docker-compose.yml Change services: | treafik: | command: | - \"--acme.email=\" to - \"--acme.email=\"myname@private.local\" sed -i 's/\\\"--acme.email=webmaster@example.com\\\"/\\\"--acme.email=myname@private.local\\\"/g' docker-compose.yml ","date":"2019-06-05","objectID":"/how-to-deploy-librenms-with-docker-compose/:4:1","tags":["librenms"],"title":"How to Deploy Librenms With Docker-compose","uri":"/how-to-deploy-librenms-with-docker-compose/"},{"categories":["monitoring"],"content":"Change smtp config Change services: | smtp: | environment: | - \"SERVER_HOSTNAME=\" to - \"SERVER_HOSTNAME=mylibrenms.private.local\" sed -i 's/-\\ \\\"SERVER_HOSTNAME=librenms.example.com\\\"/-\\ \\\"SERVER_HOSTNAME=mylibrenms.private.local\\\"/g' docker-compose.yml ","date":"2019-06-05","objectID":"/how-to-deploy-librenms-with-docker-compose/:4:2","tags":["librenms"],"title":"How to Deploy Librenms With Docker-compose","uri":"/how-to-deploy-librenms-with-docker-compose/"},{"categories":["monitoring"],"content":"Change librenms config Change services: | librenms: | domainname: to domainname: private.local. sed -i 's/domainname:\\ example.com/domainname:\\ private.local/g' docker-compose.yml Change services: | librenms: | hostname: to hostname; mylibrenms. sed -i 's/hostname:\\ librenms/hostname:\\ mylibrenms/g' docker-compose.yml Change services: | librenms: | labels: | - \" traefik.frontend.rule=\" to - \"traefik.frontend.rule=Host:mylibrenms\". sed -i 's/-\\ \\\"traefik.frontend.rule=Host:librenms.example.com\\\"/-\\ \\\"traefik.frontend.rule=Host:mylibrenms.private.local\\\"/g' docker-compose.yml ","date":"2019-06-05","objectID":"/how-to-deploy-librenms-with-docker-compose/:4:3","tags":["librenms"],"title":"How to Deploy Librenms With Docker-compose","uri":"/how-to-deploy-librenms-with-docker-compose/"},{"categories":["monitoring"],"content":"Change cron config Change services: | cron: | domainname: to domainname: private.local. Change services: | cron: | hostname: to hostname: mylibrenms. ","date":"2019-06-05","objectID":"/how-to-deploy-librenms-with-docker-compose/:4:4","tags":["librenms"],"title":"How to Deploy Librenms With Docker-compose","uri":"/how-to-deploy-librenms-with-docker-compose/"},{"categories":["monitoring"],"content":"Change syslog-ng: Change services: | syslog-ng: | domainname: to domainname: private.local. Change services: | syslog-ng: | hostname: to hostname: mylibrenms. ","date":"2019-06-05","objectID":"/how-to-deploy-librenms-with-docker-compose/:4:5","tags":["librenms"],"title":"How to Deploy Librenms With Docker-compose","uri":"/how-to-deploy-librenms-with-docker-compose/"},{"categories":["monitoring"],"content":"Modify librenms.env Change LIBRENMS_SNMP_COMMUNITY= to LIBRENMS_SNMP_COMMUNITY=public. sed -i 's/LIBRENMS_SNMP_COMMUNITY=librenmsdocker/LIBRENMS_SNMP_COMMUNITY=public/g' librenms.env ","date":"2019-06-05","objectID":"/how-to-deploy-librenms-with-docker-compose/:5:0","tags":["librenms"],"title":"How to Deploy Librenms With Docker-compose","uri":"/how-to-deploy-librenms-with-docker-compose/"},{"categories":["monitoring"],"content":"Run docker-compose to up librenms containers docker-compose up -d ","date":"2019-06-05","objectID":"/how-to-deploy-librenms-with-docker-compose/:6:0","tags":["librenms"],"title":"How to Deploy Librenms With Docker-compose","uri":"/how-to-deploy-librenms-with-docker-compose/"},{"categories":["monitoring"],"content":"enable proxmox app moniting cat \u003c\u003c EOF \u003e librenms/config.php \u003c?php $config['enable_proxmox'] = true; EOF ","date":"2019-06-05","objectID":"/how-to-deploy-librenms-with-docker-compose/:6:1","tags":["librenms"],"title":"How to Deploy Librenms With Docker-compose","uri":"/how-to-deploy-librenms-with-docker-compose/"},{"categories":["virtualization","networking"],"content":"How to install dirver of mellanox ConnectX 3 10Gbps netowrk adapter in proxmox-ve 5.x or diban 9 To \u0010 ","date":"2019-06-05","objectID":"/how-to-install-mellanox-connetcx-3-10gbps-network-adpater-in-promxo-ve-5.x-or-debian9.x/:0:0","tags":["pve","storage","networking","mellanox"],"title":"How to Install driver of Mellanox ConnetcX 3 10Gbps Network Adpater in Promxox-VE 5.x or Debian 9","uri":"/how-to-install-mellanox-connetcx-3-10gbps-network-adpater-in-promxo-ve-5.x-or-debian9.x/"},{"categories":["virtualization","networking"],"content":"Install dependencies software #dependencies apt-get -y install debhelper autotools-dev dkms zlib1g-dev python wget quilt python-libxml2 swig dpatch graphviz chrpath pve-headers ","date":"2019-06-05","objectID":"/how-to-install-mellanox-connetcx-3-10gbps-network-adpater-in-promxo-ve-5.x-or-debian9.x/:1:0","tags":["pve","storage","networking","mellanox"],"title":"How to Install driver of Mellanox ConnetcX 3 10Gbps Network Adpater in Promxox-VE 5.x or Debian 9","uri":"/how-to-install-mellanox-connetcx-3-10gbps-network-adpater-in-promxo-ve-5.x-or-debian9.x/"},{"categories":["virtualization","networking"],"content":"Download driver for mellanox connectx 3 for debian 9.6 wget http://content.mellanox.com/ofed/MLNX_EN-4.6-1.0.1.1/mlnx-en-4.6-1.0.1.1-debian9.6-x86_64.tgz ","date":"2019-06-05","objectID":"/how-to-install-mellanox-connetcx-3-10gbps-network-adpater-in-promxo-ve-5.x-or-debian9.x/:2:0","tags":["pve","storage","networking","mellanox"],"title":"How to Install driver of Mellanox ConnetcX 3 10Gbps Network Adpater in Promxox-VE 5.x or Debian 9","uri":"/how-to-install-mellanox-connetcx-3-10gbps-network-adpater-in-promxo-ve-5.x-or-debian9.x/"},{"categories":["virtualization","networking"],"content":"Install drivers tar -zxvf mlnx-en-4.6-1.0.1.1-debian9.6-x86_64.tgz cd mlnx-en-4.6-1.0.1.1-debian9.6-x86_64 chmod +x install ./install --skip-distro-check ","date":"2019-06-05","objectID":"/how-to-install-mellanox-connetcx-3-10gbps-network-adpater-in-promxo-ve-5.x-or-debian9.x/:3:0","tags":["pve","storage","networking","mellanox"],"title":"How to Install driver of Mellanox ConnetcX 3 10Gbps Network Adpater in Promxox-VE 5.x or Debian 9","uri":"/how-to-install-mellanox-connetcx-3-10gbps-network-adpater-in-promxo-ve-5.x-or-debian9.x/"},{"categories":["virtualization","networking"],"content":"Swell Mellanox EN Driver for Linux How-to Guide Install Mellanox Driver Proxmox VE 5.1 ","date":"2019-06-05","objectID":"/how-to-install-mellanox-connetcx-3-10gbps-network-adpater-in-promxo-ve-5.x-or-debian9.x/:4:0","tags":["pve","storage","networking","mellanox"],"title":"How to Install driver of Mellanox ConnetcX 3 10Gbps Network Adpater in Promxox-VE 5.x or Debian 9","uri":"/how-to-install-mellanox-connetcx-3-10gbps-network-adpater-in-promxo-ve-5.x-or-debian9.x/"},{"categories":["virtualization"],"content":"How to resize disk(no lvm) in proxmox ve Today I met a problem that I need to extend disk image for a ubuntu server which is a virtual machine hosted in proxmox ve. ","date":"2019-05-28","objectID":"/pve-how-to-extend-ubuntu-no-lvm-disk-in-proxmox-ve/:0:0","tags":["pve","storage"],"title":"How to Extend Ubuntu No Lvm Disk in Proxmox VE","uri":"/pve-how-to-extend-ubuntu-no-lvm-disk-in-proxmox-ve/"},{"categories":["virtualization"],"content":"Resizing disk images First thing first, I need resize the disk images of the virtual machine.I can do it both in command line or via web management interface. Extend disk size of virtual machine via shell command # Extend disk size of virtual machine with vid 136 with 100G qm resize 136 virtio0 +100G Extend disk size of virtual machien via web interface \"Datacenter\" | \"$Node\" | $VIRTUAL_MACHINE | \"HARDWARE\" | \"HARD DISK(SCSI0)\" | \"RESIZE DISK\" | \"size Increment(GiB) | \"100\" | \"Resize disk\" ","date":"2019-05-28","objectID":"/pve-how-to-extend-ubuntu-no-lvm-disk-in-proxmox-ve/:1:0","tags":["pve","storage"],"title":"How to Extend Ubuntu No Lvm Disk in Proxmox VE","uri":"/pve-how-to-extend-ubuntu-no-lvm-disk-in-proxmox-ve/"},{"categories":["virtualization"],"content":"Enlarge the partition in the virtual disk Login the virtual machine and run command as show below: Show disk partition # show disk device ls -al /dev/sda* Run parted with command parted /dev/sda root@xxx-xxxx-server:~# parted /dev/sda GNU Parted 3.2 Using /dev/sda Welcome to GNU Parted! Type 'help' to view a list of commands. print partitions. print (parted) print Model: QEMU QEMU HARDDISK (scsi) Disk /dev/sda: 389GB Sector size (logical/physical): 512B/512B Partition Table: gpt Disk Flags: Number Start End Size File system Name Flags 1 1049kB 2097kB 1049kB bios_grub 2 30720kB 30GB 30GB ext4 Resize partition with command resizepart. (parted) resizepart select partition which I wanted to resize. 2 Partition number? 2 Enter y to continue. Warning: Partition /dev/sda2 is being used. Are you sure you want to continue? Yes/No? y Enter size 200GB End? [30GB]? 200GB (parted) print Model: QEMU QEMU HARDDISK (scsi) Disk /dev/sda: 389GB Sector size (logical/physical): 512B/512B Partition Table: gpt Disk Flags: Number Start End Size File system Name Flags 1 1049kB 2097kB 1049kB bios_grub 2 2097kB 200GB 200GB ext4 Quit parted with quit. (parted) :quit ","date":"2019-05-28","objectID":"/pve-how-to-extend-ubuntu-no-lvm-disk-in-proxmox-ve/:2:0","tags":["pve","storage"],"title":"How to Extend Ubuntu No Lvm Disk in Proxmox VE","uri":"/pve-how-to-extend-ubuntu-no-lvm-disk-in-proxmox-ve/"},{"categories":["virtualization"],"content":"Enlarge partition with resize2f resize2f /dev/sda2 99G # Show size of partition df -h ","date":"2019-05-28","objectID":"/pve-how-to-extend-ubuntu-no-lvm-disk-in-proxmox-ve/:3:0","tags":["pve","storage"],"title":"How to Extend Ubuntu No Lvm Disk in Proxmox VE","uri":"/pve-how-to-extend-ubuntu-no-lvm-disk-in-proxmox-ve/"},{"categories":["virtualization"],"content":"Swell Shrink Qcow2 Disk Files Resize disks How to Extend primary partition(/dev/sda1) in linux? ","date":"2019-05-28","objectID":"/pve-how-to-extend-ubuntu-no-lvm-disk-in-proxmox-ve/:4:0","tags":["pve","storage"],"title":"How to Extend Ubuntu No Lvm Disk in Proxmox VE","uri":"/pve-how-to-extend-ubuntu-no-lvm-disk-in-proxmox-ve/"},{"categories":["dns"],"content":"How to install overture on Vyos 1.2 I need to build a dns forwarding server to anti dns cache pollution.overture is a good choice for me. it writen in go with good performance. Here we go! Download ovrture you can check overture version from here Login vyos . sudo su overture_version=v1.6.1 sudo mkdir -p /tmp/overture-linux-amd64 cd /tmp sudo curl -fsSLO --compressed \"https://github.com/shawn1m/overture/releases/download/$overture_version/overture-linux-amd64.zip\" sudo unzip /tmp/overture-linux-amd64.zip -d /tmp/overture-linux-amd64 cd /tmp/overture-linux-amd64 sudo curl -fsSLO https://raw.githubusercontent.com/17mon/china_ip_list/master/china_ip_list.txt sudo curl -fsSLO https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt curl https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt | base64 -d | sort -u | sed '/^$\\|@@/d'| sed 's#!.\\+##; s#|##g; s#@##g; s#http:\\/\\/##; s#https:\\/\\/##;' | sed '/\\*/d; /apple\\.com/d; /sina\\.cn/d; /sina\\.com\\.cn/d; /baidu\\.com/d; /qq\\.com/d' | sed '/^[0-9]\\+\\.[0-9]\\+\\.[0-9]\\+\\.[0-9]\\+$/d' | grep '^[0-9a-zA-Z\\.-]\\+$' | grep '\\.' | sed 's#^\\.\\+##' | sort -u \u003e /tmp/temp_gfwlist.txt curl https://raw.githubusercontent.com/hq450/fancyss/master/rules/gfwlist.conf | sed 's/ipset=\\/\\.//g; s/\\/gfwlist//g; /^server/d' \u003e /tmp/temp_koolshare.txt cat /tmp/temp_gfwlist.txt /tmp/temp_koolshare.txt | sort -u \u003e gfw_all_domain.txt #Download china domain list from https://github.com/felixonmars/dnsmasq-china-list curl -fsSLO --compressed https://raw.githubusercontent.com/felixonmars/dnsmasq-china-list/master/accelerated-domains.china.conf #Downlaod apple china domain list curl -fsSLO --compressed https://raw.githubusercontent.com/felixonmars/dnsmasq-china-list/master/apple.china.conf #Download google china domain list curl -fsSLO --compressed https://raw.githubusercontent.com/felixonmars/dnsmasq-china-list/master/google.china.conf #Download cdn in china list curl -fsSLO --compressed https://raw.githubusercontent.com/felixonmars/dnsmasq-china-list/master/cdn-testlist.txt # cat accelerated-domains.china.conf cdn-testlist.txt google.china.conf apple.china.conf | sort -u \u003e\u003e china_domain.txt # Strip useless characters in the configure file. sed -i 's/server=\\///g' china_domain.txt sed -i 's/\\/114.114.114.114//g' china_domain.txt sudo mv config.json config.json.origin sudo bash -c 'cat \u003e /etc/overture/config.json' \u003c\u003cEOF { \"BindAddress\": \"127.0.1.1:53\", \"PrimaryDNS\": [ { \"Name\": \"DNSPod\", \"Address\": \"119.29.29.29:53\", \"Protocol\": \"udp\", \"SOCKS5Address\": \"\", \"Timeout\": 15, \"EDNSClientSubnet\": { \"Policy\": \"disable\", \"ExternalIP\": \"\", \"NoCookie\": true } } ], \"AlternativeDNS\": [ { \"Name\": \"OpenDNS\", \"Address\": \"208.67.222.222:53\", \"Protocol\": \"udp\", \"SOCKS5Address\": \"\", \"Timeout\": 60, \"EDNSClientSubnet\": { \"Policy\": \"disable\", \"ExternalIP\": \"\", \"NoCookie\": true } } ], \"OnlyPrimaryDNS\": false, \"IPv6UseAlternativeDNS\": false, \"WhenPrimaryDnsAnswerNoneUse\": \"AlternativeDNS\", \"IPNetworkFile\": { \"Primary\": \"/etc/overture/china_ip_list.txt\" }, \"DomainFile\": { \"Primary\": \"/etc/overture/china_domain.txt\", \"Alternative\": \"/etc/overture/gfw_all_domain.txt\", \"PrimaryMatcher\": \"suffix-tree\", \"AlternativeMatcher\": \"final\" }, \"MinimumTTL\": 60, \"CacheSize\" : 2000, \"RejectQType\": [255] } EOF sudo cp -af ./overture-linux-amd64 /usr/local/bin/overture sudo chown root:root /usr/local/bin/overture sudo chmod +x /usr/local/bin/overture sudo rsync -r --delete --exclude=\"overture-linux-amd64\" --exclude=\"domain_sample\" --exclude=\"ip_network_sample\" --exclude=\"install.sh\" ./ /etc/overture sudo bash -c 'cat \u003e /lib/systemd/system/overture.service' \u003c\u003c EOF [Unit] Description=overture service [Service] ExecStart=/usr/local/bin/overture -c /etc/overture/config.json -l /etc/overture/overture.log Restart=on-failure RestartSec=42s [Install] WantedBy=multi-user.target EOF sudo systemctl daemon-reload sudo rm -rf /tmp/overture-linux-amd64 sudo rm -rf /tmp/overture-linux-amd64.zip sudo systemctl enable overture sudo systemctl restart o","date":"2019-05-18","objectID":"/how-to-install-overture-on-vyos1.2/:0:0","tags":["overture","vyos"],"title":"How to Install Overture on VYOS 1.2.1 release","uri":"/how-to-install-overture-on-vyos1.2/"},{"categories":["dns"],"content":"Reference overture-on-openwrt ","date":"2019-05-18","objectID":"/how-to-install-overture-on-vyos1.2/:1:0","tags":["overture","vyos"],"title":"How to Install Overture on VYOS 1.2.1 release","uri":"/how-to-install-overture-on-vyos1.2/"},{"categories":["virtualization"],"content":"How solove Proxmox VE 5.4 upgrade issue Today I’m trying to upgrade proxmox ve 5.3. to proxmox ve 5.4 version. But I failed. After install and uninstall proxmox-manager, Force to reboot and the node has kernel panic error. Then force reboot the node. At grub menu select second line to select an old pve kernel to boot proxmox-ve. ","date":"2019-05-15","objectID":"/proxmox-ve-how-to-fixed-upgrade-error/:0:0","tags":["pve"],"title":"Proxmox Ve How to Fixed Upgrade Error","uri":"/proxmox-ve-how-to-fixed-upgrade-error/"},{"categories":["virtualization"],"content":"ERROR 1:“No space left on device” error on latest upgrade If you met issue like this: #gzip: stdout: No space left on device #E: mkinitramfs failure find 141 cpio 141 gzip 1 #update-initramfs: failed for /boot/initrd.img-4.15.18-10-pve with 1. #run-parts: /etc/kernel/postinst.d/initramfs-tools exited with return code 1 #Failed to process /etc/kernel/postinst.d at /var/lib/dpkg/info/pve-#kernel-4.15.18-10-pve.postinst line 19. #dpkg: error processing package pve-kernel-4.15.18-10-pve (--configure): # subprocess installed post-installation script returned error exit status 2 #Setting up pve-xtermjs (3.10.1-1) ... #Setting up libpve-storage-perl (5.0-36) ... #dpkg: dependency problems prevent configuration of pve-kernel-4.15: # pve-kernel-4.15 depends on pve-kernel-4.15.18-10-pve; however: # Package pve-kernel-4.15.18-10-pve is not configured yet. #dpkg: error processing package pve-kernel-4.15 (--configure): # dependency problems - leaving unconfigured #Setting up libpve-guest-common-perl (2.0-19) ... #Setting up qemu-server (5.0-45) ... #Setting up pve-ha-manager (2.0-6) ... #Setting up pve-container (2.0-33) ... #Setting up pve-manager (5.3-8) ... #Processing triggers for initramfs-tools (0.130) ... #update-initramfs: Generating /boot/initrd.img-4.15.18-9-pve #gzip: stdout: No space left on device #E: mkinitramfs failure find 141 cpio 141 gzip 1 #update-initramfs: failed for /boot/initrd.img-4.15.18-9-pve with 1. #dpkg: error processing package initramfs-tools (--configure): # subprocess installed post-installation script returned error exit status 1 #Processing triggers for pve-ha-manager (2.0-6) ... #Processing triggers for systemd (232-25+deb9u8) ... #Errors were encountered while processing: # pve-kernel-4.15.18-10-pve # pve-kernel-4.15 # initramfs-tools #E: Sub-process /usr/bin/dpkg returned an error code (1) You can fixed it with command like this. ","date":"2019-05-15","objectID":"/proxmox-ve-how-to-fixed-upgrade-error/:1:0","tags":["pve"],"title":"Proxmox Ve How to Fixed Upgrade Error","uri":"/proxmox-ve-how-to-fixed-upgrade-error/"},{"categories":["virtualization"],"content":"Solution: List all of pve-kernel, Then remove pve-kernel except pve-kernel current your system running. # Check status of mounted filesytem df -h # Check lvm status lvs -a # List installed pve kernel dpkg -l | grep pve-kernel # Check current running kernel uname -r #Delete kernel old than current running kern apt purge pve-kernel-4.13.16-2-pve ","date":"2019-05-15","objectID":"/proxmox-ve-how-to-fixed-upgrade-error/:1:1","tags":["pve"],"title":"Proxmox Ve How to Fixed Upgrade Error","uri":"/proxmox-ve-how-to-fixed-upgrade-error/"},{"categories":["virtualization"],"content":"Error 2 :The configuration should be retried usingdpkg --configure \u003cpackage\u003e or the configure menu option in dselect When I met error like this. ","date":"2019-05-15","objectID":"/proxmox-ve-how-to-fixed-upgrade-error/:2:0","tags":["pve"],"title":"Proxmox Ve How to Fixed Upgrade Error","uri":"/proxmox-ve-how-to-fixed-upgrade-error/"},{"categories":["virtualization"],"content":"ERROR Detail: dpkg: error processing package pve-ha-manager (–configure): dependency problems - leaving triggers unprocessed Errors were encountered while processing: # $ apt update #$ apt upgrade #Reading package lists... Done #Building dependency tree #Reading state information... Done #Calculating upgrade... Done #0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded. #7 not fully installed or removed. #After this operation, 0 B of additional disk space will be used. #Do you want to continue? [Y/n] y #Setting up pve-cluster (5.0-30) ... #Failed to retrieve unit: No such method 'GetUnit' #Failed to retrieve unit: No such method 'GetUnit' #Failed to start pve-ha-lrm.service: Unknown unit: pve-ha-lrm.service #See system logs and 'systemctl status pve-ha-lrm.service' for details. #dpkg: error processing package pve-cluster (--configure): # subprocess installed post-installation script returned error exit status 1 #dpkg: dependency problems prevent configuration of pve-firewall: # pve-firewall depends on pve-cluster; however: # Package pve-cluster is not configured yet. #dpkg: error processing package pve-firewall (--configure): # dependency problems - leaving unconfigured #dpkg: dependency problems prevent configuration of libpve-guest-common-perl: # libpve-guest-common-perl depends on pve-cluster; however: # Package pve-cluster is not configured yet. #dpkg: error processing package libpve-guest-common-perl (--configure): # dependency problems - leaving unconfigured #dpkg: dependency problems prevent configuration of qemu-server: # qemu-server depends on libpve-guest-common-perl; however: # Package libpve-guest-common-perl is not configured yet. # qemu-server depends on pve-cluster; however: # Package pve-cluster is not configured yet. # qemu-server depends on pve-firewall; however: # Package pve-firewall is not configured yet. #dpkg: error processing package qemu-server (--configure): # dependency problems - leaving unconfigured #dpkg: dependency problems prevent configuration of libpve-storage-perl: # libpve-storage-perl depends on pve-cluster; however: # Package pve-cluster is not configured yet. #dpkg: error processing package libpve-storage-perl (--configure): # dependency problems - leaving unconfigured #dpkg: dependency problems prevent configuration of pve-manager: # pve-manager depends on libpve-guest-common-perl (\u003e= 2.0-14); however: # Package libpve-guest-common-perl is not configured yet. # pve-manager depends on libpve-storage-perl (\u003e= 5.0-18); however: # Package libpve-storage-perl is not configured yet. # pve-manager depends on pve-cluster (\u003e= 5.0-27); however: # Package pve-cluster is not configured yet. # pve-manager depends on pve-firewall; however: # Package pve-firewall is not configured yet. # pve-manager depends on qemu-server (\u003e= 5.0-24); however: # Package qemu-server is not configured yet. #dpkg: error processing package pve-manager (--configure): # dependency problems - leaving unconfigured #dpkg: dependency problems prevent configuration of pve-container: # pve-container depends on libpve-guest-common-perl; however: # Package libpve-guest-common-perl is not configured yet. # pve-container depends on libpve-storage-perl (\u003e= 5.0-18); however: # Package libpve-storage-perl is not configured yet. # pve-container depends on pve-cluster (\u003e= 4.0-8); however: # Package pve-cluster is not configured yet. #dpkg: error processing package pve-container (--configure): # dependency problems - leaving unconfigured #dpkg: dependency problems prevent processing triggers for pve-ha-manager: # pve-ha-manager depends on pve-cluster (\u003e= 3.0-17); however: # Package pve-cluster is not configured yet. # pve-ha-manager depends on qemu-server; however: # Package qemu-server is not configured yet. #dpkg: error processing package pve-ha-manager (--configure): # dependency problems - leaving triggers unprocessed #Errors were encountered while processing: # pve-cluster # pve-firewall # libpve-guest-common-perl # qemu-serve","date":"2019-05-15","objectID":"/proxmox-ve-how-to-fixed-upgrade-error/:2:1","tags":["pve"],"title":"Proxmox Ve How to Fixed Upgrade Error","uri":"/proxmox-ve-how-to-fixed-upgrade-error/"},{"categories":["virtualization"],"content":"Solution: dpkg --configure pve-manager dpkg --configure -a #remove all of these software apt remove pve-cluster pve-ha-manager pve-container pve-manager libpve-storage-perl qemu-server libpve-guest-common-perl pve-firewall proxmox-ve Then reinstall proxmox-ve ","date":"2019-05-15","objectID":"/proxmox-ve-how-to-fixed-upgrade-error/:2:2","tags":["pve"],"title":"Proxmox Ve How to Fixed Upgrade Error","uri":"/proxmox-ve-how-to-fixed-upgrade-error/"},{"categories":["virtualization"],"content":"Remove proxmox-ve ","date":"2019-05-15","objectID":"/proxmox-ve-how-to-fixed-upgrade-error/:3:0","tags":["pve"],"title":"Proxmox Ve How to Fixed Upgrade Error","uri":"/proxmox-ve-how-to-fixed-upgrade-error/"},{"categories":["virtualization"],"content":"Error You are attempting to remove the meta-package 'proxmox-ve'! This is proxmox ve warning. We need follow the instruction to uninstall proxmox ve. # **This is now command, this is prompt dialog** Do you want to continue? [Y/n] y W: (pve-apt-hook) !! WARNING !! W: (pve-apt-hook) You are attempting to remove the meta-package 'proxmox-ve'! W: (pve-apt-hook) W: (pve-apt-hook) If you really you want to permanently remove 'proxmox-ve' from your system, run the following command W: (pve-apt-hook) touch '/please-remove-proxmox-ve' W: (pve-apt-hook) and repeat your apt-get/apt invocation. W: (pve-apt-hook) W: (pve-apt-hook) If you are unsure why 'proxmox-ve' would be removed, please verify W: (pve-apt-hook) - your APT repository settings W: (pve-apt-hook) - that you are using 'apt-get dist-upgrade' or 'apt full-upgrade' to upgrade your system E: Sub-process /usr/share/proxmox-ve/pve-apt-hook returned an error code (1) E: Failure running script /usr/share/proxmox-ve/pve-apt-hook ","date":"2019-05-15","objectID":"/proxmox-ve-how-to-fixed-upgrade-error/:3:1","tags":["pve"],"title":"Proxmox Ve How to Fixed Upgrade Error","uri":"/proxmox-ve-how-to-fixed-upgrade-error/"},{"categories":["virtualization"],"content":"Solution touch '/please-remove-proxmox-ve' ","date":"2019-05-15","objectID":"/proxmox-ve-how-to-fixed-upgrade-error/:3:2","tags":["pve"],"title":"Proxmox Ve How to Fixed Upgrade Error","uri":"/proxmox-ve-how-to-fixed-upgrade-error/"},{"categories":["virtualization"],"content":"Error with update: /bin/sh: 1: /usr/share/proxmox-ve/pve-apt-hook: not found ","date":"2019-05-15","objectID":"/proxmox-ve-how-to-fixed-upgrade-error/:4:0","tags":["pve"],"title":"Proxmox Ve How to Fixed Upgrade Error","uri":"/proxmox-ve-how-to-fixed-upgrade-error/"},{"categories":["virtualization"],"content":"Error: /bin/sh: 1: /usr/share/proxmox-ve/pve-apt-hook: not found E: Sub-process /usr/share/proxmox-ve/pve-apt-hook returned an error code (127) E: Failure running script /usr/share/proxmox-ve/pve-apt-hook ","date":"2019-05-15","objectID":"/proxmox-ve-how-to-fixed-upgrade-error/:4:1","tags":["pve"],"title":"Proxmox Ve How to Fixed Upgrade Error","uri":"/proxmox-ve-how-to-fixed-upgrade-error/"},{"categories":["virtualization"],"content":"Solution: mkdir /usr/share/proxmox-ve touch /usr/share/proxmox-ve/pve-apt-hook chmod u+x /usr/share/proxmox-ve/pve-apt-hook apt install proxmox-ve ","date":"2019-05-15","objectID":"/proxmox-ve-how-to-fixed-upgrade-error/:4:2","tags":["pve"],"title":"Proxmox Ve How to Fixed Upgrade Error","uri":"/proxmox-ve-how-to-fixed-upgrade-error/"},{"categories":["virtualization"],"content":"Swell Upgrade error Installation completely broken Error with update: /bin/sh: 1: /usr/share/proxmox-ve/pve-apt-hook: not found ","date":"2019-05-15","objectID":"/proxmox-ve-how-to-fixed-upgrade-error/:5:0","tags":["pve"],"title":"Proxmox Ve How to Fixed Upgrade Error","uri":"/proxmox-ve-how-to-fixed-upgrade-error/"},{"categories":["virtualization"],"content":"Convert Disk to RAW #qcow2 qemu-img convert -f qcow2 xxx.qcow2 -O raw xxxx.raw #vmware qemu-img convert -f vmdk xxx-flat.vmdk -O raw xxx.raw ","date":"2019-05-07","objectID":"/proxmox-how-to-import-disk-to-ceph/:1:0","tags":["pve","ceph"],"title":"How to Import Disk to Ceph","uri":"/proxmox-how-to-import-disk-to-ceph/"},{"categories":["virtualization"],"content":"Import RAW to ceph rbd list --pool ${ceph-pool-name} rbd import ./xxx.raw --pool ${ceph-pool-name} rbd rm ${old-file-rm} --pool ${ceph-pool-name] rbd mv xxx.raw ${old-file-rm) rbd list --poll ${ceph-pool-name} ","date":"2019-05-07","objectID":"/proxmox-how-to-import-disk-to-ceph/:2:0","tags":["pve","ceph"],"title":"How to Import Disk to Ceph","uri":"/proxmox-how-to-import-disk-to-ceph/"},{"categories":["virtualization"],"content":"Reference 将qcow2格式的虚拟机文件导入到ceph池里 ","date":"2019-05-07","objectID":"/proxmox-how-to-import-disk-to-ceph/:3:0","tags":["pve","ceph"],"title":"How to Import Disk to Ceph","uri":"/proxmox-how-to-import-disk-to-ceph/"},{"categories":["devops"],"content":"Install Kubernetes on Centos 7 ","date":"2019-05-01","objectID":"/install-kubernetes-on-centos7/:0:0","tags":["k8s","devops","centos"],"title":"Install Kubernetes on CentOS7","uri":"/install-kubernetes-on-centos7/"},{"categories":["devops"],"content":"Disable and stop firewall # Disable firewall service systemctl disable firewalld # Stop firewall service systemctl stop firewalld ","date":"2019-05-01","objectID":"/install-kubernetes-on-centos7/:1:0","tags":["k8s","devops","centos"],"title":"Install Kubernetes on CentOS7","uri":"/install-kubernetes-on-centos7/"},{"categories":["devops"],"content":"Install etcd and kubernetes Install etcd and kubernetes and it will also install docker. yum install -y etcd kubernetes ","date":"2019-05-01","objectID":"/install-kubernetes-on-centos7/:2:0","tags":["k8s","devops","centos"],"title":"Install Kubernetes on CentOS7","uri":"/install-kubernetes-on-centos7/"},{"categories":["devops"],"content":"Start service in order systemctl start etcd systemctl start docker systemctl start kube-apiserver systemctl start kube-controller-manager systemctl start kube-scheduler systemctl start kubelet systemctl start start kube-proxy ","date":"2019-05-01","objectID":"/install-kubernetes-on-centos7/:3:0","tags":["k8s","devops","centos"],"title":"Install Kubernetes on CentOS7","uri":"/install-kubernetes-on-centos7/"},{"categories":["linux"],"content":"How to Install CentOS 7 on Proxmox VE Today I want to deploy kubernetes ,follow the book, it need to install centos 7. Okay! Deploy a centos 7 firstly. ","date":"2019-05-01","objectID":"/how-to-install-centos-7-on-proxmox-ve/:0:0","tags":["centos","pve","linux"],"title":"How to Install Centos 7 on Proxmox VE","uri":"/how-to-install-centos-7-on-proxmox-ve/"},{"categories":["linux"],"content":"Install Centos 7 ","date":"2019-05-01","objectID":"/how-to-install-centos-7-on-proxmox-ve/:1:0","tags":["centos","pve","linux"],"title":"How to Install Centos 7 on Proxmox VE","uri":"/how-to-install-centos-7-on-proxmox-ve/"},{"categories":["linux"],"content":"Download latest image of centos 7 Download CentOS 7 images from mirrors.ustc.edu.cn Download centos 7 images form here:CentOS-7-x86_64-Minimal-1810.iso ","date":"2019-05-01","objectID":"/how-to-install-centos-7-on-proxmox-ve/:1:1","tags":["centos","pve","linux"],"title":"How to Install Centos 7 on Proxmox VE","uri":"/how-to-install-centos-7-on-proxmox-ve/"},{"categories":["linux"],"content":"Install Centos 7 Uploading this images to datatstore of pve Create a centos 7 vm on pve boot and install centos step by step. ","date":"2019-05-01","objectID":"/how-to-install-centos-7-on-proxmox-ve/:1:2","tags":["centos","pve","linux"],"title":"How to Install Centos 7 on Proxmox VE","uri":"/how-to-install-centos-7-on-proxmox-ve/"},{"categories":["linux"],"content":"Setup Centos 7 ","date":"2019-05-01","objectID":"/how-to-install-centos-7-on-proxmox-ve/:2:0","tags":["centos","pve","linux"],"title":"How to Install Centos 7 on Proxmox VE","uri":"/how-to-install-centos-7-on-proxmox-ve/"},{"categories":["linux"],"content":"Fixed perl error export LANGUAGE=en_US.UTF-8 export LANG=en_US.UTF-8 export LC_ALL=en_US.UTF-8 #locale-gen en_US.UTF-8 cat \u003e\u003e /etc/environment \u003c\u003cEOF LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8 EOF ","date":"2019-05-01","objectID":"/how-to-install-centos-7-on-proxmox-ve/:3:0","tags":["centos","pve","linux"],"title":"How to Install Centos 7 on Proxmox VE","uri":"/how-to-install-centos-7-on-proxmox-ve/"},{"categories":["linux"],"content":"Set timezone timedatectl list-timezones timedatectl set-timezone Asia/Shanghai ","date":"2019-05-01","objectID":"/how-to-install-centos-7-on-proxmox-ve/:4:0","tags":["centos","pve","linux"],"title":"How to Install Centos 7 on Proxmox VE","uri":"/how-to-install-centos-7-on-proxmox-ve/"},{"categories":["linux"],"content":"Change yum update repo mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup echo \" # CentOS-Base.repo # # The mirror system uses the connecting IP address of the client and the # update status of each mirror to pick mirrors that are updated to and # geographically close to the client. You should use this for CentOS updates # unless you are manually picking other mirrors. # # If the mirrorlist= does not work for you, as a fall back you can try the # remarked out baseurl= line instead. # # [base] name=CentOS-$releasever- Base #mirrorlist=http://mirrorlist.centos.org/?release=$releasever\u0026arch=$basearch\u0026repo=os baseurl=https://mirrors.ustc.edu.cn/centos/$releasever/os/$basearch/ gpgcheck=1 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 #released updates [updates] name=CentOS-$releasever- Updates # mirrorlist=http://mirrorlist.centos.org/?release=$releasever\u0026arch=$basearch\u0026repo=updates baseurl=https://mirrors.ustc.edu.cn/centos/$releasever/updates/$basearch/ gpgcheck=1 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 #additional packages that may be useful [extras] name=CentOS-$releasever- Extras # mirrorlist=http://mirrorlist.centos.org/?release=$releasever\u0026arch=$basearch\u0026repo=extras baseurl=https://mirrors.ustc.edu.cn/centos/$releasever/extras/$basearch/ gpgcheck=1 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 #additional packages that extend functionality of existing packages [centosplus] name=CentOS-$releasever- Plus # mirrorlist=http://mirrorlist.centos.org/?release=$releasever\u0026arch=$basearch\u0026repo=centosplus baseurl=https://mirrors.ustc.edu.cn/centos/$releasever/centosplus/$basearch/ gpgcheck=1 enabled=0 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 \" \u003e /etc/yum.repos.d/CentOS-Base.repo ","date":"2019-05-01","objectID":"/how-to-install-centos-7-on-proxmox-ve/:4:1","tags":["centos","pve","linux"],"title":"How to Install Centos 7 on Proxmox VE","uri":"/how-to-install-centos-7-on-proxmox-ve/"},{"categories":["linux"],"content":"Install epel and change to mirrors.ustc.edu.cn sudo yum install -y epel-release sudo sed -e 's!^mirrorlist=!#mirrorlist=!g' \\ -e 's!^#baseurl=!baseurl=!g' \\ -e 's!//download\\.fedoraproject\\.org/pub!//mirrors.ustc.edu.cn!g' \\ -e 's!http://mirrors\\.ustc!https://mirrors.ustc!g' \\ -i /etc/yum.repos.d/epel.repo /etc/yum.repos.d/epel-testing.repo yum makecache ","date":"2019-05-01","objectID":"/how-to-install-centos-7-on-proxmox-ve/:4:2","tags":["centos","pve","linux"],"title":"How to Install Centos 7 on Proxmox VE","uri":"/how-to-install-centos-7-on-proxmox-ve/"},{"categories":["linux"],"content":"Install software yum install git vim zsh qemu-guest-agent curl wget ","date":"2019-05-01","objectID":"/how-to-install-centos-7-on-proxmox-ve/:4:3","tags":["centos","pve","linux"],"title":"How to Install Centos 7 on Proxmox VE","uri":"/how-to-install-centos-7-on-proxmox-ve/"},{"categories":["linux"],"content":"Setup vim Please follow this article to setup vim: How to Setup Vim ","date":"2019-05-01","objectID":"/how-to-install-centos-7-on-proxmox-ve/:4:4","tags":["centos","pve","linux"],"title":"How to Install Centos 7 on Proxmox VE","uri":"/how-to-install-centos-7-on-proxmox-ve/"},{"categories":["linux"],"content":"Install oh-my-zsh robbyrussell/oh-my-zsh ","date":"2019-05-01","objectID":"/how-to-install-centos-7-on-proxmox-ve/:4:5","tags":["centos","pve","linux"],"title":"How to Install Centos 7 on Proxmox VE","uri":"/how-to-install-centos-7-on-proxmox-ve/"},{"categories":["linux"],"content":"Reference EPEL repo usergude How to Enable EPEL Repository for RHEL/CentOS 7.x/6.x/5.x CentOS 源使用帮助 ","date":"2019-05-01","objectID":"/how-to-install-centos-7-on-proxmox-ve/:5:0","tags":["centos","pve","linux"],"title":"How to Install Centos 7 on Proxmox VE","uri":"/how-to-install-centos-7-on-proxmox-ve/"},{"categories":["nginx"],"content":"How to compile nginx with source code ","date":"2019-04-29","objectID":"/nginx-how-to-compile-nginx-with-source-code/:0:0","tags":["nginx","devops"],"title":"How to Compile Nginx With Source Code","uri":"/nginx-how-to-compile-nginx-with-source-code/"},{"categories":["nginx"],"content":"Download source code Access nginx.org to download latest stable version of nginx. wget https://nginx.org/download/nginx-1.16.0.tar.gz tar -zxvf nginx-1.16.0.tar.gz ","date":"2019-04-29","objectID":"/nginx-how-to-compile-nginx-with-source-code/:1:0","tags":["nginx","devops"],"title":"How to Compile Nginx With Source Code","uri":"/nginx-how-to-compile-nginx-with-source-code/"},{"categories":["nginx"],"content":"Compile source code cd nginx-1.16.0 apt update \u0026\u0026 apt install -y gcc build-essential ./configure --prefix=/home/echowings/nginx make make install ","date":"2019-04-29","objectID":"/nginx-how-to-compile-nginx-with-source-code/:2:0","tags":["nginx","devops"],"title":"How to Compile Nginx With Source Code","uri":"/nginx-how-to-compile-nginx-with-source-code/"},{"categories":["nginx"],"content":"Trouble shooting PCRE missing error. ./configure: error: the HTTP rewrite module requires the PCRE library. You can either disable the module by using —without–http_rewrite_module option, or install the PCRE library into the system, or build the PCRE library statically from the source with nginx by using —with–pcre=\u0026lt;path\u0026gt; option. We need to install pcre library to support it. # Install pcre for rhel or centos yum install pcre-devel # Install pcre for debian or ubuntu apt install -y libpcre3 libpcre3-dev gzip error. ./configure: error: the HTTP gzip module requires the zlib library. You can either disable the module by using --without-http_gzip_module option, or install the zlib library into the system, or build the zlib library statically from the source with nginx by using --with-zlib=\u003cpath\u003e option. We need to install gzip library. # For rhel or centos yum install zlib-devel # For debian or ubuntu apt install zlib1g zlib1g-dev ","date":"2019-04-29","objectID":"/nginx-how-to-compile-nginx-with-source-code/:2:1","tags":["nginx","devops"],"title":"How to Compile Nginx With Source Code","uri":"/nginx-how-to-compile-nginx-with-source-code/"},{"categories":["nginx"],"content":"Reference How to install pcre and pcre-devel on ubuntu using apt-get? ./configure: error: the HTTP gzip module requires the zlib library. Can’t add nginx module - requires zlib ","date":"2019-04-29","objectID":"/nginx-how-to-compile-nginx-with-source-code/:3:0","tags":["nginx","devops"],"title":"How to Compile Nginx With Source Code","uri":"/nginx-how-to-compile-nginx-with-source-code/"},{"categories":["virtualization"],"content":"Build Hyper-Converged Infrastructure with ceph on PVE\" Ceph is really a king of SDS(Software Defin Storage). Opensource. After yeasr evolved, It is enterprise-ready. Today I will build a HCI with ceph on proxmox VE 5.x. It will end nightmare that someone or montoring system tell you that your service was down, you need be a fire fighter to fixed as soon as possible under tremendous pressure form your boss. With proxmox ve , We can say ’no more!\" If one server was down. and HA will handle this issue. HA will take all of virtual machines that hosted on the server which was down, and boot them other nodes automatically. ","date":"2019-04-29","objectID":"/proxmox-ve-build-hyper-converged-infrastructure-with-ceph-on-pve/:0:0","tags":["pve","HCI","ceph","cluster"],"title":"Build Hyper-Converged Infrastructure With Ceph on PVE","uri":"/proxmox-ve-build-hyper-converged-infrastructure-with-ceph-on-pve/"},{"categories":["virtualization"],"content":"Perequest ","date":"2019-04-29","objectID":"/proxmox-ve-build-hyper-converged-infrastructure-with-ceph-on-pve/:1:0","tags":["pve","HCI","ceph","cluster"],"title":"Build Hyper-Converged Infrastructure With Ceph on PVE","uri":"/proxmox-ve-build-hyper-converged-infrastructure-with-ceph-on-pve/"},{"categories":["virtualization"],"content":"Hardware We need got 3 host each of them have two disk(1 for install proxmox-ve 5.x, another for install ceph). Each host i prepared 2 disk . 128GB SSD for intall proxmox ve . another disk is a 1TB sata(It is really slowly, but for lab testing is enough). Host name Host IP Disk01 for install PVE Disk02 for ceph pve-test01 192.168.0.85 /dev/sda /dev/sdb pve-test02 192.168.0.86 /dev/sda /dev/sdb pve-test03 192.168.0.87 /dev/sda /dev/sdb ","date":"2019-04-29","objectID":"/proxmox-ve-build-hyper-converged-infrastructure-with-ceph-on-pve/:1:1","tags":["pve","HCI","ceph","cluster"],"title":"Build Hyper-Converged Infrastructure With Ceph on PVE","uri":"/proxmox-ve-build-hyper-converged-infrastructure-with-ceph-on-pve/"},{"categories":["virtualization"],"content":"Software Install proxmox ve or install proxmox ve 5.x on debian 9 Install proxmox VE 5.x, please follow user guide : Proxmoxve VE V5.x Installation. Install Proxmox VE 5.x on debian 9: How to install ProxmoxVE 5.x on Debian 9. Delete disk partition on 2rd disk. If the disk has data, we can use fdisk /dev/sdb to delete partition of sdb. fdisk /dev/sdb # Repeat enter m to delete partiton of sdb. m # Save configuration with w. w ","date":"2019-04-29","objectID":"/proxmox-ve-build-hyper-converged-infrastructure-with-ceph-on-pve/:1:2","tags":["pve","HCI","ceph","cluster"],"title":"Build Hyper-Converged Infrastructure With Ceph on PVE","uri":"/proxmox-ve-build-hyper-converged-infrastructure-with-ceph-on-pve/"},{"categories":["virtualization"],"content":"Create PVE Cluster Create pve cluster:Operating on proxmox ve node pve-test01 Login via ssh to pve-test01 the first proxmox ve node. Use a unique name for your cluster, the name cannot be changed later. pvecm create mycloud To check the state of cluster: pvecm status To join node to pve cluser:Operate on proxmox ve node. Run coomand like these on the rest of pve nodes. # 192.168.0.85 is the ip address of pve node `pve-test01` pvecm add 192.168.0.85 #Check pve cluster status on `pve-test02` pvecm status ","date":"2019-04-29","objectID":"/proxmox-ve-build-hyper-converged-infrastructure-with-ceph-on-pve/:1:3","tags":["pve","HCI","ceph","cluster"],"title":"Build Hyper-Converged Infrastructure With Ceph on PVE","uri":"/proxmox-ve-build-hyper-converged-infrastructure-with-ceph-on-pve/"},{"categories":["virtualization"],"content":"Setup NTP Servic for proxmox ve If you have a lan ntp server setup like this. mutilpy ntp server separated with blank space. cat \u003e\u003e /etc/systemd/timesyncd.conf \u003c\u003c EOF NTP=192.168.0.2 192.168.0.3 EOF Or if you can sync ntp with aliyun ntp server in china. cat \u003e\u003e /etc/systemd/timesyncd.conf \u003c\u003c EOF NTP=ntp1.aliyun.com ntp2.aliyun.com EOF # Restart systemd-timesyncd service to apply settings systemctl restart systemd-timesyncd ","date":"2019-04-29","objectID":"/proxmox-ve-build-hyper-converged-infrastructure-with-ceph-on-pve/:1:4","tags":["pve","HCI","ceph","cluster"],"title":"Build Hyper-Converged Infrastructure With Ceph on PVE","uri":"/proxmox-ve-build-hyper-converged-infrastructure-with-ceph-on-pve/"},{"categories":["virtualization"],"content":"Ceph Setup Install ceph on all of pve nodes. Run Each host with this command to install ceph on #Install ceph pveceph install Create ceph storage network on master node # pve-node-01(10.32.0.85) pveceph init --network 192.168.0.0/24 Run all the command on each node # Create mon moniting service pveceph createmon # Create OSD service pveceph createdosd /dev/sdb # Check ost status ceph osd stat ceph osd tree Create ceph cluster resource pool on master node ceph osd pool creae pvepool1 128 128 copy storage ID and key to the right position #Run the command on master node. cd /etc/pve/priv/ mkdir ceph cp /etc/ceph/ceph.client.admin.keyring ceph/my-ceph-storage.keyring Check ceph cluster status ceph -s Create OSD on proxmox ve portal your can access portal on each node https://192.168.0.85:8006 https://192.168.0.86:8006 https://192.168.0.87:8006 Create OSD. “Datacenter” | “Storage” | “Add” | “RBD” ","date":"2019-04-29","objectID":"/proxmox-ve-build-hyper-converged-infrastructure-with-ceph-on-pve/:1:5","tags":["pve","HCI","ceph","cluster"],"title":"Build Hyper-Converged Infrastructure With Ceph on PVE","uri":"/proxmox-ve-build-hyper-converged-infrastructure-with-ceph-on-pve/"},{"categories":["virtualization"],"content":"Setup HA ","date":"2019-04-29","objectID":"/proxmox-ve-build-hyper-converged-infrastructure-with-ceph-on-pve/:2:0","tags":["pve","HCI","ceph","cluster"],"title":"Build Hyper-Converged Infrastructure With Ceph on PVE","uri":"/proxmox-ve-build-hyper-converged-infrastructure-with-ceph-on-pve/"},{"categories":["virtualization"],"content":"Create vm or lxc on one node Create a VM or LXC on one node and run it. ","date":"2019-04-29","objectID":"/proxmox-ve-build-hyper-converged-infrastructure-with-ceph-on-pve/:2:1","tags":["pve","HCI","ceph","cluster"],"title":"Build Hyper-Converged Infrastructure With Ceph on PVE","uri":"/proxmox-ve-build-hyper-converged-infrastructure-with-ceph-on-pve/"},{"categories":["virtualization"],"content":"Setup the vm or lxc in HA mode “Datacenter” | “HA” | “Resources” | “Add”. Add: Resource:Container/Virtual Machine Name value VM: ${VM-you-created} Max Restart: 1 Max Relocate: 1 Group request State: started ","date":"2019-04-29","objectID":"/proxmox-ve-build-hyper-converged-infrastructure-with-ceph-on-pve/:2:2","tags":["pve","HCI","ceph","cluster"],"title":"Build Hyper-Converged Infrastructure With Ceph on PVE","uri":"/proxmox-ve-build-hyper-converged-infrastructure-with-ceph-on-pve/"},{"categories":["virtualization"],"content":"Reference High Availability Cluster Proxmox VE 2.0 Cluster PROXMOX+CEPH TO BUILD HCI ","date":"2019-04-29","objectID":"/proxmox-ve-build-hyper-converged-infrastructure-with-ceph-on-pve/:3:0","tags":["pve","HCI","ceph","cluster"],"title":"Build Hyper-Converged Infrastructure With Ceph on PVE","uri":"/proxmox-ve-build-hyper-converged-infrastructure-with-ceph-on-pve/"},{"categories":["virtualization"],"content":"How to install snmp service on proxmox ve How to setup snmp service to let us to use librenms to moniting our proxmox ve healthy status is very important for us. ","date":"2019-04-27","objectID":"/proxmox-ve-how-to-install-snmp-service-on-promxox-ve/:0:0","tags":["pve","snmp","librenms"],"title":"How to Install Snmp Service on Promxox VE","uri":"/proxmox-ve-how-to-install-snmp-service-on-promxox-ve/"},{"categories":["virtualization"],"content":"Install snmpd on proxmox ve apt update apt install -y snmpd ","date":"2019-04-27","objectID":"/proxmox-ve-how-to-install-snmp-service-on-promxox-ve/:1:0","tags":["pve","snmp","librenms"],"title":"How to Install Snmp Service on Promxox VE","uri":"/proxmox-ve-how-to-install-snmp-service-on-promxox-ve/"},{"categories":["virtualization"],"content":"Configure snmpd.conf backup original configuration file. mv /etc/snmp/snmpd.conf /etc/snmp/snmpd.conf.backup Create a new config file. cat \u003e /etc/snmp/snmpd.conf \u003c\u003c EOF # this create a SNMPv1/SNMPv2c community named \"\" # and restricts access to LAN adresses 192.168.0.0/22 (last two 0's are ranges) rocommunity OkayWorld 192.168.0.0/22 # setup info syslocation \"rack 1, room 3, serverrroom\" syscontact \"xxx@xxx.xxx\" # open up agentAddress udp:161 # run as agentuser root # dont log connection from UDP: dontLogTCPWrappersConnects yes # fix for disks larger then 2TB realStorageUnits 0 EOF ","date":"2019-04-27","objectID":"/proxmox-ve-how-to-install-snmp-service-on-promxox-ve/:2:0","tags":["pve","snmp","librenms"],"title":"How to Install Snmp Service on Promxox VE","uri":"/proxmox-ve-how-to-install-snmp-service-on-promxox-ve/"},{"categories":["virtualization"],"content":"Firewall allow lan can access iptables -A INPUT -s 192.168.0.0/22 -p udp --dport 161 -j ACCEPT ","date":"2019-04-27","objectID":"/proxmox-ve-how-to-install-snmp-service-on-promxox-ve/:3:0","tags":["pve","snmp","librenms"],"title":"How to Install Snmp Service on Promxox VE","uri":"/proxmox-ve-how-to-install-snmp-service-on-promxox-ve/"},{"categories":["virtualization"],"content":"Restart snmpd service to apply settings systemctl restart snmpd ","date":"2019-04-27","objectID":"/proxmox-ve-how-to-install-snmp-service-on-promxox-ve/:4:0","tags":["pve","snmp","librenms"],"title":"How to Install Snmp Service on Promxox VE","uri":"/proxmox-ve-how-to-install-snmp-service-on-promxox-ve/"},{"categories":["virtualization"],"content":"Testing snmpwalk -c OkayWorld -v1 $servername$ SNMPv2-MIB::sysDescr.0 ","date":"2019-04-27","objectID":"/proxmox-ve-how-to-install-snmp-service-on-promxox-ve/:5:0","tags":["pve","snmp","librenms"],"title":"How to Install Snmp Service on Promxox VE","uri":"/proxmox-ve-how-to-install-snmp-service-on-promxox-ve/"},{"categories":["virtualization"],"content":"QA ###1. error on subcontainer ‘ia_addr’ insert (-1) After systemd migration starting from Debian 9 Stretch, you need to change /lib/systemd/system/snmpd.service file, not /etc/default/snmpd file: sed -i \"s|-Lsd|-LS6d|\" /lib/systemd/system/snmpd.service systemctl daemon-reload systemctl restart snmpd ","date":"2019-04-27","objectID":"/proxmox-ve-how-to-install-snmp-service-on-promxox-ve/:6:0","tags":["pve","snmp","librenms"],"title":"How to Install Snmp Service on Promxox VE","uri":"/proxmox-ve-how-to-install-snmp-service-on-promxox-ve/"},{"categories":["virtualization"],"content":"Reference how to install SNMP service on Proxmox How can I disable snmpd ia_addr insert messages? [Solved] snmpd gives “error on subcontainer” ‘ia_addr’ insert (-1) warnings ","date":"2019-04-27","objectID":"/proxmox-ve-how-to-install-snmp-service-on-promxox-ve/:7:0","tags":["pve","snmp","librenms"],"title":"How to Install Snmp Service on Promxox VE","uri":"/proxmox-ve-how-to-install-snmp-service-on-promxox-ve/"},{"categories":["Hardware"],"content":"Option 1 :Intel Pentium G4560/8G RAM/ 1TB nvme ssd No. type details quantity UnitPrice Total Price 01 机箱 立人E-T4超薄迷你Thin-ITX立式台式机HTPC电脑空机箱支持VESA背挂 1 ¥90(90.00*1.04) 93.00 02 CPU 英特尔（Intel）奔腾双核G4560 盒装CPU处理器 1 ￥599.00 599.00 03 视频转换接头 山泽(SAMZHE)HDMI转VGA转换器带音频供电接口 高清视频转接头 电脑华为小米盒子接电视投影仪1080p 黑 ZH-22 1 ￥35.90 35.90 04 键鼠套装 罗技（Logitech）MK275 无线光电键鼠套装 无线鼠标无线键盘套装 1 99.00 99 05 主板 ASUS/华硕PRIME H310T2 R2.0 THIN ITX小主板 迷你主机一体机HTPC 1 ¥ 699 755 06 电源适配器 酷鱼19V-7.1A足135W电源适配器/技嘉华硕微星ITX主板通用7.4X5.0 1 ¥129.00 139.32(129 * 1.08) 07 内存 三星内存条8g DDR4 2666 8G 16G笔记本内存条四代吃鸡内存原厂兼容戴尔华硕联想苹果笔记本内存条 1 ¥ 319.00 ¥319.00 08 WiFi套件 INTELAC7265 M.2 NGFF1000M/5G/2.4G/4.0网卡华硕H110T技嘉H110TN 1 ￥135.00 ￥145.80(135*1.08) 09 cpu散热器 ID-COOLING IS-20i 26 Intel平台CPU散热器8CM HTP超薄温控风扇 1 ¥ 38.00 ¥ 38.00 10 SSD 三星（SAMSUNG）1TB SSD固态硬盘 M.2接口(NVMe协议) 970 EVO Plus（MZ-V7S1T0B） 1 ￥1899.00 ￥1899.00 Sum ￥4123.02 ","date":"2019-04-27","objectID":"/diy-thin-itx-pc/:1:0","tags":["DIY","hardware"],"title":"DIY Thin Itx PC","uri":"/diy-thin-itx-pc/"},{"categories":["Hardware"],"content":"Optiion 2 :Intel i5 8400 6 core/8G RAM/ 1TB nvme ssd No. type details quantity UnitPrice Total Price 01 机箱 立人E-T4超薄迷你Thin-ITX立式台式机HTPC电脑空机箱支持VESA背挂 1 ¥90(90.00*1.04) 93.00 02 CPU 英特尔（Intel） i5 8400 酷睿六核 盒装CPU处理器 1 ￥1549.00 1549.00 03 视频转换接头 山泽(SAMZHE)HDMI转VGA转换器带音频供电接口 高清视频转接头 电脑华为小米盒子接电视投影仪1080p 黑 ZH-22 1 ￥35.90 35.90 04 键鼠套装 罗技（Logitech）MK275 无线光电键鼠套装 无线鼠标无线键盘套装 1 99.00 99 05 主板 ASUS/华硕PRIME H310T2 R2.0 THIN ITX小主板 迷你主机一体机HTPC 1 ¥ 699 755 06 电源适配器 酷鱼19V-7.1A足135W电源适配器/技嘉华硕微星ITX主板通用7.4X5.0 1 ¥129.00 139.32(129 * 1.08) 07 内存 三星内存条8g DDR4 2666 8G 16G笔记本内存条四代吃鸡内存原厂兼容戴尔华硕联想苹果笔记本内存条 1 ¥ 319.00 ¥319.00 08 WiFi套件 INTELAC7265 M.2 NGFF1000M/5G/2.4G/4.0网卡华硕H110T技嘉H110TN 1 135.00 ￥145.80(135*1.08) 09 cpu散热器 超薄21mm 1150/1151/ CPU散热器 CPU风扇 适用于立人T3机箱 1 ¥ 89.00 93.45（89*1.05） 10 SSD 三星（SAMSUNG）1TB SSD固态硬盘 M.2接口(NVMe协议) 970 EVO Plus（MZ-V7S1T0B） 1 ￥1899.00 ￥1899.00 Sum ￥5128.47 ","date":"2019-04-27","objectID":"/diy-thin-itx-pc/:2:0","tags":["DIY","hardware"],"title":"DIY Thin Itx PC","uri":"/diy-thin-itx-pc/"},{"categories":["virtualization"],"content":"How to change Network settings of proxmox-ve host without rebooting. Eache time when I want to change network settings like change netowrks and I must reboot to apply it. It is really trouble me. ","date":"2019-04-27","objectID":"/proxmox-ve-how-to-chang-network-of-hosting-without-reboot-proxmox-ve/:0:0","tags":["pve","networking"],"title":"Proxmox Ve How to Chang Network of Hosting Without Reboot Proxmox Ve","uri":"/proxmox-ve-how-to-chang-network-of-hosting-without-reboot-proxmox-ve/"},{"categories":["virtualization"],"content":"Solution Proxmox VE is based on debian. After check interface of network with the path /etc/network/ I found that each time when i change network settings. There will be a named interfaces.new created and it content new network settings wait for apply when i reboot. So I try to backup the old networking interfaces settings and replace it with the new file. ","date":"2019-04-27","objectID":"/proxmox-ve-how-to-chang-network-of-hosting-without-reboot-proxmox-ve/:1:0","tags":["pve","networking"],"title":"Proxmox Ve How to Chang Network of Hosting Without Reboot Proxmox Ve","uri":"/proxmox-ve-how-to-chang-network-of-hosting-without-reboot-proxmox-ve/"},{"categories":["virtualization"],"content":"Manual change Backup interfaces cp /etc/network/interfaces /etc/network/interfaces.old Copy interface.new to interface cp /etc/network/interfaces.new /etc/network/interfaces Reboot networking service systemctl restart networking ","date":"2019-04-27","objectID":"/proxmox-ve-how-to-chang-network-of-hosting-without-reboot-proxmox-ve/:1:1","tags":["pve","networking"],"title":"Proxmox Ve How to Chang Network of Hosting Without Reboot Proxmox Ve","uri":"/proxmox-ve-how-to-chang-network-of-hosting-without-reboot-proxmox-ve/"},{"categories":["virtualization"],"content":"Scirpt change mv interfaces interfaces.backup \u0026\u0026 mv interfaces.new interfaces \u0026\u0026 systemctl restart networking.service ","date":"2019-04-27","objectID":"/proxmox-ve-how-to-chang-network-of-hosting-without-reboot-proxmox-ve/:1:2","tags":["pve","networking"],"title":"Proxmox Ve How to Chang Network of Hosting Without Reboot Proxmox Ve","uri":"/proxmox-ve-how-to-chang-network-of-hosting-without-reboot-proxmox-ve/"},{"categories":["virtualization"],"content":"How to convert vmware esix VM to proxmox-VE VM ","date":"2019-04-26","objectID":"/proxmox-ve-how-to-convert-vmware-esxi-virtual-machine-to-kvm-virtual-machine/:0:0","tags":["pve"],"title":"Proxmox VE - How to Convert Vmware Esxi VM to proxmox-VE VM","uri":"/proxmox-ve-how-to-convert-vmware-esxi-virtual-machine-to-kvm-virtual-machine/"},{"categories":["virtualization"],"content":"V2V Convert vmware virtual machines to kvm virtual machine is easy. ","date":"2019-04-26","objectID":"/proxmox-ve-how-to-convert-vmware-esxi-virtual-machine-to-kvm-virtual-machine/:1:0","tags":["pve"],"title":"Proxmox VE - How to Convert Vmware Esxi VM to proxmox-VE VM","uri":"/proxmox-ve-how-to-convert-vmware-esxi-virtual-machine-to-kvm-virtual-machine/"},{"categories":["virtualization"],"content":"Convert windows VM Remove VWware tools Uninstall vmware tools and reboot vm. Switch disk mode to IDE Download Mergeide, unzip it and run it,then reboot your vm. or you can save follow code as mergeide.reg. Windows Registry Editor Version 5.00 [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CriticalDeviceDatabase\\primary_ide_channel] \"ClassGUID\"=\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\" \"Service\"=\"atapi\" [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CriticalDeviceDatabase\\secondary_ide_channel] \"ClassGUID\"=\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\" \"Service\"=\"atapi\" [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CriticalDeviceDatabase\\*pnp0600] \"ClassGUID\"=\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\" \"Service\"=\"atapi\" [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CriticalDeviceDatabase\\*azt0502] \"ClassGUID\"=\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\" \"Service\"=\"atapi\" [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CriticalDeviceDatabase\\gendisk] \"ClassGUID\"=\"{4D36E967-E325-11CE-BFC1-08002BE10318}\" \"Service\"=\"disk\" [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CriticalDeviceDatabase\\pci#cc_0101] \"ClassGUID\"=\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\" \"Service\"=\"pciide\" [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CriticalDeviceDatabase\\pci#ven_0e11\u0026dev_ae33] \"ClassGUID\"=\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\" \"Service\"=\"pciide\" [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CriticalDeviceDatabase\\pci#ven_1039\u0026dev_0601] \"ClassGUID\"=\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\" \"Service\"=\"pciide\" [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CriticalDeviceDatabase\\pci#ven_1039\u0026dev_5513] \"ClassGUID\"=\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\" \"Service\"=\"pciide\" [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CriticalDeviceDatabase\\pci#ven_1042\u0026dev_1000] \"ClassGUID\"=\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\" \"Service\"=\"pciide\" [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CriticalDeviceDatabase\\pci#ven_105a\u0026dev_4d33] \"ClassGUID\"=\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\" \"Service\"=\"pciide\" [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CriticalDeviceDatabase\\pci#ven_1095\u0026dev_0640] \"ClassGUID\"=\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\" \"Service\"=\"pciide\" [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CriticalDeviceDatabase\\pci#ven_1095\u0026dev_0646] \"ClassGUID\"=\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\" \"Service\"=\"pciide\" [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CriticalDeviceDatabase\\pci#ven_1095\u0026dev_0646\u0026REV_05] \"ClassGUID\"=\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\" \"Service\"=\"pciide\" [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CriticalDeviceDatabase\\pci#ven_1095\u0026dev_0646\u0026REV_07] \"ClassGUID\"=\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\" \"Service\"=\"pciide\" [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CriticalDeviceDatabase\\pci#ven_1095\u0026dev_0648] \"ClassGUID\"=\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\" \"Service\"=\"pciide\" [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CriticalDeviceDatabase\\pci#ven_1095\u0026dev_0649] \"ClassGUID\"=\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\" \"Service\"=\"pciide\" [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CriticalDeviceDatabase\\pci#ven_1097\u0026dev_0038] \"ClassGUID\"=\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\" \"Service\"=\"pciide\" [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CriticalDeviceDatabase\\pci#ven_10ad\u0026dev_0001] \"ClassGUID\"=\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\" \"Service\"=\"pciide\" [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CriticalDeviceDatabase\\pci#ven_10ad\u0026dev_0150] \"ClassGUID\"=\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\" \"Service\"=\"pciide\" [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CriticalDeviceDatabase\\pci#ven_10b9\u0026dev_5215] \"ClassGUID\"=\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\" \"Service\"=\"pciide\" [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CriticalDeviceDatabase\\pci#ven_10b9\u0026dev_5219] \"ClassGUID\"=\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\" \"Service\"=\"pciide\" [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentContr","date":"2019-04-26","objectID":"/proxmox-ve-how-to-convert-vmware-esxi-virtual-machine-to-kvm-virtual-machine/:1:1","tags":["pve"],"title":"Proxmox VE - How to Convert Vmware Esxi VM to proxmox-VE VM","uri":"/proxmox-ve-how-to-convert-vmware-esxi-virtual-machine-to-kvm-virtual-machine/"},{"categories":["virtualization"],"content":"Convert Linux or freebsd VM Copy *-flat.vmdk file to proxmxo ve host. Shutdown your vm. scp root@xx.xx.xx.xx:/vmfs/volumes/datastore/source-vm/source-vm-flat.vmdk /var/lib/vz/images/soure-vm-flate.vmdk Convert vmdk file to qcow2 qemu-img convert -f raw source-vm-flate.vmdk -O qcow2 source-vm-flate.qcow2 Create a vm which os type is same as original vm and replace the disk with source-vm-flate.qcow2 Change Bus/Device in Hard Disk to VirtIO Block. change netork device model type to VirtIO(paravirtualized). ","date":"2019-04-26","objectID":"/proxmox-ve-how-to-convert-vmware-esxi-virtual-machine-to-kvm-virtual-machine/:1:2","tags":["pve"],"title":"Proxmox VE - How to Convert Vmware Esxi VM to proxmox-VE VM","uri":"/proxmox-ve-how-to-convert-vmware-esxi-virtual-machine-to-kvm-virtual-machine/"},{"categories":["virtualization"],"content":"Reference Migration of servers to Proxmox VE Windows VirtIO Drivers ","date":"2019-04-26","objectID":"/proxmox-ve-how-to-convert-vmware-esxi-virtual-machine-to-kvm-virtual-machine/:2:0","tags":["pve"],"title":"Proxmox VE - How to Convert Vmware Esxi VM to proxmox-VE VM","uri":"/proxmox-ve-how-to-convert-vmware-esxi-virtual-machine-to-kvm-virtual-machine/"},{"categories":["networking"],"content":"How to conifugre wireguard in vyos WireGuard is an extremely simple yet fast and modern VPN that utilizes state-of-the-art cryptography. Wireguard Today I will try to deploy wireguard with two vyos . ","date":"2019-04-17","objectID":"/vyos-how-to-setup-wireguard/:0:0","tags":["vyos","wireguard","networking"],"title":"Vyos How to Setup Wireguard","uri":"/vyos-how-to-setup-wireguard/"},{"categories":["networking"],"content":"Site-to-Sit mode Toplogy |--------------------------------| |---------------------------------| | Server | | Client | | |-----cloud ----| wan:${wan-address} | | wireguard tunnel interface:wg01| | Wireguard tunnel interface:wg01 | |--------------------------------| |---------------------------------| ","date":"2019-04-17","objectID":"/vyos-how-to-setup-wireguard/:1:0","tags":["vyos","wireguard","networking"],"title":"Vyos How to Setup Wireguard","uri":"/vyos-how-to-setup-wireguard/"},{"categories":["networking"],"content":"Server configuration # Generates a new keypair, if one exists already is asks you if you want to overwrite the existing one. generate wireguard keypair #Show the private key show wireguard privkey #Show the public key show wireguard pubkey #Enter configuration mode configure #set virtual network interfaces for wireguard set interfaces wireguard wg01 address '172.16.100.1/24' #Set Wireguard listen port set interfaces wireguard wg01 port '50100' #Add CLIENT1 #Set wireguard allow client ip ranges to access. set interfaces wireguard wg01 peer CLIENT1 allowed-ips '172.16.100.2/32' #Set how offten to send keep alives in seconds set interfaces wireguard wg01 peer CLIENT1 persistent-keepalive '15' #Set presharekey set interfaces wireguard wg01 peer CLIENT1 preshared-key gLdIlCM/AsobjfDgFK/cdgsAcjILTzLY4df5BskRcqY= #Set client public key set interfaces wireguard wg01 peer CLIENT1 pubkey '${client-pubkey}' #set static routing. set protocols static interface-route '172.16.100.0/24' next-hop-interface wg01 #make configuration applied commit #Save configuration save ","date":"2019-04-17","objectID":"/vyos-how-to-setup-wireguard/:1:1","tags":["vyos","wireguard","networking"],"title":"Vyos How to Setup Wireguard","uri":"/vyos-how-to-setup-wireguard/"},{"categories":["networking"],"content":"Client configuration 1. vyos wireguard client # Generates a new keypair, if one exists already is asks you if you want to overwrite the existing one. generate wireguard keypair #Show the private key show wireguard privkey #Show the public key show wireguard pubkey #Set wireguard virtual network interfaces set interfaces wireguard wg01 address '172.16.100.2/32' #set wireguard accept packets of network. set interfaces wireguard wg01 peer SERVER allow-ips '0.0.0.0/0' #Set connection to server set interfaces wireguard wg01 peer SERVER endpoint '${server-wan-address}:50100' #Set how offten to send keep alives in seconds set interfaces wireguard wg01 peer SERVEr persistent-keepalive 15 #Set public key for server set interfaces wireguard wg01 peer SERVER pubkey '${server-pubkey}' #Set presharekey set interfaces wireguard wg01 peer SERVER preshared-key gLdIlCM/AsobjfDgFK/cdgsAcjILTzLY4df5BskRcqY= #set static routing to client. set protocols static interface-route '172.16.100.0/24' next-hop-interface wg01 #Make the settings applied! commit #save configuration save #Test wireguard connection 2. macos wireguard client Download wireguard client for macos: Download from AppStore set configure like this [Interface] PrivateKey = AJ2oJcAbxCmeovofOMrJooMMlLMNNKGWuTqffF7oXVU= Address = 172.16.100.3/32 DNS = 1.1.1.1 [Peer] PublicKey = m6oJcAbxCmeovofOMrPCCCDkGWuTqfkGWufeovofEII= PresharedKey = k82ffjxKzt3vy4JR5lUMRUj1eH6PGRkLgqk)knYIHaM= AllowedIPs = 0.0.0.0/0 Endpoint = $WIREGUARD_SERVER_ADDRESS:$PORT PersistentKeepalive = 15 3. andorid/ios Edit a configuration and save it as a config file. install qeencode brew install qrencode qrencode qrencode -t ansiutf8 \u003c client_wireguard_ios.conf with wireguard client scan qr to confirm it. ","date":"2019-04-17","objectID":"/vyos-how-to-setup-wireguard/:1:2","tags":["vyos","wireguard","networking"],"title":"Vyos How to Setup Wireguard","uri":"/vyos-how-to-setup-wireguard/"},{"categories":["networking"],"content":"Reference Wireguard ","date":"2019-04-17","objectID":"/vyos-how-to-setup-wireguard/:2:0","tags":["vyos","wireguard","networking"],"title":"Vyos How to Setup Wireguard","uri":"/vyos-how-to-setup-wireguard/"},{"categories":["docker"],"content":"How to deploy librenms monitoring system with docker container Librenms is a very light and easy handle moniting software. It is suitable for us to monitoring server,networdevice, printer etc via snmp. At now, docker is easy for software deployment. After deploy librenms in ubuntu vm, I have a try to deploy librenms with docker-compose. ","date":"2019-04-16","objectID":"/librenms-deploy-librenms-with-docker-container/:0:0","tags":["docker","librenms","docker-compose","monitoring"],"title":"Librenms Deploy Librenms With Docker Container","uri":"/librenms-deploy-librenms-with-docker-container/"},{"categories":["docker"],"content":"Install librenms with docker-compose mkdir -p librenms-docker-compose cd ./librenms-docker-compose wget https://raw.githubusercontent.com/librenms/docker/master/examples/compose/.env wget https://raw.githubusercontent.com/librenms/docker/master/examples/compose/docker-compose.yml wget https://raw.githubusercontent.com/librenms/docker/master/examples/compose/librenms.env touch acme.json chmod 600 acme.json ","date":"2019-04-16","objectID":"/librenms-deploy-librenms-with-docker-container/:1:0","tags":["docker","librenms","docker-compose","monitoring"],"title":"Librenms Deploy Librenms With Docker Container","uri":"/librenms-deploy-librenms-with-docker-container/"},{"categories":["docker"],"content":"Change docker-compose.yml vi docker-compose.yml change services | traefik | command section. - \"--docker.domain=mydomain.net\" Change services | KEY VALUE hostname mylibrenms domainname mydomain.net Chang syslog-ng section KEY VALUE hostname mylibrenms domainname mydomain.net docker-compose up -d docker-compose logs -f ","date":"2019-04-16","objectID":"/librenms-deploy-librenms-with-docker-container/:1:1","tags":["docker","librenms","docker-compose","monitoring"],"title":"Librenms Deploy Librenms With Docker Container","uri":"/librenms-deploy-librenms-with-docker-container/"},{"categories":["linux","perl"],"content":"How to fix perl LC_ALL ERROR export LANGUAGE=en_US.UTF-8 export LANG=en_US.UTF-8 export LC_ALL=en_US.UTF-8 cat \u003e\u003e /etc/environment \u003c\u003cEOF LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8 EOF ","date":"2019-04-16","objectID":"/how-to-fix-linux-perl-lc_all_error/:0:0","tags":["per-lc_all_error"],"title":"How to Fix Linux Perl LC_ALL_ERROR","uri":"/how-to-fix-linux-perl-lc_all_error/"},{"categories":["virtualization"],"content":"How to ugrade Proxmove VE If your proxmox ve server in china ,Change utsc mirrors will speed up your proxmoxve upgrade speed. Here are the steps. ","date":"2019-04-16","objectID":"/proxmox-ve-how-to-upgrade-pve/:0:0","tags":["PVE"],"title":"Proxmov Ve How to Upgrade Pve","uri":"/proxmox-ve-how-to-upgrade-pve/"},{"categories":["virtualization"],"content":"1. Change debian,pve,ceph upgrade source, and upgrade your PVE #chang debian source list echo \"deb https://mirrors.ustc.edu.cn/debian/ stretch main contrib non-free deb-src https://mirrors.ustc.edu.cn/debian/ stretch main contrib non-free deb https://mirrors.ustc.edu.cn/debian/ stretch-updates main contrib non-free deb-src https://mirrors.ustc.edu.cn/debian/ stretch-updates main contrib non-free deb https://mirrors.ustc.edu.cn/debian/ stretch-backports main contrib non-free deb-src https://mirrors.ustc.edu.cn/debian/ stretch-backports main contrib non-free deb https://mirrors.ustc.edu.cn/debian-security/ stretch/updates main contrib non-free deb-src https://mirrors.ustc.edu.cn/debian-security/ stretch/updates main contrib non-free\" \u003e /etc/apt/sources.list #change pve 5.x update source list to no subscription echo \"deb http://mirrors.ustc.edu.cn/proxmox/debian/pve/ stretch pve-no-subscription\" \u003e /etc/apt/sources.list.d/pve-no-sub.list # Disable pve 5.x enterprise subscription sed -i.bak 's|deb https://enterprise.proxmox.com/debian stretch pve-enterprise|\\# deb https://enterprise.proxmox.com/debian stretch pve-enterprise|' /etc/apt/sources.list.d/pve-enterprise.list #change ceph source list echo \"deb http://mirrors.ustc.edu.cn/proxmox/debian/ceph-luminous stretch main\" \u003e\u003e /etc/apt/sources.list.d/ceph.list # add key wget http://mirrors.ustc.edu.cn/proxmox/debian/proxmox-ve-release-5.x.gpg -O /etc/apt/trusted.gpg.d/proxmox-ve-release-5.x.gpg apt updat \u0026\u0026 apt -y dis-ugprade update-grub ","date":"2019-04-16","objectID":"/proxmox-ve-how-to-upgrade-pve/:1:0","tags":["PVE"],"title":"Proxmov Ve How to Upgrade Pve","uri":"/proxmox-ve-how-to-upgrade-pve/"},{"categories":["virtualization"],"content":"2. Change settings after upgrade This step to change pve upgrade to no subscription and ceph soucre . #change pve 5.x update source list echo \"deb http://mirrors.ustc.edu.cn/proxmox/debian/pve/ stretch pve-no-subscription\" \u003e /etc/apt/sources.list.d/pve-enterprise.list #change ceph source list echo \"deb http://mirrors.ustc.edu.cn/proxmox/debian/ceph-luminous stretch main\" \u003e /etc/apt/sources.list.d/ceph.list # add key wget http://mirrors.ustc.edu.cn/proxmox/debian/proxmox-ve-release-5.x.gpg -O /etc/apt/trusted.gpg.d/proxmox-ve-release-5.x.gpg ","date":"2019-04-16","objectID":"/proxmox-ve-how-to-upgrade-pve/:2:0","tags":["PVE"],"title":"Proxmov Ve How to Upgrade Pve","uri":"/proxmox-ve-how-to-upgrade-pve/"},{"categories":["docker"],"content":"How to build a kms server ","date":"2019-04-11","objectID":"/how-to-build-a-kms-server/:0:0","tags":["docker","kms"],"title":"How to Build a Kms Server","uri":"/how-to-build-a-kms-server/"},{"categories":["docker"],"content":"Option 1: docker mode docker pull luodaoyi/kms-server docker run -itd -p 1688:1688 --name kms luodaoyi/kms-server docker update --restart=always $dockername ","date":"2019-04-11","objectID":"/how-to-build-a-kms-server/:1:0","tags":["docker","kms"],"title":"How to Build a Kms Server","uri":"/how-to-build-a-kms-server/"},{"categories":["docker"],"content":"Option 2: docker compose docker-compose.yml version:'3'services:frontend:image:luodaoyi/kms-servercontainer_name:mykmsports:- 1688:1688restart:always docker-compose start the container docker-compose up -d ","date":"2019-04-11","objectID":"/how-to-build-a-kms-server/:2:0","tags":["docker","kms"],"title":"How to Build a Kms Server","uri":"/how-to-build-a-kms-server/"},{"categories":["docker"],"content":"Active Script echo \"To active office\" cd \"%programfiles%\\Microsoft Office\\Office16\" cscript ospp.vbs /sethst:xx.xx.xx.xx cscript ospp.vbs /act echo \"to active windows\" slmgr /skms xxx.xxx.xxx.xxx slmgr /ato ","date":"2019-04-11","objectID":"/how-to-build-a-kms-server/:3:0","tags":["docker","kms"],"title":"How to Build a Kms Server","uri":"/how-to-build-a-kms-server/"},{"categories":["docker"],"content":"Reference blog ","date":"2019-04-11","objectID":"/how-to-build-a-kms-server/:4:0","tags":["docker","kms"],"title":"How to Build a Kms Server","uri":"/how-to-build-a-kms-server/"},{"categories":["zsh"],"content":"How to setup Oh-My-Zsh ","date":"2019-04-10","objectID":"/how-to-setup-oh-my-zsh/:0:0","tags":["zsh"],"title":"How to Setup Oh My Zsh","uri":"/how-to-setup-oh-my-zsh/"},{"categories":["zsh"],"content":"Install support application apt install git curl wget zsh ","date":"2019-04-10","objectID":"/how-to-setup-oh-my-zsh/:1:0","tags":["zsh"],"title":"How to Setup Oh My Zsh","uri":"/how-to-setup-oh-my-zsh/"},{"categories":["zsh"],"content":"Install zsh via curl sh -c \"$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)\" via wget sh -c \"$(wget https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)\" ","date":"2019-04-10","objectID":"/how-to-setup-oh-my-zsh/:2:0","tags":["zsh"],"title":"How to Setup Oh My Zsh","uri":"/how-to-setup-oh-my-zsh/"},{"categories":["zsh"],"content":"Change zsh settings change theme #change theme froy robbyrussell to agnoster sed -i 's/ZSH_THEME=\\\"robbyrussell\\\"/ZSH_THEME=\\\"agnoster\\\"/g' ~/.zshrc change plugin support sed -i 's/plugins=(git)/plugin=(\\n\\tgit\\n\\tboundler\\n\\tdotenv\\n\\trake\\n\\trbenv\\n\\truby\\n\\tpython\\n)/g' ~/.zshrc ","date":"2019-04-10","objectID":"/how-to-setup-oh-my-zsh/:3:0","tags":["zsh"],"title":"How to Setup Oh My Zsh","uri":"/how-to-setup-oh-my-zsh/"},{"categories":["zsh"],"content":"Switch default bash to zsh chsh -s /bin/zsh ","date":"2019-04-10","objectID":"/how-to-setup-oh-my-zsh/:4:0","tags":["zsh"],"title":"How to Setup Oh My Zsh","uri":"/how-to-setup-oh-my-zsh/"},{"categories":["vim"],"content":"How to setup vim ","date":"2019-04-09","objectID":"/how-to-setup-vim/:0:0","tags":["vim"],"title":"How to Setup Vim","uri":"/how-to-setup-vim/"},{"categories":["vim"],"content":"Install vundle vundle is a plugin manage tools for vim git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim ","date":"2019-04-09","objectID":"/how-to-setup-vim/:1:0","tags":["vim"],"title":"How to Setup Vim","uri":"/how-to-setup-vim/"},{"categories":["vim"],"content":"Edit vim configure file cat \u003e ~/.vimrc \u003c\u003cEOF set nocompatible \" be iMproved, required filetype off \" required syntax on \" set the runtime path to include Vundle and initialize set rtp+=~/.vim/bundle/Vundle.vim call vundle#begin() \" alternatively, pass a path where Vundle should install plugins \"call vundle#begin('~/some/path/here') \" let Vundle manage Vundle, required Plugin 'VundleVim/Vundle.vim' \" The following are examples of different formats supported. \" Keep Plugin commands between vundle#begin/end. \" plugin on GitHub repo Plugin 'tpope/vim-fugitive' \" plugin from http://vim-scripts.org/vim/scripts.html \" Plugin 'L9' \" Git plugin not hosted on GitHub Plugin 'git://git.wincent.com/command-t.git' \" git repos on your local machine (i.e. when working on your own plugin) \" Plugin 'file:///home/gmarik/path/to/plugin' \" The sparkup vim script is in a subdirectory of this repo called vim. \" Pass the path to set the runtimepath properly. Plugin 'rstacruz/sparkup', {'rtp': 'vim/'} \" Install L9 and avoid a Naming conflict if you've already installed a \" different version somewhere else. Plugin 'ascenator/L9', {'name': 'newL9'} Plugin 'morhetz/gruvbox' Plugin 'vim-airline/vim-airline' Plugin 'vim-airline/vim-airline-themes' \" All of your Plugins must be added before the following line call vundle#end() \" required filetype plugin indent on \" required \" To ignore plugin indent changes, instead use: \"filetype plugin on \" \" Brief help \" :PluginList - lists configured plugins \" :PluginInstall - installs plugins; append `!` to update or just :PluginUpdate \" :PluginSearch foo - searches for foo; append `!` to refresh local cache \" :PluginClean - confirms removal of unused plugins; append `!` to auto-approve removal \" \" see :h vundle for more details or wiki for FAQ \" Put your non-Plugin stuff after this line EOF ","date":"2019-04-09","objectID":"/how-to-setup-vim/:2:0","tags":["vim"],"title":"How to Setup Vim","uri":"/how-to-setup-vim/"},{"categories":["vim"],"content":"Install Plugin vim Enter :PluginInstall then wait for the installation process finished. then run the commands: cat \u003e\u003e ~/.vimrc \u003c\u003cEOFcolorscheme gruvboxset background=dark \" Setting dark modelet g:gruvbox_contrast_dark='hard'let g:airline_theme='simple'EOF ","date":"2019-04-09","objectID":"/how-to-setup-vim/:3:0","tags":["vim"],"title":"How to Setup Vim","uri":"/how-to-setup-vim/"},{"categories":["vim"],"content":"Let vim support nginx syntax highlight mkdir -p ~/.vim/syntax/ wget -O ~/.vim/syntax/nginx.vim http://www.vim.org/scripts/download_script.php?src_id=14376 # /usr/local/etc/nginx/vhosts/* change it as you wish echo \"au BufRead,BufNewFile /usr/local/etc/nginx/vhosts/* set ft=nginx\" \u003e\u003e ~/.vim/filetype.vim ","date":"2019-04-09","objectID":"/how-to-setup-vim/:4:0","tags":["vim"],"title":"How to Setup Vim","uri":"/how-to-setup-vim/"},{"categories":["vim"],"content":"Let vim remember last opened position cat \u003e\u003e ~/.vimrc \u003c\u003c EOF \" Uncomment the following to have Vim jump to the last position when \" reopening a file if has(\"autocmd\") au BufReadPost * if line(\"'\\\"\") \u003e 0 \u0026\u0026 line(\"'\\\"\") \u003c= line(\"$\") \\| exe \"normal! g'\\\"\" | endif endif EOF Change tab to 4 space cat \u003e\u003e ~/.vimrc \u003c\u003cEOF set tabstop=4 set shiftwidth=4 set softtabstop=4 set expandtab EOF ","date":"2019-04-09","objectID":"/how-to-setup-vim/:5:0","tags":["vim"],"title":"How to Setup Vim","uri":"/how-to-setup-vim/"},{"categories":["vim"],"content":"Reference 让Vim支持Nginx语法高亮 -Ubuntu In vim, how do I get a file to open at the same line number I closed it at last time? How do I change tab size in Vim? ","date":"2019-04-09","objectID":"/how-to-setup-vim/:6:0","tags":["vim"],"title":"How to Setup Vim","uri":"/how-to-setup-vim/"},{"categories":["virtualization","devops"],"content":"How to install docker-ce in lxc container in pve At now, Proxmox is base debian and it can be install docker directly. To install docker in host without proxmox support. It will be lost HA function. Deploy a vm then install docker-ce in the vm, it works. but take a lot resource than directly install docker in proxmox. Is there a way to take less performance ,at the same time we cant easly mange it with proxmox ?The answer is run docker in lxc. ","date":"2019-03-23","objectID":"/how-to-enable-docker-in-lxc/:0:0","tags":["lxc","pve","docker"],"title":"How to Enable Docker in Lxc","uri":"/how-to-enable-docker-in-lxc/"},{"categories":["virtualization","devops"],"content":"Download lxc images First thing first, Download Ubuntu 18.04.1 LXC images: ","date":"2019-03-23","objectID":"/how-to-enable-docker-in-lxc/:1:0","tags":["lxc","pve","docker"],"title":"How to Enable Docker in Lxc","uri":"/how-to-enable-docker-in-lxc/"},{"categories":["virtualization","devops"],"content":"Option 1: Download LXC images from GUI Login your PVE; Follow the path to click the gui to redirect to the right lxc download page. \"Datacenter\" | \"$PVE_HOST\" | \"Local(PVE Storage)\" | \"Content\" | \"Templates\" select “ubuntu-18.04-standard”, then click download. wating for it finishd download the lxc image. Virtual Environment 5.3-9 Search Storage 'local' on node 'xa-sys-pve02' Search: Server View Logs () starting template download from: http://download.proxmox.com/images/system/ubuntu-18.04-standard_18.04.1-1_amd64.tar.gz target file: /var/lib/vz/template/cache/ubuntu-18.04-standard_18.04.1-1_amd64.tar.gz --2019-04-08 13:44:03-- http://download.proxmox.com/images/system/ubuntu-18.04-standard_18.04.1-1_amd64.tar.gz Resolving download.proxmox.com (download.proxmox.com)... 94.136.30.185, 2a01:7e0:0:424::249 Connecting to download.proxmox.com (download.proxmox.com)|94.136.30.185|:80... connected. HTTP request sent, awaiting response... 200 OK Length: 213430501 (204M) [application/octet-stream] Saving to: '/var/lib/vz/template/cache/ubuntu-18.04-standard_18.04.1-1_amd64.tar.gz.tmp.31383' 0K ........ ........ ........ ........ ........ ........ 1% 99.8K 34m17s 3072K ........ ........ ........ ........ ........ ........ 2% 220K 24m34s 6144K ........ ........ ........ ........ ........ ........ 4% 214K 21m18s ... 193536K ........ ........ ........ ........ ........ ........ 94% 180K 53s 196608K ........ ........ ........ ........ ........ ........ 95% 410K 39s 199680K ........ ........ ........ ........ ........ ........ 97% 206K 25s 202752K ........ ........ ........ ........ ........ ........ 98% 311K 11s 205824K ........ ........ ........ ........ ........ 100% 338K=15m15s 2019-04-08 13:59:21 (228 KB/s) - '/var/lib/vz/template/cache/ubuntu-18.04-standard_18.04.1-1_amd64.tar.gz.tmp.31383' saved [213430501/213430501] download finished TASK OK ","date":"2019-03-23","objectID":"/how-to-enable-docker-in-lxc/:1:1","tags":["lxc","pve","docker"],"title":"How to Enable Docker in Lxc","uri":"/how-to-enable-docker-in-lxc/"},{"categories":["virtualization","devops"],"content":"Option 2: Download LXC with shell ####Fix Perl LC_ALL ERROR export LANGUAGE=en_US.UTF-8 export LANG=en_US.UTF-8 export LC_ALL=en_US.UTF-8 #locale-gen en_US.UTF-8 cat \u003e\u003e /etc/environment \u003c\u003cEOF LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8 EOF ####list linux container pveam available --section system system alpine-3.7-default_20180913_amd64.tar.xz system alpine-3.8-default_20180913_amd64.tar.xz system alpine-3.9-default_20190224_amd64.tar.xz system archlinux-base_20190124-1_amd64.tar.gz system centos-6-default_20161207_amd64.tar.xz system centos-7-default_20171212_amd64.tar.xz system debian-8.0-standard_8.11-1_amd64.tar.gz system debian-9.0-standard_9.7-1_amd64.tar.gz system fedora-28-default_20180907_amd64.tar.xz system fedora-29-default_20181126_amd64.tar.xz system gentoo-current-default_20180906_amd64.tar.xz system opensuse-15.0-default_20180907_amd64.tar.xz system opensuse-42.3-default_20171214_amd64.tar.xz system ubuntu-14.04-standard_14.04.5-1_amd64.tar.gz system ubuntu-16.04-standard_16.04.5-1_amd64.tar.gz system ubuntu-18.04-standard_18.04.1-1_amd64.tar.gz system ubuntu-18.10-standard_18.10-2_amd64.tar.gz ####Download images pveam download local debian-9.0-standard_9.7-1_amd64.tar.gz List local images pveam list local Delete local image pveam remove local:vztmpl/debian-8.0-standard_8.0-1_amd64.tar.gz ","date":"2019-03-23","objectID":"/how-to-enable-docker-in-lxc/:1:2","tags":["lxc","pve","docker"],"title":"How to Enable Docker in Lxc","uri":"/how-to-enable-docker-in-lxc/"},{"categories":["virtualization","devops"],"content":"Option 3: create a lxc from image “Datacenter” | select “$PVENODE” then right click it. | “Create CT”. Setup the LXC. General: “Unprivileged container” checked. When create the LXC container,selecited the contiainer and doubule click “Options” | “Features”.then make keyctl/Nesting/Fuse option check on. “Options” | “protecton” check on. ","date":"2019-03-23","objectID":"/how-to-enable-docker-in-lxc/:1:3","tags":["lxc","pve","docker"],"title":"How to Enable Docker in Lxc","uri":"/how-to-enable-docker-in-lxc/"},{"categories":["virtualization","devops"],"content":"Option4: Install docker in LXC Boot the lxc container of ubuntu 18.04. Change ubuntu 18.04 apt source to mirrors.utsc.edu.cn cat \u003e /etc/apt/sources.list \u003c\u003cEOF deb https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse ## Not recommended # deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse # deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse EOF apt update \u0026\u0026 apt -y upgrade apt install -y vim net-tools apt remove -y vim-tiny Follow docker offical document to install docker-ce. apt-get install \\ apt-transport-https \\ ca-certificates \\ curl \\ gnupg-agent \\ software-properties-common \\ -y curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - apt-key fingerprint 0EBFCD88 sudo add-apt-repository \\ \"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\ $(lsb_release -cs)\\ stable\" sed -i 's/download.docker.com/mirrors.ustc.edu.cn\\/docker-ce/g' /etc/apt/sources.list apt-get update apt-get install -y docker-ce docker-ce-cli containerd.io check docker root@template-docker-in-lxc:/etc/apt# docker -v Docker version 18.09.4, build d14af54266 docker run hello-world run hello-world root@template-docker-in-lxc:/etc/apt# docker run hello-world Unable to find image 'hello-world:latest' locally latest: Pulling from library/hello-world 1b930d010525: Pull complete Digest: sha256:2557e3c07ed1e38f26e389462d03ed943586f744621577a99efb77324b0fe535 Status: Downloaded newer image for hello-world:latest Hello from Docker! This message shows that your installation appears to be working correctly. To generate this message, Docker took the following steps: 1. The Docker client contacted the Docker daemon. 2. The Docker daemon pulled the \"hello-world\" image from the Docker Hub. (amd64) 3. The Docker daemon created a new container from that image which runs the executable that produces the output you are currently reading. 4. The Docker daemon streamed that output to the Docker client, which sent it to your terminal. To try something more ambitious, you can run an Ubuntu container with: $ docker run -it ubuntu bash Share images, automate workflows, and more with a free Docker ID: https://hub.docker.com/ For more examples and ideas, visit: https://docs.docker.com/get-started/ ","date":"2019-03-23","objectID":"/how-to-enable-docker-in-lxc/:1:4","tags":["lxc","pve","docker"],"title":"How to Enable Docker in Lxc","uri":"/how-to-enable-docker-in-lxc/"},{"categories":["virtualization","devops"],"content":"Install docker-compose sudo curl -L \"https://github.com/docker/compose/releases/download/1.24.0/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose sudo chmod +x /usr/local/bin/docker-compose sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose ","date":"2019-03-23","objectID":"/how-to-enable-docker-in-lxc/:1:5","tags":["lxc","pve","docker"],"title":"How to Enable Docker in Lxc","uri":"/how-to-enable-docker-in-lxc/"},{"categories":["virtualization","devops"],"content":"Fixed root shell path cause login failed When I setup zsh and set wrong zsh.then I cannot login and ssh The error like this. I can not boot to single user mode. Welcome to Ubuntu 18.04.2 LTS (GNU/Linux 4.15.18-12-pve x86_64) * Documentation: https://help.ubuntu.com * Management: https://landscape.canonical.com * Support: https://ubuntu.com/advantage * Ubuntu's Kubernetes 1.14 distributions can bypass Docker and use containerd directly, see https://bit.ly/ubuntu-containerd or try it now with snap install microk8s --classic * Canonical Livepatch is available for installation. - Reduce system reboots and improve kernel security. Activate at: https://ubuntu.com/livepatch Cannot execute zsh: No such file or directory Solution: I wounder that is a a command like docker command docker exec -it $dockername /bin/sh Bingo! Here we go: lxc-attach -n $lxc_pid /bin/sh #for example: lxc-attach -n 103 /bin/sh vi /etc/password #then change root shell path to /bin/sh After reboot and I can login again. ","date":"2019-03-23","objectID":"/how-to-enable-docker-in-lxc/:1:6","tags":["lxc","pve","docker"],"title":"How to Enable Docker in Lxc","uri":"/how-to-enable-docker-in-lxc/"},{"categories":["virtualization","devops"],"content":"Reference Install Docker Compose LXC 简介 ","date":"2019-03-23","objectID":"/how-to-enable-docker-in-lxc/:2:0","tags":["lxc","pve","docker"],"title":"How to Enable Docker in Lxc","uri":"/how-to-enable-docker-in-lxc/"},{"categories":null,"content":"Build Prometheus with docker-compose docker-compose up -d ","date":"2019-02-21","objectID":"/docker-compose-to-build-prometheus/:0:0","tags":null,"title":"Docker Compose to Build Prometheus","uri":"/docker-compose-to-build-prometheus/"},{"categories":["virtualization"],"content":"How to enable Proxmox VE nested virtualization To enable nested virtualization on Proxmox VE, we need to stop all the vm and enable nested virtualization to linux kernel. then change vm settings ","date":"2019-02-14","objectID":"/how-to-enable-proxmoxve-nested-virtualization/:0:0","tags":["pve"],"title":"How to Enable Proxmoxve Nested Virtualization","uri":"/how-to-enable-proxmoxve-nested-virtualization/"},{"categories":["virtualization"],"content":"Stop all the vm on proxmox VE stop all virtual machines with shell command. root@xa-sys-pve01:~# pvesh create /nodes/localhost/stopall Stopping VM 116 (timeout = 180 seconds) Stopping VM 115 (timeout = 180 seconds) Stopping CT 112 (timeout = 60 seconds) Stopping CT 111 (timeout = 60 seconds) Stopping CT 108 (timeout = 60 seconds) Stopping CT 106 (timeout = 60 seconds) Stopping VM 101 (timeout = 180 seconds) UPID:xa-sys-pve01:0036EA66:01992199:5CB98D6C:stopall::root@pam: stop all the virtual machine with admin web. bulk stop ","date":"2019-02-14","objectID":"/how-to-enable-proxmoxve-nested-virtualization/:1:0","tags":["pve"],"title":"How to Enable Proxmoxve Nested Virtualization","uri":"/how-to-enable-proxmoxve-nested-virtualization/"},{"categories":["virtualization"],"content":"Enable nested module in linux kernel Check nested support status cat /sys/module/kvm_intel/parameters/nested N enable nested support on. #for intel cpu echo \"options kvm-intel nested=Y\" \u003e /etc/modprobe.d/kvm-intel.conf #for amd cpu echo \"options kvm-amd nested=1\" \u003e /etc/modprobe.d/kvm-amd.conf Reload the kernel module. modprobe -r kvm_intel modprobe kvm_intel Check again. cat /sys/module/kvm_intel/parameters/nested Y ","date":"2019-02-14","objectID":"/how-to-enable-proxmoxve-nested-virtualization/:2:0","tags":["pve"],"title":"How to Enable Proxmoxve Nested Virtualization","uri":"/how-to-enable-proxmoxve-nested-virtualization/"},{"categories":["virtualization"],"content":"Change VM cpu type ```bash vi /etc/pve/qemu-server/xxx.conf ``` Add a args to the config file ``` vim #intel cpu args: -cpu host,+vmx #amd cpu args: -cpu host,+svm ``` ## Reference * [Nested Virtualization](https://pve.proxmox.com/wiki/Nested_Virtualization) ","date":"2019-02-14","objectID":"/how-to-enable-proxmoxve-nested-virtualization/:3:0","tags":["pve"],"title":"How to Enable Proxmoxve Nested Virtualization","uri":"/how-to-enable-proxmoxve-nested-virtualization/"},{"categories":["linux"],"content":"LVM EXTEND How to extend lvm size use free PE # show volume group information vgdisplay --- Volume group --- VG Name ubuntu-vg System ID Format lvm2 Metadata Areas 1 Metadata Sequence No 2 VG Access read/write VG Status resizable MAX LV 0 Cur LV 1 Open LV 1 Max PV 0 Cur PV 1 Act PV 1 VG Size \u003c99.00 GiB PE Size 4.00 MiB Total PE 25343 Alloc PE / Size 1024 / 4.00 GiB Free PE / Size 24319 / \u003c95.00 GiB VG UUID KblInT-Z6k6-1NM3-ybyV-eufy-y1vc-BiIoEM Remember 24319 from Free PE / Size 24319 / \u003c95.00 GiB ","date":"2019-01-08","objectID":"/how-to-extend-lvm-allocted-pe-with-freee-pe/:1:0","tags":["lvm","linux"],"title":"How to Extend Lvm Allocted PE With Freee PE","uri":"/how-to-extend-lvm-allocted-pe-with-freee-pe/"},{"categories":["linux"],"content":"list logical volume lvdisplay --- Logical volume --- LV Path /dev/ubuntu-vg/ubuntu-lv LV Name ubuntu-lv VG Name ubuntu-vg LV UUID Pi0Id7-riMg-BtmN-sfdF-gIjX-KrCp-TxxCBt LV Write Access read/write LV Creation host, time ubuntu-server, 2018-12-12 03:43:02 +0000 LV Status available # open 1 LV Size 4.00 GiB Current LE 1024 Segments 1 Allocation inherit Read ahead sectors auto - currently set to 256 Block device 253:0 Remember LV Path: /dev/ubuntu-vg/ubuntu-lv ","date":"2019-01-08","objectID":"/how-to-extend-lvm-allocted-pe-with-freee-pe/:2:0","tags":["lvm","linux"],"title":"How to Extend Lvm Allocted PE With Freee PE","uri":"/how-to-extend-lvm-allocted-pe-with-freee-pe/"},{"categories":["linux"],"content":"Extend Free PE to lvm lvextend -l +24319 /dev/ubuntu-vg/ubuntu-lv root@template-ubutu1804:/home/autotest# vgdisplay --- Volume group --- VG Name ubuntu-vg System ID Format lvm2 Metadata Areas 1 Metadata Sequence No 3 VG Access read/write VG Status resizable MAX LV 0 Cur LV 1 Open LV 1 Max PV 0 Cur PV 1 Act PV 1 VG Size \u003c99.00 GiB PE Size 4.00 MiB Total PE 25343 Alloc PE / Size 25343 / \u003c99.00 GiB Free PE / Size 0 / 0 VG UUID KblInT-Z6k6-1NM3-ybyV-eufy-y1vc-BiIoEM resize2fs /dev/ubuntu-vg/ubuntu-lv resize2fs 1.44.1 (24-Mar-2018) Filesystem at /dev/ubuntu-vg/ubuntu-lv is mounted on /; on-line resizing required old_desc_blocks = 1, new_desc_blocks = 13 The filesystem on /dev/ubuntu-vg/ubuntu-lv is now 25951232 (4k) blocks long. ","date":"2019-01-08","objectID":"/how-to-extend-lvm-allocted-pe-with-freee-pe/:3:0","tags":["lvm","linux"],"title":"How to Extend Lvm Allocted PE With Freee PE","uri":"/how-to-extend-lvm-allocted-pe-with-freee-pe/"},{"categories":["linux"],"content":"Check volume group information vgdisplay root@template-ubutu1804:/home/autotest# vgdisplay --- Volume group --- VG Name ubuntu-vg System ID Format lvm2 Metadata Areas 1 Metadata Sequence No 3 VG Access read/write VG Status resizable MAX LV 0 Cur LV 1 Open LV 1 Max PV 0 Cur PV 1 Act PV 1 VG Size \u003c99.00 GiB PE Size 4.00 MiB Total PE 25343 Alloc PE / Size 25343 / \u003c99.00 GiB Free PE / Size 0 / 0 You will see Alloc PE size is 25343, size of Free PE is 0. ","date":"2019-01-08","objectID":"/how-to-extend-lvm-allocted-pe-with-freee-pe/:4:0","tags":["lvm","linux"],"title":"How to Extend Lvm Allocted PE With Freee PE","uri":"/how-to-extend-lvm-allocted-pe-with-freee-pe/"},{"categories":["linux"],"content":"Brief of command vgdisplay lvdisplay lvextend -l +24319 /dev/ubuntu-vg/ubuntu-lv resize2fs /dev/ubuntu-vg/ubuntu-lv vgdisplay lvdisplay ","date":"2019-01-08","objectID":"/how-to-extend-lvm-allocted-pe-with-freee-pe/:5:0","tags":["lvm","linux"],"title":"How to Extend Lvm Allocted PE With Freee PE","uri":"/how-to-extend-lvm-allocted-pe-with-freee-pe/"},{"categories":["ssh"],"content":"cisco ssh error When you met error like this: ssh cisco@10.32.3.1 Unable to negotiate with 10.32.3.1 port 22: no matching key exchange method found. Their offer: diffie-hellman-group1-sha1 Solution: $ ssh -l \u003cUSERNAME\u003e -oHostKeyAlgorithms=+ssh-dss -oKexAlgorithms=+diffie-hellman-group1-sha1 \u003cHOST\u003e or ssh -l \u003cusername\u003e -o HostKeyAlgorithms=+ssh-dss -o KexAlgorithms=+diffie-hellman-group1-sha1 -c 3des-cbc \u003chostname\u003e ","date":"2018-12-29","objectID":"/cisco-ssh-error/:0:0","tags":["cisco","ssh"],"title":"Cisco Ssh Error","uri":"/cisco-ssh-error/"},{"categories":["ssh"],"content":"Reference SSH failed on 3750 switch SSH Not Working After Update To 10.13.2 (HighSierra) ","date":"2018-12-29","objectID":"/cisco-ssh-error/:1:0","tags":["cisco","ssh"],"title":"Cisco Ssh Error","uri":"/cisco-ssh-error/"},{"categories":["macos"],"content":"How to update time via ntpserver Today, My MBP is out of power. I cannot surfing internet. and the brower tell me my time was wrong. Then I checked my time in my MBB, I’m back in time jan 1, 2018. Wow, I got extra whole year time! Majove update time sudo sntp -sS time.asia.apple.com When you’re getting this error kod_init_kod_db(): Cannot open KoD db file /var/db/ntp-kod: No such file or directory You can solved the problems with: sudo touch /var/db/ntp-kod sudo chmod 666 /var/db/ntp-kod ","date":"2018-12-26","objectID":"/macos-update-time-via-ntpserver/:0:0","tags":["macos","ntp"],"title":"Macos Update Time via Ntpserver","uri":"/macos-update-time-via-ntpserver/"},{"categories":["macos"],"content":"Disable No subscription warning sed -i.bak \"s/data.status !== 'Active'/false/g\" /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js \u0026\u0026 systemctl restart pveproxy.service ","date":"2018-12-26","objectID":"/macos-update-time-via-ntpserver/:1:0","tags":["macos","ntp"],"title":"Macos Update Time via Ntpserver","uri":"/macos-update-time-via-ntpserver/"},{"categories":["macos"],"content":"Reference How can I tell if my Mac is keeping the clock updated properly? ","date":"2018-12-26","objectID":"/macos-update-time-via-ntpserver/:2:0","tags":["macos","ntp"],"title":"Macos Update Time via Ntpserver","uri":"/macos-update-time-via-ntpserver/"},{"categories":["python"],"content":"learning Flask 01 ","date":"2018-12-25","objectID":"/learning-flask-01/:0:0","tags":["python","flask"],"title":"Learning Flask 01","uri":"/learning-flask-01/"},{"categories":["python"],"content":"Installation and configure of anaconda ","date":"2018-12-25","objectID":"/learning-flask-01/:1:0","tags":["python","flask"],"title":"Learning Flask 01","uri":"/learning-flask-01/"},{"categories":["python"],"content":"Installaltion homebrew ruby -e \"$(curl - fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\" ","date":"2018-12-25","objectID":"/learning-flask-01/:1:1","tags":["python","flask"],"title":"Learning Flask 01","uri":"/learning-flask-01/"},{"categories":["python"],"content":"Installation of pyenv # Installing pyenv brew install pyenv ","date":"2018-12-25","objectID":"/learning-flask-01/:1:2","tags":["python","flask"],"title":"Learning Flask 01","uri":"/learning-flask-01/"},{"categories":["python"],"content":"Install anaconda 2 and anaconda 3 Download anaconda from here ","date":"2018-12-25","objectID":"/learning-flask-01/:1:3","tags":["python","flask"],"title":"Learning Flask 01","uri":"/learning-flask-01/"},{"categories":["virtualization"],"content":"Proxmox Network Adapter Pass Through Long time ago, I konw virtualization is go very good solution to server. But how about router build in virtualization? After tried to do it, I was failed. because virtual switch made networking very slow. So i just use dedicate server as a router. Recently days, I just learn proxmox and find pci-e pass through function. I think maybe it is way to make routing virtualization. Here are what I do: ","date":"0001-01-01","objectID":"/proxmox-ve-network-adapter-pass-through/:0:0","tags":["PVE","pass through"],"title":"Proxmox Ve Network Adapter Pass Through","uri":"/proxmox-ve-network-adapter-pass-through/"},{"categories":["virtualization"],"content":"Enable VT-d and X2APic Mode Configure BIOS to enable VT-d and X2APic ","date":"0001-01-01","objectID":"/proxmox-ve-network-adapter-pass-through/:1:0","tags":["PVE","pass through"],"title":"Proxmox Ve Network Adapter Pass Through","uri":"/proxmox-ve-network-adapter-pass-through/"},{"categories":["virtualization"],"content":"Chang Grub boot settings ","date":"0001-01-01","objectID":"/proxmox-ve-network-adapter-pass-through/:2:0","tags":["PVE","pass through"],"title":"Proxmox Ve Network Adapter Pass Through","uri":"/proxmox-ve-network-adapter-pass-through/"},{"categories":["virtualization"],"content":"Inel CPU Edit grub configure. Inter CPU Edit grub Edit /etc/default/grub, then change GRUB_CMDLINE_LINUX_DEFAULT=\"quiet\" to GRUB_CMDLINE_LINUX_DEFAULT=\"quiet intel_iommu=on\" Update grub update-grub ","date":"0001-01-01","objectID":"/proxmox-ve-network-adapter-pass-through/:2:1","tags":["PVE","pass through"],"title":"Proxmox Ve Network Adapter Pass Through","uri":"/proxmox-ve-network-adapter-pass-through/"},{"categories":["virtualization"],"content":"AMD CPU Edit grub file. Edit /etc/default/grub Change GRUB_CMDLINE_LINUX_DEFAULT=\"quiet\" to GRUB_CMDLINE_LINUX_DEFAULT=\"quiet amd_iommu=on\" Update grub update-grub ##Change Required modules Edit /etc/modules Add vfio vfio_iommu_type1 vfio_pci vfio_virqfd Check IOMMU enable or not dmesg | grep ecap script to make sure IOMMU is enabled #!/bin/sh if [ $(dmesg | grep ecap | wc -l) -eq 0 ]; then echo \"No interrupt remapping support found\" exit 1 fi for i in $(dmesg | grep ecap | awk '{print $NF}'); do if [ $(( (0x$i \u0026 0xf) \u003e\u003e 3 )) -ne 1 ]; then echo \"Interrupt remapping not supported\" exit 1 fi done Verify IOMMU isolation find /sys/kernel/iommu_groups/ -type l ","date":"0001-01-01","objectID":"/proxmox-ve-network-adapter-pass-through/:2:2","tags":["PVE","pass through"],"title":"Proxmox Ve Network Adapter Pass Through","uri":"/proxmox-ve-network-adapter-pass-through/"},{"categories":["virtualization"],"content":"Add PCI-E Device to VM Run lspci to check address of network pci-e adapter device. like this lspci hostpci0: 01:00.0 Add configure of yoru VM /etc/pve/qemu-server/\u003cvmid\u003e.conf Add configure like this to set pci-expres passthrough. machine: q35 hostpci0: 00:00.0,pcie=1 ","date":"0001-01-01","objectID":"/proxmox-ve-network-adapter-pass-through/:3:0","tags":["PVE","pass through"],"title":"Proxmox Ve Network Adapter Pass Through","uri":"/proxmox-ve-network-adapter-pass-through/"},{"categories":["virtualization"],"content":"Reference Pci passthrough ","date":"0001-01-01","objectID":"/proxmox-ve-network-adapter-pass-through/:4:0","tags":["PVE","pass through"],"title":"Proxmox Ve Network Adapter Pass Through","uri":"/proxmox-ve-network-adapter-pass-through/"},{"categories":["docker"],"content":"How to Wirte docker file for overture Hence we need to custom overture docker image as we desire, I write this dockerfile. How to map VOLUME and copy file from docker images to directory of docker host. When define VOLUME, build docker images will not copy file to the path, But we can copy the files when docker running. if [ “ls -A /config” = \"\" ]; then cp /srv/config.json /config/ \u0026\u0026 cp /srv/*.txt /config/;fi ","date":"2018-12-24","objectID":"/dockerfile-for-overture/:0:0","tags":["overture","docker"],"title":"Dockerfile for Overture","uri":"/dockerfile-for-overture/"},{"categories":["docker"],"content":"Overture Dockerfile #FROM alpine:edge FROM alpine:latest MAINTAINER steve dong \u003cdongjunbo@gmail.com? # Environment variables ########################## ENV VERSION v1.4 # Change this cron rule to what fits best for you. ENV CRONTAB_TIME '0 0 * * *' # Create Volume entry points ############################ VOLUME [\"/config\"] # Set the work directory ######################### WORKDIR /srv # Fix permissions ################# # Install required packages ########################### RUN set -xe \u0026\u0026 \\ mkdir -p /config \u0026\u0026 \\ apk add --no-cache unzip curl \u0026\u0026 \\ curl -fsSLO --compressed \"https://github.com/shawn1m/overture/releases/download/${VERSION}/overture-linux-amd64.zip\" \u0026\u0026 \\ unzip -o \"overture-linux-amd64.zip\" -d /srv \u0026\u0026 \\ curl https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt | base64 -d | sort -u | sed '/^$\\|@@/d'| sed 's#!.\\+##; s#|##g; s#@##g; s#http:\\/\\/##; s#https:\\/\\/##;' | sed '/\\*/d; / apple\\.com/d; /sina\\.cn/d; /sina\\.com\\.cn/d; /baidu\\.com/d; /qq\\.com/d' | sed '/^[0-9]\\+\\.[0-9]\\+\\.[0-9]\\+\\.[0-9]\\+$/d' | grep '^[0-9a-zA-Z\\.-]\\+$' | grep '\\.' | sed 's#^\\.\\+##' | sort -u \u003e temp_gfwlist.txt \u0026\u0026 \\ curl https://raw.githubusercontent.com/hq450/fancyss/master/rules/gfwlist.conf | sed 's/ipset=\\/\\.//g; s/\\/gfwlist//g; /^server/d' \u003e temp_koolshare.txt \u0026\u0026 \\ cat temp_gfwlist.txt temp_koolshare.txt | sort -u \u003e gfw_all_domain.txt \u0026\u0026 \\ curl -fsSLO --compressed \"https://raw.githubusercontent.com/17mon/china_ip_list/master/china_ip_list.txt\" \u0026\u0026 \\ sed -i '11s/disable/manual/' /srv/config.json \u0026\u0026 \\ sed -i '24s/disable/manual/' /srv/config.json \u0026\u0026 \\ sed -i '12s/\"\"/\"222.90.74.60\"/' /srv/config.json \u0026\u0026 \\ sed -i '25s/\"\"/\"202.60.225.114\"/' /srv/config.json \u0026\u0026 \\ sed -i 's/\".\\/ip_network_primary_sample\"/\"\\/config\\/china_ip_list.txt\"/g' /srv/config.json \u0026\u0026 \\ sed -i 's/\".\\/domain_alternative_sample\"/\"\\/config\\/gfw_all_domain.txt\"/g' /srv/config.json \u0026\u0026 \\ rm -rf temp_koolshare.txt temp_gfwlist.txt \u0026\u0026 \\ rm -rf \"overture-linux-amd64.zip\" \u0026\u0026 \\ chmod 0644 /config/ \u0026\u0026 \\ cp /srv/config.json /config/ \u0026\u0026 \\ cp /srv/*.txt /config/ \u0026\u0026 \\ apk del unzip curl # Expose required ports ####################### EXPOSE 53/udp #VOLUME [ \"/config\"] # Change Shell ############## SHELL [\"/bin/bash\", \"-c\"] CMD [\"if [ \\\"`ls -A /config`\\\" = \\\"\\\" ]; then cp /srv/config.json /config/ \u0026\u0026 cp /srv/*.txt /config/; fi\"] ENTRYPOINT [ \"/srv/overture-linux-amd64\", \"-c\", \"/config/config.json\" ] #CMD /srv/overture-linux-amd64 -c /config/config.json ","date":"2018-12-24","objectID":"/dockerfile-for-overture/:1:0","tags":["overture","docker"],"title":"Dockerfile for Overture","uri":"/dockerfile-for-overture/"},{"categories":["docker"],"content":"Docker run Command docker run \\ --restart=always \\ -d \\ -p 53:53/udp \\ -v \"/root/overture-docker-data:/config\" \\ --name xa-overture-01 \\ overture ","date":"2018-12-24","objectID":"/dockerfile-for-overture/:2:0","tags":["overture","docker"],"title":"Dockerfile for Overture","uri":"/dockerfile-for-overture/"},{"categories":["linux"],"content":"Ubuntu Chinese Language Support 编辑/etc/environment如下: vi /etc/environment 添加如下: LC_ALL=\"en_US.UTF-8\" LANG=\"zh_CN.UTF-8\" UNZIP='-O CP936\" ZIPINFO=\"-O CP936\" 重新生成语言设置 sudo locale-gen en_US en_US.UTF-8 zh_CN zh_CN.UTF-8 sudo dpkg-reconfigure locales ## 中文支持 ### vim中文支持 编辑~/.vimrc ``` bash set fileencodings=utf-8,ucs-bom,gb18030,gbk,gb2312,cp936 set termencoding=utf-8 set encoding=utf-8 ","date":"2018-12-24","objectID":"/debian-or-ubuntu-chinese-language-support/:0:0","tags":["debian","ubuntu","linux","chinese"],"title":"Debian or Ubuntu Chinese Language Support","uri":"/debian-or-ubuntu-chinese-language-support/"},{"categories":["linux"],"content":"中文支持 ","date":"2018-12-24","objectID":"/debian-or-ubuntu-chinese-language-support/:0:1","tags":["debian","ubuntu","linux","chinese"],"title":"Debian or Ubuntu Chinese Language Support","uri":"/debian-or-ubuntu-chinese-language-support/"},{"categories":["freebsd","powerdns"],"content":"Install PowerDNS and Mysql on FreeBSD 12 ","date":"2018-12-18","objectID":"/install-powerdns-and-mysql-on-freebsd12/:0:0","tags":["powerdns","freebsd","mysql"],"title":"Install PowerDNS and Mysql on Freebsd12","uri":"/install-powerdns-and-mysql-on-freebsd12/"},{"categories":["freebsd","powerdns"],"content":"Database Installation pkg install mysql56-server sysrc mysql_server=\"YES\" service mysql-server restart ","date":"2018-12-18","objectID":"/install-powerdns-and-mysql-on-freebsd12/:1:0","tags":["powerdns","freebsd","mysql"],"title":"Install PowerDNS and Mysql on Freebsd12","uri":"/install-powerdns-and-mysql-on-freebsd12/"},{"categories":["freebsd","powerdns"],"content":"Database and User Configuration $ mysql mysql\u003e create database powerdns charset = utf8; mysql\u003e CREATE USER 'powerdns'@'localhost' IDENTIFIED BY 'XianAdmin'; ###mysql\u003e GRANT ALL PRIVILEGES ON powerdns.* TO '%' WITH GRANT OPTION;### mysql\u003e grant all privileges on powerdns.* to 'powerdns'@'localhost' IDENTIFIED BY 'XianAdmin'; mysql\u003e FLUSH PRIVILEGES; #For security, we also give the main admin password $ mysqladmin -u root password \"PASSWORD_OF_ROOT\" ","date":"2018-12-18","objectID":"/install-powerdns-and-mysql-on-freebsd12/:2:0","tags":["powerdns","freebsd","mysql"],"title":"Install PowerDNS and Mysql on Freebsd12","uri":"/install-powerdns-and-mysql-on-freebsd12/"},{"categories":["freebsd","powerdns"],"content":"Install powerdns pkg install powerdns ","date":"2018-12-18","objectID":"/install-powerdns-and-mysql-on-freebsd12/:3:0","tags":["powerdns","freebsd","mysql"],"title":"Install PowerDNS and Mysql on Freebsd12","uri":"/install-powerdns-and-mysql-on-freebsd12/"},{"categories":["freebsd","powerdns"],"content":"Reference How to manage MySQL databases and users from the command line PowerDNS, PowerAdmin with Mysql in Freebsd 10.1 ","date":"2018-12-18","objectID":"/install-powerdns-and-mysql-on-freebsd12/:4:0","tags":["powerdns","freebsd","mysql"],"title":"Install PowerDNS and Mysql on Freebsd12","uri":"/install-powerdns-and-mysql-on-freebsd12/"},{"categories":["docker","networking"],"content":"Run overture on Docker and FreeBSD 12 ENV foo /overtureWORKDIR${foo}RUN apt-get update \u0026\u0026 apt-get install -y ca-certificatesRUN printf \"deb https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse\\n deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse\\n deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse\\n deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse\\n deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse\\n deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse\\n deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse\\n deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse\" \u003e /etc/apt/sources.listRUN apt-get updateRUN apt-get upgrade -yRUN apt-get install -y wget curl unzip apt-utils vimRUN cd /overtureRUN wget https://github.com/shawn1m/overture/releases/download/v1.5-rc1/overture-linux-amd64.zipRUN unzip overture-linux-amd64.zipRUN curl https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt | base64 -d | sort -u | sed '/^$\\|@@/d'| sed 's#!.\\+##; s#|##g; s#@##g; s#http:\\/\\/##; s#https:\\/\\/##;' | sed '/\\*/d; /apple\\.com/d; /sina\\.cn/d; /sina\\.com\\.cn/d; /baidu\\.com/d; /qq\\.com/d' | sed '/^[0-9]\\+\\.[0-9]\\+\\.[0-9]\\+\\.[0-9]\\+$/d' | grep '^[0-9a-zA-Z\\.-]\\+$' | grep '\\.' | sed 's#^\\.\\+##' | sort -u \u003e /tmp/temp_gfwlist.txtRUN curl https://raw.githubusercontent.com/hq450/fancyss/master/rules/gfwlist.conf | sed 's/ipset=\\/\\.//g; s/\\/gfwlist//g; /^server/d' \u003e /tmp/temp_koolshare.txtRUN cat /tmp/temp_gfwlist.txt /tmp/temp_koolshare.txt | sort -u \u003e gfw_all_domain.txtRUN wget https://raw.githubusercontent.com/17mon/china_ip_list/master/china_ip_list.txtRUN printf '{ \\n \"BindAddress\": \":53\",\\n \"PrimaryDNS\": [\\n {\\n \"Name\": \"DNSPod\",\\n \"Address\": \"114.114.114.114:53\",\\n \"Protocol\": \"udp\",\\n \"SOCKS5Address\": \"\",\\n \"Timeout\": 6,\\n \"EDNSClientSubnet\": {\\n \"Policy\": \"auto\",\\n \"ExternalIP\": \"222.90.74.60\",\\n \"NoCookie\": true\\n }\\n }\\n ],\\n \"AlternativeDNS\": [\\n {\\n \"Name\": \"OpenDNS\",\\n \"Address\": \"208.67.222.222:443\",\\n \"Protocol\": \"tcp\",\\n \"SOCKS5Address\": \"\",\\n \"Timeout\": 6,\\n \"EDNSClientSubnet\": {\\n \"Policy\": \"manual\",\\n \"ExternalIP\": \"202.60.225.114\",\\n \"NoCookie\": true\\n }\\n }\\n ],\\n \"OnlyPrimaryDNS\": false,\\n \"IPv6UseAlternativeDNS\": false,\\n \"IPNetworkFile\": {\\n \"Primary\": \"./china_ip_list.txt\",\\n \"Alternative\": \"./ip_network_alternative_sample\"\\n },\\n \"DomainFile\": {\\n \"Primary\": \"./domain_primary_sample\",\\n \"Alternative\": \"./gfw_all_domain.txt\"\\n },\\n \"HostsFile\": \"./hosts_sample\",\\n \"MinimumTTL\": 0,\\n \"CacheSize\" : 0,\\n \"RejectQtype\": [255]\\n }' \u003e config.jsonCMD [\"./overture-linux-amd64\"]#ENTRYPOINT [\"./overture-linux-amd64\"] ","date":"2018-12-18","objectID":"/deploy-overture-with-docker-and-freebsd/:0:0","tags":["docker","freebsd","overture","dns"],"title":"Deploy Overture With Docker and Freebsd","uri":"/deploy-overture-with-docker-and-freebsd/"},{"categories":["docker","networking"],"content":"FreeBSD rc.d file cat /usr/local/etc/rc.d/overture #!/bin/sh # $FreeBSD: head/net/overture/files/overture.in 335066 2018-12-18 11:33:26z SteveDong $ # PROVIDE: overture # REQUIRE: LOGIN cleanvar # KEYWORD: shutdown # Add the following lines to /etc/rc.conf to enable overture # overture_enable (bool): set to \"NO\" by default # Set to \"YES\" to enable overture. # overture_config(path): overture config file. # Default to \"/usr/local/etc/overture/config.json\" . /etc/rc.subr name=\"overture\" rcvar=overture_enable load_rc_config $name : ${overture_enable:=\"NO\"} : ${overture_user:=\"root\"} : ${overture_group:=\"nobody\"} #: ${error_log_file=\"/var/log/overture_error\"} #: ${overture_args:=\"-p ${cpu_core} -c ${overture_config} -l ${logfile}\"} : ${overture_config=\"/usr/local/etc/overture/config.json\"} command=\"/usr/sbin/daemon\" procname=\"/usr/local/bin/overture\" pidfile=\"/var/run/overture.pid\" logfile=\"/var/log/overture\" error_log_file=\"/var/log/overture_error\" requried_files=\"${overture_config}\" # find how many cores on your computer cpu_core=$(cat /var/run/dmesg.boot | grep CPU | grep FreeBSD | awk {'print $5'}) overture_args=\"-p ${cpu_core} -c ${overture_config} -l ${logfile} 2\u003e\u00261 \u003e $error_log_file\" command_args=\"-p ${pidfile} /usr/bin/env ${procname} ${overture_args}\" start_precmd=overture_startprecmd overture_startprecmd() { if [ ! -e ${pidfile} ]; then install -o ${overture_user} -g ${overture_group} /dev/null ${pidfile}; fi if [ ! -e ${logfile} ]; then install -o ${overture_user} -g ${overture_group} /dev/null ${logfile}; fi if [ ! -e ${error_log_file} ]; then install -o ${overture_user} -g ${overture_group} /dev/null ${error_log_file}; fi } load_rc_config $name run_rc_command \"$1\" ","date":"2018-12-18","objectID":"/deploy-overture-with-docker-and-freebsd/:1:0","tags":["docker","freebsd","overture","dns"],"title":"Deploy Overture With Docker and Freebsd","uri":"/deploy-overture-with-docker-and-freebsd/"},{"categories":["virtualization"],"content":"How to Install Proxmox VE 5.x on Debian 9 ","date":"2018-12-01","objectID":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/:0:0","tags":["PVE","debian"],"title":"How to install ProxmoxVE 5.x on Debian 9","uri":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/"},{"categories":["virtualization"],"content":"Chang IP ADDRESS vi /etc/network/interfaces # This file describes the network interfaces available on your system # and how to activate them. For more information, see interfaces(5). source /etc/network/interfaces.d/* # The loopback network interface auto lo iface lo inet loopback # The primary network interface #allow-hotplug eno1 auto eno1 #iface eno1 inet dhcp iface eno1 inet static address *.*.*.* netmask *.*.*.* gateway *.*.*.* ","date":"2018-12-01","objectID":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/:1:0","tags":["PVE","debian"],"title":"How to install ProxmoxVE 5.x on Debian 9","uri":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/"},{"categories":["virtualization"],"content":"Change DNS vi /etc/resolv.conf ","date":"2018-12-01","objectID":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/:2:0","tags":["PVE","debian"],"title":"How to install ProxmoxVE 5.x on Debian 9","uri":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/"},{"categories":["virtualization"],"content":"Change your ip and hostname vi /etc/hosts 127.0.0.1 localhost.localdomain localhost 10.32.0.60 xa-sys-pve02 pvelocalhost # The following lines are desirable for IPv6 capable hosts ::1 localhost ip6-localhost ip6-loopback ff02::1 ip6-allnodes ff02::2 ip6-allrouters ","date":"2018-12-01","objectID":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/:3:0","tags":["PVE","debian"],"title":"How to install ProxmoxVE 5.x on Debian 9","uri":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/"},{"categories":["virtualization"],"content":"Perl ALL_LC ERROR export LANGUAGE=en_US.UTF-8 export LANG=en_US.UTF-8 export LC_ALL=en_US.UTF-8 #locale-gen en_US.UTF-8 cat \u003e\u003e /etc/environment \u003c\u003cEOF LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8 EOF ","date":"2018-12-01","objectID":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/:4:0","tags":["PVE","debian"],"title":"How to install ProxmoxVE 5.x on Debian 9","uri":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/"},{"categories":["virtualization"],"content":"Add Utsc mirrors source before to chang source need to install apt install apt-transport-https #chang debian source list echo \"deb https://mirrors.ustc.edu.cn/debian/ stretch main contrib non-free deb-src https://mirrors.ustc.edu.cn/debian/ stretch main contrib non-free deb https://mirrors.ustc.edu.cn/debian/ stretch-updates main contrib non-free deb-src https://mirrors.ustc.edu.cn/debian/ stretch-updates main contrib non-free deb https://mirrors.ustc.edu.cn/debian/ stretch-backports main contrib non-free deb-src https://mirrors.ustc.edu.cn/debian/ stretch-backports main contrib non-free deb https://mirrors.ustc.edu.cn/debian-security/ stretch/updates main contrib non-free deb-src https://mirrors.ustc.edu.cn/debian-security/ stretch/updates main contrib non-free\" \u003e /etc/apt/sources.list #change pve 5.x update source list echo \"deb https://mirrors.ustc.edu.cn/proxmox/debian/pve/ stretch pve-no-subscription\" \u003e\u003e /etc/apt/sources.list #change ceph source list to utsc mirrors echo \"deb https://mirrors.ustc.edu.cn/proxmox/debian/ceph-luminous stretch main\" \u003e\u003e /etc/apt/sources.list # add key wget http://mirrors.ustc.edu.cn/proxmox/debian/proxmox-ve-release-5.x.gpg -O /etc/apt/trusted.gpg.d/proxmox-ve-release-5.x.gpg ","date":"2018-12-01","objectID":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/:5:0","tags":["PVE","debian"],"title":"How to install ProxmoxVE 5.x on Debian 9","uri":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/"},{"categories":["virtualization"],"content":"Install proxmox VE apt update \u0026\u0026 apt -y dist-ugprade apt install proxmox-ve postfix open-iscsi update-grub ","date":"2018-12-01","objectID":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/:6:0","tags":["PVE","debian"],"title":"How to install ProxmoxVE 5.x on Debian 9","uri":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/"},{"categories":["virtualization"],"content":"Remove “No valid Subscription” Message shell solution. sed -i.bak \"s/data.status !== 'Active'/false/g\" /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js \u0026\u0026 systemctl restart pveproxy.service manual solution: cd /usr/share/javascript/proxmox-widget-toolkit cp proxmoxlib.js proxmoxlib.js.bak nano proxmoxlib.js # change if (data.status !== 'Active') { if (false) { #restart pveproxy.service systemctl restart pveproxy.service Remove sourcelist of pve enterprise subscription and ceph # Delete Enterprise subscription. rm -rf /etc/apt/sources.list.d/pve-enterprise.list # Delete proxmox ve offical ceph source. rm -rf /etc/apt/sources.list.d/ceph.list ","date":"2018-12-01","objectID":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/:7:0","tags":["PVE","debian"],"title":"How to install ProxmoxVE 5.x on Debian 9","uri":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/"},{"categories":["virtualization"],"content":"Remove “No valid Subscription” Message shell solution. sed -i.bak \"s/data.status !== 'Active'/false/g\" /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js \u0026\u0026 systemctl restart pveproxy.service manual solution: cd /usr/share/javascript/proxmox-widget-toolkit cp proxmoxlib.js proxmoxlib.js.bak nano proxmoxlib.js # change if (data.status !== 'Active') { if (false) { #restart pveproxy.service systemctl restart pveproxy.service ","date":"2018-12-01","objectID":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/:8:0","tags":["PVE","debian"],"title":"How to install ProxmoxVE 5.x on Debian 9","uri":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/"},{"categories":["virtualization"],"content":"Q\u0026A When you got error like this, please make sure hosts file is set without wrong. like this10.32.0.60 xa-sys-pve02 xa-sys-pve02 pvelocalhost Setting up pve-manager (5.2-1) ... Job for pvestatd.service failed because the control process exited with error code. See \"systemctl status pvestatd.service\" and \"journalctl -xe\" for details. pvestatd.service couldn't start. dpkg: error processing package pve-manager (--configure): subprocess installed post-installation script returned error exit status 1 Processing triggers for man-db (2.7.6.1-2) ... dpkg: dependency problems prevent configuration of proxmox-ve: proxmox-ve depends on pve-manager; however: Package pve-manager is not configured yet. dpkg: error processing package proxmox-ve (--configure): dependency problems - leaving unconfigured Errors were encountered while processing: pve-manager proxmox-ve E: Sub-process /usr/bin/dpkg returned an error code (1) Setting up pve-manager (5.2-1) ... Job for pvestatd.service failed because the control process exited with error code. See \"systemctl status pvestatd.service\" and \"journalctl -xe\" for details. pvestatd.service couldn't start. dpkg: error processing package pve-manager (--configure): subprocess installed post-installation script returned error exit status 1 dpkg: dependency problems prevent configuration of proxmox-ve: proxmox-ve depends on pve-manager; however: Package pve-manager is not configured yet. dpkg: error processing package proxmox-ve (--configure): dependency problems - leaving unconfigured Errors were encountered while processing: pve-manager proxmox-ve ","date":"2018-12-01","objectID":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/:9:0","tags":["PVE","debian"],"title":"How to install ProxmoxVE 5.x on Debian 9","uri":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/"},{"categories":["virtualization"],"content":"Install openvswitch-switch apt-get install openvsiwtch-switch ","date":"2018-12-01","objectID":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/:10:0","tags":["PVE","debian"],"title":"How to install ProxmoxVE 5.x on Debian 9","uri":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/"},{"categories":["virtualization"],"content":"proxmox Q\u0026A Error 1: command '/sbin/sgdisk /dev/sde -U R' failed: exit code 3 /sbin/sgdisk /dev/sdf -U R -g *************************************************************** Found invalid GPT and valid MBR; converting MBR to GPT format in memory. *************************************************************** Error 2: `Driver ‘pcspkr’ is already registered, aborting… # echo \"blacklist pcspkr\" \u003e /etc/modprobe.d/blacklist-pcspkr.conf ","date":"2018-12-01","objectID":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/:11:0","tags":["PVE","debian"],"title":"How to install ProxmoxVE 5.x on Debian 9","uri":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/"},{"categories":["virtualization"],"content":"Reference Problem with installing Proxmox-VE on Debian Error: Driver ‘pcspkr’ is already registered, aborting… ","date":"2018-12-01","objectID":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/:12:0","tags":["PVE","debian"],"title":"How to install ProxmoxVE 5.x on Debian 9","uri":"/proxmox-ve-how-to-install-proxmoxve5-on-debian9/"},{"categories":["linux"],"content":"How to test network speed with iperf ","date":"2018-11-29","objectID":"/how-to-testing-network-bandwith-with-iperf/:0:0","tags":["linux","networking","speedtest","iperf"],"title":"How to Testing Network Bandwith With Iperf","uri":"/how-to-testing-network-bandwith-with-iperf/"},{"categories":["linux"],"content":"Install iperf sudo apt-get install iperf3 ","date":"2018-11-29","objectID":"/how-to-testing-network-bandwith-with-iperf/:1:0","tags":["linux","networking","speedtest","iperf"],"title":"How to Testing Network Bandwith With Iperf","uri":"/how-to-testing-network-bandwith-with-iperf/"},{"categories":["linux"],"content":"Testing network speed ","date":"2018-11-29","objectID":"/how-to-testing-network-bandwith-with-iperf/:2:0","tags":["linux","networking","speedtest","iperf"],"title":"How to Testing Network Bandwith With Iperf","uri":"/how-to-testing-network-bandwith-with-iperf/"},{"categories":["linux"],"content":"Testing network speed with UDP Run command on server iperf -s -u Run command on client iperf -c -u Testing network speed with TCP Server side. iperf -s Client side. iperf -c ","date":"2018-11-29","objectID":"/how-to-testing-network-bandwith-with-iperf/:2:1","tags":["linux","networking","speedtest","iperf"],"title":"How to Testing Network Bandwith With Iperf","uri":"/how-to-testing-network-bandwith-with-iperf/"},{"categories":["linux"],"content":"Command for -s server -c client + server IP -u udp -b bandwith(the max bandwidth -t time,how long to send packet. -i interval output per seconds. ","date":"2018-11-29","objectID":"/how-to-testing-network-bandwith-with-iperf/:3:0","tags":["linux","networking","speedtest","iperf"],"title":"How to Testing Network Bandwith With Iperf","uri":"/how-to-testing-network-bandwith-with-iperf/"},{"categories":["linux"],"content":" apt-get autoremove export LC_ALL=en_US.UTF-8 echo \"en_US.UTF-8 UTF-8\" \u003e\u003e /etc/locale.gen locale-gen ","date":"2018-11-29","objectID":"/how-to-remove-lc_ctype-error/:0:0","tags":["ubuntu","debian"],"title":"How to Remove LC_CTYPE Error","uri":"/how-to-remove-lc_ctype-error/"},{"categories":["programming"],"content":"Python Development ","date":"2018-11-29","objectID":"/python-development-01/:0:0","tags":["python"],"title":"Python Development 01","uri":"/python-development-01/"},{"categories":["programming"],"content":"python开发笔记-01-python开发入门 ","date":"2018-11-29","objectID":"/python-development-01/:1:0","tags":["python"],"title":"Python Development 01","uri":"/python-development-01/"},{"categories":["programming"],"content":"安装ptyhon开发工具和包 ","date":"2018-11-29","objectID":"/python-development-01/:1:1","tags":["python"],"title":"Python Development 01","uri":"/python-development-01/"},{"categories":["programming"],"content":"安装ubuntu 16.04 …pass… ","date":"2018-11-29","objectID":"/python-development-01/:1:2","tags":["python"],"title":"Python Development 01","uri":"/python-development-01/"},{"categories":["programming"],"content":"安装系统相关依赖包 build-essential包可以批量安装Python在Ubuntu上进行构建时所需的全部工具(gcc,make等). sudo apt-get -y update \u0026\u0026 \\ sudo apt-get -y upgrade \u0026\u0026 \\ sudo apt-get install -y build-essential \\ libsqlite3-dev \\ libreadline6-dev \\ libgdbm-dev \\ zlib1g-dev \\ libbz2-dev \\ sqlite3 \\ tk-dev \\ zip \\ libssl-dev ","date":"2018-11-29","objectID":"/python-development-01/:1:3","tags":["python"],"title":"Python Development 01","uri":"/python-development-01/"},{"categories":["programming"],"content":"安装python相关依赖包 install python-dev和pip # Install python-dev sudo apt-get -y install python-dev #install pip (before python 2.7.9) wget https://bootstrap.pypa.io/get-pip.py sudo python get-pip.py #在python 3.4和python2.7.9之后加入了 ensurepip模块,也就是安装python的时候默认捆绑安装pip,更新pip使用 #python -m ensurepip -U sudo python -m pip install --upgrade pip ##使用get-pip.py来安装最新版本的pip 查看python版本 $python -V Python 2.7.12 查看pip版本 $ pip --version pip 18.1 from /usr/local/lib/python2.7/dist-packages/pip (python 2.7) 通过pip安装开发用的软件 安装virtualenv包 $sudo pip insetall virtualenv Collecting virtualenv Downloading https://files.pythonhosted.org/packages/7c/17/9b7b6cddfd255388b58c61e25b091047f6814183e1d63741c8df8dcd65a2/virtualenv-16.1.0-py2.py3-none-any.whl (1.9MB) 100% |################################| 1.9MB 2.5MB/s Installing collected packages: virtualenv Successfully installed virtualenv-16.1.0 virtualenv 的使用方法 virtualenv是搭建虚拟的python执行环境. $ virtualenv --version 16.1.0 查看当前pip 安装的软件 $ pip freeze ansible==2.7.2 asn1crypto==0.24.0 bcrypt==3.1.4 cffi==1.11.5 cryptography==2.4.2 enum34==1.1.6 idna==2.7 ipaddress==1.0.22 Jinja2==2.10 MarkupSafe==1.1.0 paramiko==2.4.2 pyasn1==0.4.4 pycparser==2.19 PyNaCl==1.3.0 PyYAML==3.13 six==1.11.0 virtualenv==16.1.0 搭建virtualenv环境 $mkdir ~/work $cd ~/work $virtualenv venv New python executable in /home/user1/work/venv/bin/python Installing setuptools, pip, wheel... done. 启动virtualenv 环境 $source venv/bin/activate (venv) user1@python-dev-env:~/work$ #使用pip freeze查看已经安装pip包为空 $pip freeze 关闭virtualenv环境 $ deactivate 删除virtualenv rm -R vienv ","date":"2018-11-29","objectID":"/python-development-01/:1:4","tags":["python"],"title":"Python Development 01","uri":"/python-development-01/"},{"categories":["programming"],"content":"多python版本使用 user1@python-dev-env:~/work$ python3 -V Python 3.5.2 user1@python-dev-env:~/work$ python2 -V Python 2.7.12 使用virtualenv 设置不同版本的python mkdir -p ~/work/venv-python2 mkdir -p ~/work/venv-python3 cd ~/work virtualenv --python=/usr/bin/python2 venv-python2 virtualenv --python=/usr/bin/python3 venv-python3 source venv-python2/bin/activate python -V pip freeze deactivate source venv-python3/bin/activate python -V deactivate ","date":"2018-11-29","objectID":"/python-development-01/:1:5","tags":["python"],"title":"Python Development 01","uri":"/python-development-01/"},{"categories":["programming"],"content":"Mercurial 为什么使用 mecurial, python编写.易于上手.内置web管理,支持bitbucket,用TortoiseHg等GUI客户端. - 安装Mercurial $sudo pip install mercurial Collecting mercurial Downloading https://files.pythonhosted.org/packages/6a/f4/4c3d3a2bf950f3261f506284952e23cee2b62e50eb8974aa961228a95e8a/mercurial-4.8.tar.gz (6.9MB) 100% |################################| 6.9MB 1.3MB/s Installing collected packages: mercurial Running setup.py install for mercurial … done Successfully installed mercurial-4.8 安装zsh sudo apt-get install zsh sh -c \"$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)\" # vi ~/.zhsrc plugins=( git bundler dotenv osx rake rbenv ruby mercurial ) ZSH_THEME=“agnoster” 查看Mercurial版本 user1@python-dev-env:~$ hg --version Mercurial Distributed SCM (version 4.8) (see https://mercurial-scm.org for more information) Copyright (C) 2005-2018 Matt Mackall and others This is free software; see the source for copying conditions. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 创建版本库 创建Mercurial的环境设置文件.在主目录下创建.hgrc文件, 括号内的称为节(Section),如[ui]用来设置usernme的属性.username会想版本哭提交时候记录在日志里 [Extensions]用来激活Mercurial附属的扩展工具,将扩展工具名写入[extensions],我们就可以使用该工具了.有一些工具不但要在Extension中设置,还要在pager中设置pager属性 vi ~/.hgrc [ui] username=bpbook bpbook@beproud.jp [extensions] color= pager= [pager] pager=LESS=‘FSRX’ less mercurial mkdir ~/hgtest cd ~/hgtest hg init touch test.txt hg status ? test.txt # ？代表没有添加到hg库里、M标示修改, A标示有添加 # 添加文件　hg add hg add test.txt hg status A test.txt # 提交文件 $hg commit test commit #在打开的编辑器中,填写commit,然后保存退出,完成提交 修改~/.hgrc , [ui]节添加 [ui] editor = vim $ echo $EDITOR vim # hg staus 查看提交后的状态 hg status #查看差别 $ hg diff # 撤销编辑(未提交的内容) $ hg revert test.txt # 撤销已经提交的内容 $ hg commit --amend ","date":"2018-11-29","objectID":"/python-development-01/:1:6","tags":["python"],"title":"Python Development 01","uri":"/python-development-01/"},{"categories":["programming"],"content":"python代码编辑器 vim \" 将“Tab”替换为“空格”setl expandtab\" 将“Tab”的“缩进幅度”改为 4setl tabstop=4 “ 自动缩进时的“缩进幅度”改为 4 setl shiftwidth=4 “ 按下键盘“Tab”键时插入的空格数 “ 这里设置为 0 就可以插入“tabstop”中设置的空格数了 setl softtabstop=0 “ 保存时删除行尾的空格 autocmd BufWritePre * :%s/\\s+$//ge “80 个字符换行 setlocal textwidth=80 install neobundle.vim cd ~ curl https://raw.githubusercontent.com/Shougo/neobundle.vim/master/bin/install.sh | sh vim ~/.vimrc NeoBundle 'nvie/vim-flake8' pbd调试 def add(x, y): return x + y x= 0 import pdb; pdb.set_trace() x = add(1, 2) $python pdbtest.py \u003e pdbtest.py(7)\u003cmodule\u003e() -\u003e x = add(1, 2) (Pdb) ","date":"2018-11-29","objectID":"/python-development-01/:1:7","tags":["python"],"title":"Python Development 01","uri":"/python-development-01/"},{"categories":["linux"],"content":"Ssh Login Without Password ","date":"2018-11-29","objectID":"/ssh-login-without-password/:0:0","tags":["ssh"],"title":"Ssh Login Without Password","uri":"/ssh-login-without-password/"},{"categories":["linux"],"content":"SSH login linux/unix without password ","date":"2018-11-29","objectID":"/ssh-login-without-password/:1:0","tags":["ssh"],"title":"Ssh Login Without Password","uri":"/ssh-login-without-password/"},{"categories":["linux"],"content":"General your key ssh-keygen-t rsa ","date":"2018-11-29","objectID":"/ssh-login-without-password/:2:0","tags":["ssh"],"title":"Ssh Login Without Password","uri":"/ssh-login-without-password/"},{"categories":["linux"],"content":"copy your rsa.pub to server which you want to login without password. ssh-copy-id -i ~/.ssh/id_rsa.pub user1@$server-hosts ","date":"2018-11-29","objectID":"/ssh-login-without-password/:3:0","tags":["ssh"],"title":"Ssh Login Without Password","uri":"/ssh-login-without-password/"},{"categories":["linux"],"content":"Test login ssh user1@$server-hosts ","date":"2018-11-29","objectID":"/ssh-login-without-password/:4:0","tags":["ssh"],"title":"Ssh Login Without Password","uri":"/ssh-login-without-password/"},{"categories":["virtualization"],"content":"Proxmox VE 5.x Installation ","date":"2018-11-19","objectID":"/proxmox-ve-v5.x-installation/:0:0","tags":["PVE"],"title":"Proxmoxve VE V5.x Installation","uri":"/proxmox-ve-v5.x-installation/"},{"categories":["virtualization"],"content":"Proxmox won’t install- “A volume group called pve already exists Solution: Boot the proxmox installer USB Select Debug Mode Press “CTRL+D” to start the installer wizard. Click on abort Run “vgdisplay” to dislay the LVM PG’s. Run “vgremode pve ” to remove pve PG. ","date":"2018-11-19","objectID":"/proxmox-ve-v5.x-installation/:1:0","tags":["PVE"],"title":"Proxmoxve VE V5.x Installation","uri":"/proxmox-ve-v5.x-installation/"},{"categories":["virtualization"],"content":"Remove “No valid Subscription” Message shell solution. sed -i.bak \"s/data.status !== 'Active'/false/g\" /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js \u0026\u0026 systemctl restart pveproxy.service manual solution: cd /usr/share/javascript/proxmox-widget-toolkit cp proxmoxlib.js proxmoxlib.js.bak nano proxmoxlib.js # change if (data.status !== 'Active') { if (false) { #restart pveproxy.service systemctl restart pveproxy.service ","date":"2018-11-19","objectID":"/proxmox-ve-v5.x-installation/:2:0","tags":["PVE"],"title":"Proxmoxve VE V5.x Installation","uri":"/proxmox-ve-v5.x-installation/"},{"categories":["virtualization"],"content":"Change update source #chang debian source list echo \"deb https://mirrors.ustc.edu.cn/debian/ stretch main contrib non-free deb-src https://mirrors.ustc.edu.cn/debian/ stretch main contrib non-free deb https://mirrors.ustc.edu.cn/debian/ stretch-updates main contrib non-free deb-src https://mirrors.ustc.edu.cn/debian/ stretch-updates main contrib non-free deb https://mirrors.ustc.edu.cn/debian/ stretch-backports main contrib non-free deb-src https://mirrors.ustc.edu.cn/debian/ stretch-backports main contrib non-free deb https://mirrors.ustc.edu.cn/debian-security/ stretch/updates main contrib non-free deb-src https://mirrors.ustc.edu.cn/debian-security/ stretch/updates main contrib non-free\" \u003e /etc/apt/sources.list #change pve 5.x update source list echo \"deb https://mirrors.ustc.edu.cn/proxmox/debian/pve/ stretch pve-no-subscription\" \u003e\u003e /etc/apt/sources.list #change ceph source list to utsc mirrors echo \"deb https://mirrors.ustc.edu.cn/proxmox/debian/ceph-luminous stretch main\" \u003e\u003e /etc/apt/sources.list # add key wget http://mirrors.ustc.edu.cn/proxmox/debian/proxmox-ve-release-5.x.gpg -O /etc/apt/trusted.gpg.d/proxmox-ve-release-5.x.gpg apt update \u0026\u0026 apt -y dist-upgrade update-grub Remove sourcelist of pve enterprise subscription and ceph # Delete Enterprise subscription. rm -rf /etc/apt/sources.list.d/pve-enterprise.list # Delete proxmox ve offical ceph source. rm -rf /etc/apt/sources.list.d/ceph.list ","date":"2018-11-19","objectID":"/proxmox-ve-v5.x-installation/:3:0","tags":["PVE"],"title":"Proxmoxve VE V5.x Installation","uri":"/proxmox-ve-v5.x-installation/"},{"categories":["virtualization"],"content":"Reference Proxmox won’t install - “A volume group called pve already exists”. Remove Proxmox 5.1 or 5.2 Subscription Notice ","date":"2018-11-19","objectID":"/proxmox-ve-v5.x-installation/:4:0","tags":["PVE"],"title":"Proxmoxve VE V5.x Installation","uri":"/proxmox-ve-v5.x-installation/"},{"categories":["linux"],"content":"Linux In Action-[翻译]Linux实战 ","date":"2018-11-16","objectID":"/linux-in-action-01/:0:0","tags":["linux","translate"],"title":"Linux in Action 01","uri":"/linux-in-action-01/"},{"categories":["linux"],"content":"前言 作为IT运维人员或者程序员,不论做什么或做多久.如果你不学习新东西,你可能现在已经已经转行了.不仅仅是平台或者技术图表持续的变更.也不仅仅是业务需求需要新思维.或者一个坏蛋不停使用新路子来攻击你的服务器. 而是所用事情的综合. 你不能承担停止学习的代价.而诀窍就是找到一个方法学习高优先级的技能,而不能让经验成为你成长的阻碍. 我的意愿和初衷是想让你遍读本书的每一章,然后可以自信地接受挑战(一些以前你不能自信挑战的事情)并战胜之.如果你 ","date":"2018-11-16","objectID":"/linux-in-action-01/:1:0","tags":["linux","translate"],"title":"Linux in Action 01","uri":"/linux-in-action-01/"},{"categories":["reverse proxy"],"content":"How to Setup Reverse proxy with IIS I testing it on Server 2016 with IIS 10 ","date":"2018-11-06","objectID":"/how-to-setup-reverse-proxy-with-iis/:0:0","tags":["windows","iis","reverse proxy"],"title":"How to Setup Reverse Proxy With Iis","uri":"/how-to-setup-reverse-proxy-with-iis/"},{"categories":["reverse proxy"],"content":"Install IIS,URL _REWRITE, ARR Install IIS. Download and install URL Rewrite Module 2.1 Download and install ARR-Application-request-routing ","date":"2018-11-06","objectID":"/how-to-setup-reverse-proxy-with-iis/:1:0","tags":["windows","iis","reverse proxy"],"title":"How to Setup Reverse Proxy With Iis","uri":"/how-to-setup-reverse-proxy-with-iis/"},{"categories":["reverse proxy"],"content":"Setting Reverse Proxy Select Root level in IIS management Click ‘Application Request Routing Cache’,then in the right side, click “proxy | Server proxy Settings | Check on “Enable proxy” | save config. Select website in IIS. Click URL Rewrite Add a black Rule * Match URL: Requested URL Using Pattern Matches the pattern Regular Expressions ^(.*) * Conditions: Type Value Logical grouping Match ALL input {HTTP_HOST} Type Matches the Pattern Patern ^xa-sys-svr:8080$ * Server Variables: Type Value Action Type Rewrite Rewrite URL http://www.cnblog.com/{R:1} ","date":"2018-11-06","objectID":"/how-to-setup-reverse-proxy-with-iis/:2:0","tags":["windows","iis","reverse proxy"],"title":"How to Setup Reverse Proxy With Iis","uri":"/how-to-setup-reverse-proxy-with-iis/"},{"categories":["reverse proxy"],"content":"Reference 用IIS配置反向代理 ","date":"2018-11-06","objectID":"/how-to-setup-reverse-proxy-with-iis/:3:0","tags":["windows","iis","reverse proxy"],"title":"How to Setup Reverse Proxy With Iis","uri":"/how-to-setup-reverse-proxy-with-iis/"},{"categories":["virtualization"],"content":"KVM virtualization-01 Introduction Today we are start to learn kvm virtulization After try to find which is the right open source virtulization solution,which include Bhyver, Trolin/smartos, ovirt, OpenStack. Openstack is too heavy and it is suitable for you have thousands of host to managament. bhyver is base freebsd, and it has a web managment system named Clonos which write by a russian Less support. smartos/Trolin is a opensolaris base . But few people use it. It has open source version, but the offical website say again and again that ‘you’d better to contact us to install it’, that means you should pay for it if you want use it . Ovirt is ","date":"2018-10-26","objectID":"/kvm-virtualization-01-introduction/:0:0","tags":["KVM"],"title":"Kvm Virtualization 01 Introduction","uri":"/kvm-virtualization-01-introduction/"},{"categories":["networking"],"content":"Building Network With Vyos.-.01.Basic Installing and Configuration Vyos is a debian base router. it is fork form vyatta core.It is very stable and fast router OS. It hasn’t web UI, but only command line configration just like JUNOS. At now, vyos version will be vyos version 1.2 released. I will wirte the turtural with vyos 1.2RC4. ","date":"2018-10-26","objectID":"/building-network-with-vyos-01-basic-installing-and-configuration/:0:0","tags":["vyos"],"title":"Building Network With Vyos 01---Basic Installing and Configuration","uri":"/building-network-with-vyos-01-basic-installing-and-configuration/"},{"categories":["networking"],"content":"Install vyos Download vyos form the office website: Download Link: vyos-1.2.0-rc-4-amd64 ","date":"2018-10-26","objectID":"/building-network-with-vyos-01-basic-installing-and-configuration/:1:0","tags":["vyos"],"title":"Building Network With Vyos 01---Basic Installing and Configuration","uri":"/building-network-with-vyos-01-basic-installing-and-configuration/"},{"categories":["networking"],"content":"Write iso image to usb disk Linux and Mac: ddi if=vyos-1.2.0-rc-4-amd64.iso of=/dev/$yourusbdisk bs=1M Windows: download Rufus: rufus select dd mode to write disk. ","date":"2018-10-26","objectID":"/building-network-with-vyos-01-basic-installing-and-configuration/:2:0","tags":["vyos"],"title":"Building Network With Vyos 01---Basic Installing and Configuration","uri":"/building-network-with-vyos-01-basic-installing-and-configuration/"},{"categories":["networking"],"content":"Install vyos with wizard. press F11 or set COMS to boot from usb. Enter Default username and password to login livecd. vyos login: vyos Password: vyos ## Write image to local driver: ```bash install image Reboot System to boot from local disk. reboot now ","date":"2018-10-26","objectID":"/building-network-with-vyos-01-basic-installing-and-configuration/:3:0","tags":["vyos"],"title":"Building Network With Vyos 01---Basic Installing and Configuration","uri":"/building-network-with-vyos-01-basic-installing-and-configuration/"},{"categories":["networking"],"content":"Basic Command vyos command line include 2 mode: Operation mode and configure mode. Operation Mode shell command start with $. These command usually show sysytem. information,reboot/shutdown system. Configure Mode shell command start with #. These command usually change configuration of vyos. ","date":"2018-10-26","objectID":"/building-network-with-vyos-01-basic-installing-and-configuration/:4:0","tags":["vyos"],"title":"Building Network With Vyos 01---Basic Installing and Configuration","uri":"/building-network-with-vyos-01-basic-installing-and-configuration/"},{"categories":["networking"],"content":"Operation Mode # Enter configure mode configure #Exit to operation Mode exit #Check vyos version show version #Check vyos running time show system uptime #Check system time and timezone show date #Reboot system reboot now #Shutdown System poweroff now #upgrade system image version add system image $URL_or_path #Reset configuration # Enter config mode configure #loading default configure load /opt/vyatta/etc/config.boot.default # commit loading default configure commit # save to default boot configure file. save #Exit configure mode exit #Reboot system now to finish loading default configuration. reboot now #bonding \u003cconitune…\u003e ","date":"2018-10-26","objectID":"/building-network-with-vyos-01-basic-installing-and-configuration/:4:1","tags":["vyos"],"title":"Building Network With Vyos 01---Basic Installing and Configuration","uri":"/building-network-with-vyos-01-basic-installing-and-configuration/"},{"categories":["develop"],"content":"How to install netcore/aspnetcore 2.1.4 on RHEL 6.8 Recently days, we met a scenario that is our client production environment must be RHEL 6.8. But our product is base asp.net core 2.1.x version. Rehat and Microsoft has never say the are support RHEL 6.X version. After a few days research, I found that .net core website is support RHEL 6.X,but no runtime.We can download install SDK to support asp.net core. And you know what? It works well finally! ","date":"2018-10-26","objectID":"/how-to-install-dotnetcore2.1.x-and-asp.net21.x-on-rhel6.x-centos6.x/:1:0","tags":["dotnetcore","linux"],"title":"How to Install Dotnetcore2.1.x and Asp.net21.x on RHEL6.x CENTOS6","uri":"/how-to-install-dotnetcore2.1.x-and-asp.net21.x-on-rhel6.x-centos6.x/"},{"categories":["develop"],"content":"Install netcore 2.1.4 sdk #!/bin/sh yum install -y wget epel-release yum install -y openssl-devel libnghttp2-devel libidn-devel gcc libtool m4 automake cd /tmp/ curl -O https://curl.haxx.se/download/curl-7.45.0.tar.gz tar -xf curl-7.45.0.tar.gz cd curl-7.45.0 ./configure \\ --disable-dict \\ --disable-file \\ --disable-ftp \\ --disable-gopher \\ --disable-imap \\ --disable-ldap \\ --disable-ldaps \\ --disable-libcurl-option \\ --disable-manual \\ --disable-pop3 \\ --disable-rtsp \\ --disable-smb \\ --disable-smtp \\ --disable-telnet \\ --disable-tftp \\ --enable-ipv6 \\ --enable-optimize \\ --enable-symbol-hiding \\ --with-ca-bundle=/etc/pki/tls/certs/ca-bundle.crt \\ --with-nghttp2 \\ --with-gssapi \\ --with-ssl \\ --without-librtmp \\ --prefix=$PWD/install/usr/local ","date":"2018-10-26","objectID":"/how-to-install-dotnetcore2.1.x-and-asp.net21.x-on-rhel6.x-centos6.x/:1:1","tags":["dotnetcore","linux"],"title":"How to Install Dotnetcore2.1.x and Asp.net21.x on RHEL6.x CENTOS6","uri":"/how-to-install-dotnetcore2.1.x-and-asp.net21.x-on-rhel6.x-centos6.x/"},{"categories":["develop"],"content":"make install cd install tar -czf curl-7_45_0-RHEL6-x64.tgz * curl -O http://download.icu-project.org/files/icu4c/57.1/icu4c-57_1-RHEL6-x64.tgz tar -xf curl-7_45_0-RHEL6-x64.tgz -C / tar -xf icu4c-57_1-RHEL6-x64.tgz -C / echo \"export LD_LIBRARY_PATH=/usr/local/lib\" \u003e\u003e /etc/profile export LD_LIBRARY_PATH=/usr/local/lib cd /tmp/ mkdir dotnetsdk curl -O https://download.microsoft.com/download/8/A/7/8A765126-50CA-4C6F-890B-19AE47961E4B/dotnet-sdk-2.1.402-rhel.6-x64.tar.gz tar -zxvf dotnet-sdk-2.1.402-rhel.6-x64.tar.gz -C dotnetsdk/ mv dotnetsdk /opt/ ln -s /opt/dotnetsdk/dotnet /usr/bin/dotnet curl -sSL https://github.com/libuv/libuv/archive/v1.4.2.tar.gz | sudo tar zxfv - -C /usr/local/src # Insall libuv-1.4.2 cd /usr/local/src/libuv-1.4.2 sh autogen.sh ./configure make make install rm -rf /usr/local/src/libuv-1.4.2 \u0026\u0026 cd ~/ ldconfig ","date":"2018-10-26","objectID":"/how-to-install-dotnetcore2.1.x-and-asp.net21.x-on-rhel6.x-centos6.x/:1:2","tags":["dotnetcore","linux"],"title":"How to Install Dotnetcore2.1.x and Asp.net21.x on RHEL6.x CENTOS6","uri":"/how-to-install-dotnetcore2.1.x-and-asp.net21.x-on-rhel6.x-centos6.x/"},{"categories":["develop"],"content":"Reference How to use .NET Core on RHEL 6 / CentOS 6 .NET Core 2.1.4 ","date":"2018-10-26","objectID":"/how-to-install-dotnetcore2.1.x-and-asp.net21.x-on-rhel6.x-centos6.x/:2:0","tags":["dotnetcore","linux"],"title":"How to Install Dotnetcore2.1.x and Asp.net21.x on RHEL6.x CENTOS6","uri":"/how-to-install-dotnetcore2.1.x-and-asp.net21.x-on-rhel6.x-centos6.x/"},{"categories":["hugo"],"content":"Hugo on your MacOS Setting github create a repo named blogs for store hugo programes. Create another repo named echowings.github.io to host websit. generate ssh key and regist it on github settings. Install hugo brew install hugo Create a blog site. hugo new site blogs init git cd blogs git init #Add remote repo. git remote add origin git@github.com:echowings/blogs.git #Add a theme for your hugo. git submodule add -b master https://github.com/xianmin/hugo-theme-jane.git themes/jane cp -r themes/jane/exampleSite/content ./ cp themes/jane/exampleSite/config.toml ./ Test hugo at local. hugo server You can access http://localhost:1313 to test your blog in local. Change configure Modifiy vi config.toml #Change URL baseURL = \"https://blog.stevedong.com\" #Change Title title = \"Steve Dong - A System Administrator's Blog\" #Change theme to jane theme = \"jane\" #How many pages will be displayed on homepage. pageinate = 15 # Display how many pages will be displayed on archive page. archive-paginate = 50 #RSS limite. rssLimit = 50 #google analytics related googleAnalytics= \"UA-xxxxxxxx-X\" # Chang author name = \"Steve Dong\" # Commit the meanu \"External Link\" #[[menu.main]] # name = \"MyGitHub\" # weight = 50 # url = \"https://echowings.github.com\" #Change Site creation time [params] since = \"2018\" logoTitle= \"Steve Dong\" keywords = [\"network\", \"devops', \"System Administrator\"] ","date":"2018-10-26","objectID":"/how-to-build-blog-with-hugo-on-github/:0:1","tags":["hugo"],"title":"How to Build Blog With Hugo on Github","uri":"/how-to-build-blog-with-hugo-on-github/"},{"categories":["hugo"],"content":"Add syntax highlight vi config.toml add pygmentsCodefences = true #高亮markdown的代码块 pygmentsCodefencesGuessSyntax = true #高亮markdown中没有标注语言的代码块 pygmentsStyle = 'manni' #高亮主题 ","date":"2018-10-26","objectID":"/how-to-build-blog-with-hugo-on-github/:0:2","tags":["hugo"],"title":"How to Build Blog With Hugo on Github","uri":"/how-to-build-blog-with-hugo-on-github/"},{"categories":["hugo"],"content":"Deploy your blog to github Add repo of blog website. git submodule add --force -b \\ master git@github.com:echowings/echowings.github.io.git public Run hugo to generate your blog website. hugo server `` publish your website cd public git add. git commit -m \"YOUR COMMIT MESSAGE\" git push origin master Backup your hugo blog to github cd .. git add. git commit -m \"YOUR COMMIT MESSAGE\" git push origin master `` ","date":"2018-10-26","objectID":"/how-to-build-blog-with-hugo-on-github/:1:0","tags":["hugo"],"title":"How to Build Blog With Hugo on Github","uri":"/how-to-build-blog-with-hugo-on-github/"},{"categories":["hugo"],"content":"Add a comment Since theme jane has support utterances, we just need to enable utterances apps in github and configure it in config.toml in hugo. Create a repo to storage comment. like “blogcomment”. enable utternaces apps. click utterances app Auth utterances to your github repo “blogcomment”. edit blogs/config.toml and append follow lines. [params.utteranc] enable = true repo=“echowings/blogcomment” issueTerm=“pathname” ### Download git and rebuild blog environment ``` zsh git pulll git@github.com:echowings/blogs.git #if public already exsited run `rm public` git submodule add --force -b master git@github.com:echowings/echowings.github.io.git public ","date":"2018-10-26","objectID":"/how-to-build-blog-with-hugo-on-github/:1:1","tags":["hugo"],"title":"How to Build Blog With Hugo on Github","uri":"/how-to-build-blog-with-hugo-on-github/"},{"categories":["hugo"],"content":"Reference utterances hugo-theme-jane/dev-config.toml 如何在github.io搭建Hugo博客站 用chroma进行语法高亮 ","date":"2018-10-26","objectID":"/how-to-build-blog-with-hugo-on-github/:2:0","tags":["hugo"],"title":"How to Build Blog With Hugo on Github","uri":"/how-to-build-blog-with-hugo-on-github/"},{"categories":[""],"content":"A journey of a thousand miles begins with a single step THis a blog to be build as my knowleage base. ","date":"2018-10-26","objectID":"/first-blog/:0:0","tags":[""],"title":"First_Blog","uri":"/first-blog/"},{"categories":null,"content":"GCVPN Settings Location Remote Gateway Key Exchange version Description Phase1 Authentication method Negotiation mode My identifier Peer identifier Pre-shared key Encryption algorithm Hash algorithm DH key group Lifetime Shanghai 114.31.87.50 ","date":"0001-01-01","objectID":"/gcvpn-settings/:0:0","tags":null,"title":"","uri":"/gcvpn-settings/"},{"categories":null,"content":"#英特尔软件和数据中心版固态硬盘的安全漏洞 Intel SSD DC S4500. Credit: Intel 自从2018年被发现熔断(Meltdown)和幽灵(Spectre)漏洞以来，英特尔一直是安全研究的焦点。 安全研究人员最近发现英特尔软件的新缺陷，其中包括来自Eclypsium的安全研究员Jesse Michael发现的处理器诊断工具的高危漏洞，以及英特尔工程师发现的数据中心版本SSD中的一个漏洞。 #新发现的两个英特尔软件漏洞 处理器诊断工具（CVE-2019-11133）中的缺陷在CVSS 3.0规模上评为8.2（满分10分），这使其成为一个高危漏洞。根据英特尔最新的安全公告，该漏洞“可能允许经过身份验证的用户做到本地提权，信息泄露或 拒绝服务”。低于4.1.2.24版本会受到影响。 英特尔内部团队发现的第二个漏洞是销售给数据中心客户的英特尔SSD DC S4500 / S4600系列中的中等严重性漏洞。低于版本SCV10150的SSD固件版本中发现的缺陷在CVSS 3.0规模上获得了5.3分，因此它被标记为中等严重性。该错误可能允许非特权用户通过物理访问启用权限提升。 由于其中一个缺陷是由英特尔本身发现的，另一个是与英特尔协调的Eclypsium研究披露，英特尔能够及时准备好这些补丁以供公众宣布。 sed -i ’s/ZSH_THEME=\"robbyrussell\"/ZSH_THEME=\"agnoster\"/g’ ~/.zshrc ","date":"0001-01-01","objectID":"/untitled/:0:0","tags":null,"title":"","uri":"/untitled/"},{"categories":["linux"],"content":"How to deploy docker in debian 10 cat \u003c\u003c EOF \u003e /etc/docker/aemon.json\\n{\\n \"registry-mirrors\": [\"https://docker.mirrors.ustc.edu.cn/\"]\\n}\\n\\nEOF systemctl retart docker systemctl restart docker ","date":"0001-01-01","objectID":"/how-to-deploy-docker-in-debian-10/:0:0","tags":["debian","docker","docker-compose","linux"],"title":"How to Deploy Docker in Debian 10","uri":"/how-to-deploy-docker-in-debian-10/"},{"categories":["linux"],"content":"Install docker-compose sudo curl -L \"https://github.com/docker/compose/releases/download/1.24.0/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose sudo chmod +x /usr/local/bin/docker-compose sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose ","date":"0001-01-01","objectID":"/how-to-deploy-docker-in-debian-10/:1:0","tags":["debian","docker","docker-compose","linux"],"title":"How to Deploy Docker in Debian 10","uri":"/how-to-deploy-docker-in-debian-10/"}]