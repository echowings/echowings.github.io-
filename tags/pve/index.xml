<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>pve - Tag - echowings</title><link>https://echowings.github.io/tags/pve/</link><description>pve - Tag - echowings</description><generator>Hugo -- gohugo.io</generator><language>en</language><managingEditor>echo.wings@gmail.com (echowings)</managingEditor><webMaster>echo.wings@gmail.com (echowings)</webMaster><copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright><lastBuildDate>Thu, 01 Jul 2021 14:06:58 +0800</lastBuildDate><atom:link href="https://echowings.github.io/tags/pve/" rel="self" type="application/rss+xml"/><item><title>How to Delete Ghost Monitor in Ceph Cluster</title><link>https://echowings.github.io/how-to-delete-ghost-monitor-in-ceph-cluster/</link><pubDate>Thu, 01 Jul 2021 14:06:58 +0800</pubDate><author>Author</author><guid>https://echowings.github.io/how-to-delete-ghost-monitor-in-ceph-cluster/</guid><description><![CDATA[How to delete ghost monitor in ceph cluster  Today , after I let a new server join pve cluster. ceph mon is stopped. I want to start or delete it , I always got a failed notification. After search and try to fix it. At last I fixed it.Here is what I had do
Issue description 1 2 3 4  root@xa-autotest-hci04:~# pveceph createmon monitor &#39;xa-autotest-hci04&#39; already exists root@xa-autotest-hci04:~# pveceph mon destroy xa-autotest-hci04 no such monitor id &#39;xa-autotest-hci04&#39;   How to fixed it 1 2 3 4 5 6 7 8 9 10 11 12  #stop ceph-mon@xa-autotest-hci04 service systemctl stop ceph-mon@xa-autotest-hci04 #Disable ceph-mon@xa-autotest-hci04 service systemctl disable ceph-mon@xa-autotest-hci04 pveceph purge rm -rf /var/lib/ceph/mon/ceph-xa-autotest-hci04 pveceph createmon #Created symlink /etc/systemd/system/ceph-mon.]]></description></item><item><title>How to Let a New Server Join Hci System</title><link>https://echowings.github.io/how-to-let-a-new-server-join-hci-system/</link><pubDate>Thu, 01 Jul 2021 06:38:10 +0800</pubDate><author>Author</author><guid>https://echowings.github.io/how-to-let-a-new-server-join-hci-system/</guid><description><![CDATA[##How to let a new server join the exist HCI cluster
1. Insall the pve on the server &ndash;skip&mdash;
2. Let the new server join the pve cluster 1 2  #ssh login the server pvecm add 10.32.4.37   3. configure NTP server 1 2 3 4 5  cat &gt;&gt; /etc/systemd/timesyncd.conf &lt;&lt; EOF NTP=192.168.0.2 192.168.0.3 EOF # Restart systemd-timesyncd service to apply settings systemctl restart systemd-timesyncd   4.]]></description></item><item><title>How to Rename Vm Id on Pve</title><link>https://echowings.github.io/how-to-rename-vm-id-on-pve/</link><pubDate>Fri, 26 Mar 2021 15:23:43 +0800</pubDate><author>Author</author><guid>https://echowings.github.io/how-to-rename-vm-id-on-pve/</guid><description><![CDATA[How to rename VMID on PVE 1 2 3 4 5 6 7 8 9  VMID=121 &amp;&amp; \  NEW_VMID=1001 &amp;&amp; \ 	POOL_NAME=tank &amp;&amp; \ 	qm unlock $VMID &amp;&amp; \ 	qm stop $VMID &amp;&amp; \ 	sed -i &#34;s/$VMID/$NEW_VMID/g&#34; /etc/pve/qemu-server/$VMID.conf &amp;&amp; \ 	mv /etc/pve/qemu-server/$VMID.conf /etc/pve/qemu-server/$NEW_VMID.conf &amp;&amp; \ 	rbd --pool $POOL_NAME rename vm-$VMID-disk-0 vm-$NEW_VMID-disk-0 &amp;&amp;\  qm start $NEW_VMID   ]]></description></item><item><title>How to Setup Opencase on Pve6</title><link>https://echowings.github.io/how-to-setup-opencase-on-pve6.x/</link><pubDate>Sat, 13 Mar 2021 14:49:17 +0800</pubDate><author>Author</author><guid>https://echowings.github.io/how-to-setup-opencase-on-pve6.x/</guid><description>How to setup open cas on pve 6.x Install prepare software 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 apt update &amp;amp;&amp;amp; apt -y dist-upgrade apt install -y make gcc build-essential apt install -y pve-kernel-$(uname -r) apt install -y pve-headers-$(uname -r) OPENCAS_VERSION=20.</description></item><item><title>How to Install Pbs on Debian 10</title><link>https://echowings.github.io/how-to-install-pbs-on-debian10/</link><pubDate>Thu, 11 Mar 2021 16:58:45 +0800</pubDate><author>Author</author><guid>https://echowings.github.io/how-to-install-pbs-on-debian10/</guid><description><![CDATA[How to Install PBS on Debian 10 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34  export LANGUAGE=en_US.UTF-8 export LANG=en_US.UTF-8 export LC_ALL=en_US.UTF-8 #locale-gen en_US.UTF-8 cat &gt;&gt; /etc/environment &lt;&lt;EOF LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8 EOF cat &lt;&lt; EOF &gt; /etc/apt/sources.list deb https://mirrors.ustc.edu.cn/debian/ buster main contrib non-free deb-src https://mirrors.ustc.edu.cn/debian/ buster main contrib non-free deb https://mirrors.]]></description></item><item><title>Bcache</title><link>https://echowings.github.io/bcache/</link><pubDate>Tue, 09 Mar 2021 16:20:42 +0800</pubDate><author>Author</author><guid>https://echowings.github.io/bcache/</guid><description>How to operate becache Recently I just try to add bcache with zfs and ceph. So I just wirte down it.
Install bcache-tools Since bcache implement in Linux kernel. So it will default enabled. We just need to install bcache-tools to operate bcache.
1 apt install -y bcache-tools Configure bcache 1 2 3 4 5 6 7 # make a cache disk for bcache .It must be a ssd disk.</description></item><item><title>How to Install Proxmox VE 6 on Debian 10</title><link>https://echowings.github.io/how-to-install-proxmox-ve-6-on-debian-10/</link><pubDate>Mon, 01 Mar 2021 13:28:01 +0800</pubDate><author>Author</author><guid>https://echowings.github.io/how-to-install-proxmox-ve-6-on-debian-10/</guid><description><![CDATA[How to Install Proxmox VE 6 on Debian 10 Install debian 10 Modifiy hostname and hosts file 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44  export LANGUAGE=en_US.UTF-8 export LANG=en_US.UTF-8 export LC_ALL=en_US.UTF-8 #locale-gen en_US.UTF-8 cat &gt;&gt; /etc/environment &lt;&lt;EOF LC_ALL=en_US.]]></description></item><item><title>How to Create Debian10 With Cloudinit for Pve</title><link>https://echowings.github.io/how-to-create-debian10-with-cloudinit-for-pve/</link><pubDate>Sun, 20 Sep 2020 14:56:48 +0800</pubDate><author>Author</author><guid>https://echowings.github.io/how-to-create-debian10-with-cloudinit-for-pve/</guid><description>How to Create Debian10 template With Cloudinit for PVE 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 VMID=9002 VM_NAME=CentOS-7-x86_64-GenericCloud VM_DOWNLOAD_URL=http://mirrors.ustc.edu.cn/centos-cloud/centos/7/images/CentOS-7-x86_64-GenericCloud.qcow2.xz TEMPLATE_VM_NAME=$(echo $VM_NAME | sed &amp;#39;s/_/-/g&amp;#39;) STORAGE_PATH=local DEFAULT_PVE_PATH=/var/lib/vz/images #Change directory to `local` cd /var/lib/vz/images #Download centos 7 cloud images on proxmox ve wget $VM_DOWNLOAD_URL #unzip the file #xz -z (to zip file) #xz -k( to keep original file and valur `-0` to `-9` to set zip rate, default zip rate is -6 #xz -d (to unzip file) # xz -k (to keep zipped file not deleted) xz -d -k $VM_NAME.</description></item><item><title>How to Create Centos7 Template for Pve</title><link>https://echowings.github.io/how-to-create-centos7-template-for-pve/</link><pubDate>Sat, 12 Sep 2020 17:29:39 +0800</pubDate><author>Author</author><guid>https://echowings.github.io/how-to-create-centos7-template-for-pve/</guid><description>HOw to create CentOS 7 template for PVE 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 VMID=9002 VM_NAME=CentOS-7-x86_64-GenericCloud VM_DOWNLOAD_URL=http://mirrors.ustc.edu.cn/centos-cloud/centos/7/images/CentOS-7-x86_64-GenericCloud.qcow2.xz TEMPLATE_VM_NAME=$(echo $VM_NAME | sed &amp;#39;s/_/-/g&amp;#39;) STORAGE_PATH=local DEFAULT_PVE_PATH=/var/lib/vz/images #Change directory to `local` cd /var/lib/vz/images #Download centos 7 cloud images on proxmox ve wget $VM_DOWNLOAD_URL #unzip the file #xz -z (to zip file) #xz -k( to keep original file and valur `-0` to `-9` to set zip rate, default zip rate is -6 #xz -d (to unzip file) # xz -k (to keep zipped file not deleted) xz -d -k $VM_NAME.</description></item><item><title>How to Extend All Available Disk to Local Data</title><link>https://echowings.github.io/how-to-extend-all-available-disk-to-local-data/</link><pubDate>Fri, 04 Sep 2020 09:11:30 +0800</pubDate><author>Author</author><guid>https://echowings.github.io/how-to-extend-all-available-disk-to-local-data/</guid><description>How to extend all available disk to local-data After install Proxmove VE, the local-data only have about 50GB disk availabe. But how to let all availabld disk space to the local-data? Here we go:
1 2 3 4 5 6 7 8 # Remove local-data lvremove /dev/pve/data # Extend all available disk to /dev/pve/root lvresize -l +100%FREE /dev/pve/root #recreate pve-root resize2fs /dev/mapper/pve-root Reference Proxmox â€“ Remove LVM local-data</description></item></channel></rss>